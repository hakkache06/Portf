{"ast":null,"code":"'use strict';\n\nvar React = require('react');\n\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n.default = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\n\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespaceDefault(PdfJsApi);\n\nexports.AnnotationType = void 0;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexports.TextDirection = void 0;\n\n(function (TextDirection) {\n  TextDirection[\"RightToLeft\"] = \"RTL\";\n  TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\n\nvar ThemeContext = React__namespace.createContext({\n  currentTheme: 'light',\n  direction: exports.TextDirection.LeftToRight,\n  setCurrentTheme: function () {}\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__button': true,\n      'rpv-core__button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n  var containerRef = React__namespace.useRef(null);\n  var once = props.once,\n      threshold = props.threshold,\n      onVisibilityChanged = props.onVisibilityChanged;\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var intersectionTracker = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n\n        if (isVisible && once) {\n          intersectionTracker.unobserve(container);\n          intersectionTracker.disconnect();\n        }\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    intersectionTracker.observe(container);\n    return function () {\n      intersectionTracker.unobserve(container);\n      intersectionTracker.disconnect();\n    };\n  }, []);\n  return containerRef;\n};\n\nvar LazyRender = function (_a) {\n  var attrs = _a.attrs,\n      children = _a.children,\n      testId = _a.testId;\n\n  var _b = React__namespace.useState(false),\n      visible = _b[0],\n      setVisible = _b[1];\n\n  var containerAttrs = testId ? __assign(__assign({}, attrs), {\n    'data-testid': testId\n  }) : attrs;\n\n  var handleVisibilityChanged = function (params) {\n    if (params.isVisible) {\n      setVisible(true);\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    once: true,\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", __assign({\n    ref: containerRef\n  }, containerAttrs), visible && children);\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var containerRef = React__namespace.useRef();\n  var visibleMenuItemsRef = React__namespace.useRef([]);\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var handleKeyDown = function (e) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    switch (e.key) {\n      case 'Tab':\n        e.preventDefault();\n        break;\n\n      case 'ArrowDown':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex + 1;\n        });\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        moveToItem(function (_, currentIndex) {\n          return currentIndex - 1;\n        });\n        break;\n\n      case 'End':\n        e.preventDefault();\n        moveToItem(function (items, _) {\n          return items.length - 1;\n        });\n        break;\n\n      case 'Home':\n        e.preventDefault();\n        moveToItem(function (_, __) {\n          return 0;\n        });\n        break;\n    }\n  };\n\n  var moveToItem = function (getNextItem) {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var items = visibleMenuItemsRef.current;\n    var currentIndex = items.findIndex(function (item) {\n      return item.getAttribute('tabindex') === '0';\n    });\n    var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n\n    if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n      items[currentIndex].setAttribute('tabindex', '-1');\n    }\n\n    items[targetIndex].setAttribute('tabindex', '0');\n    items[targetIndex].focus();\n  };\n\n  var findVisibleItems = function (container) {\n    var visibleItems = [];\n    container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n      if (item instanceof HTMLElement) {\n        var parent_1 = item.parentElement;\n\n        if (parent_1 === container) {\n          visibleItems.push(item);\n        } else {\n          if (window.getComputedStyle(parent_1).display !== 'none') {\n            visibleItems.push(item);\n          }\n        }\n      }\n    });\n    return visibleItems;\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    var visibleItems = findVisibleItems(container);\n    visibleMenuItemsRef.current = visibleItems;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    \"aria-orientation\": \"vertical\",\n    className: classNames({\n      'rpv-core__menu': true,\n      'rpv-core__menu--rtl': isRtl\n    }),\n    role: \"menu\",\n    tabIndex: 0\n  }, children);\n};\n\nvar MenuDivider = function () {\n  return React__namespace.createElement(\"div\", {\n    \"aria-orientation\": \"horizontal\",\n    className: \"rpv-core__menu-divider\",\n    role: \"separator\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.ignoreDirection,\n      ignoreDirection = _b === void 0 ? false : _b,\n      _c = _a.size,\n      size = _c === void 0 ? 24 : _c;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n  var width = \"\".concat(size || 24, \"px\");\n  return React__namespace.createElement(\"svg\", {\n    \"aria-hidden\": \"true\",\n    className: classNames({\n      'rpv-core__icon': true,\n      'rpv-core__icon--rtl': isRtl\n    }),\n    focusable: \"false\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__menu-item': true,\n      'rpv-core__menu-item--disabled': isDisabled,\n      'rpv-core__menu-item--ltr': !isRtl,\n      'rpv-core__menu-item--rtl': isRtl\n    }),\n    role: \"menuitem\",\n    tabIndex: -1,\n    type: \"button\",\n    onClick: onClick\n  }, attrs), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-icon': true,\n      'rpv-core__menu-item-icon--ltr': !isRtl,\n      'rpv-core__menu-item-icon--rtl': isRtl\n    })\n  }, icon), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-label': true,\n      'rpv-core__menu-item-label--ltr': !isRtl,\n      'rpv-core__menu-item-label--rtl': isRtl\n    })\n  }, children), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__menu-item-check': true,\n      'rpv-core__menu-item-check--ltr': !isRtl,\n      'rpv-core__menu-item-check--rtl': isRtl\n    })\n  }, checked && React__namespace.createElement(CheckIcon, null)));\n};\n\nvar MinimalButton = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.ariaKeyShortcuts,\n      ariaKeyShortcuts = _c === void 0 ? '' : _c,\n      children = _a.children,\n      _d = _a.isDisabled,\n      isDisabled = _d === void 0 ? false : _d,\n      _e = _a.isSelected,\n      isSelected = _e === void 0 ? false : _e,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    \"aria-label\": ariaLabel\n  }, ariaKeyShortcuts && {\n    'aria-keyshortcuts': ariaKeyShortcuts\n  }, isDisabled && {\n    'aria-disabled': true\n  }, {\n    className: classNames({\n      'rpv-core__minimal-button': true,\n      'rpv-core__minimal-button--disabled': isDisabled,\n      'rpv-core__minimal-button--rtl': isRtl,\n      'rpv-core__minimal-button--selected': isSelected\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      testId = _a.testId,\n      onClick = _a.onClick;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n  return React__namespace.createElement(\"button\", __assign({\n    className: classNames({\n      'rpv-core__primary-button': true,\n      'rpv-core__primary-button--rtl': isRtl\n    }),\n    type: \"button\",\n    onClick: onClick\n  }, attrs), children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  return React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__progress-bar': true,\n      'rpv-core__progress-bar--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__progress-bar-progress\",\n    style: {\n      width: \"\".concat(progress, \"%\")\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__separator\"\n  });\n};\n\nvar Spinner = function (_a) {\n  var _b = _a.size,\n      size = _b === void 0 ? '4rem' : _b,\n      testId = _a.testId;\n\n  var _c = React__namespace.useState(false),\n      visible = _c[0],\n      setVisible = _c[1];\n\n  var attrs = testId ? {\n    'data-testid': testId\n  } : {};\n\n  var handleVisibilityChanged = function (params) {\n    setVisible(params.isVisible);\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: handleVisibilityChanged\n  });\n  return React__namespace.createElement(\"div\", __assign({}, attrs, {\n    className: classNames({\n      'rpv-core__spinner': true,\n      'rpv-core__spinner--animating': visible\n    }),\n    ref: containerRef,\n    style: {\n      height: size,\n      width: size\n    }\n  }));\n};\n\nvar Splitter = function (_a) {\n  var constrain = _a.constrain;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var resizerRef = React__namespace.useRef();\n  var leftSideRef = React__namespace.useRef();\n  var rightSideRef = React__namespace.useRef();\n  var xRef = React__namespace.useRef(0);\n  var yRef = React__namespace.useRef(0);\n  var leftWidthRef = React__namespace.useRef(0);\n  var resizerWidthRef = React__namespace.useRef(0);\n  var eventOptions = {\n    capture: true\n  };\n\n  var handleMouseMove = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    var resizerWidth = resizerWidthRef.current;\n    var dx = e.clientX - xRef.current;\n    var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n    var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n    var firstHalfPercentage = firstHalfSize * 100 / containerWidth;\n    resizerEle.classList.add('rpv-core__splitter--resizing');\n\n    if (constrain) {\n      var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n      var secondHalfPercentage = secondHalfSize * 100 / containerWidth;\n\n      if (!constrain({\n        firstHalfPercentage: firstHalfPercentage,\n        firstHalfSize: firstHalfSize,\n        secondHalfPercentage: secondHalfPercentage,\n        secondHalfSize: secondHalfSize\n      })) {\n        return;\n      }\n    }\n\n    leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n    document.body.classList.add('rpv-core__splitter-body--resizing');\n    leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n  };\n\n  var handleMouseUp = function (e) {\n    var resizerEle = resizerRef.current;\n    var leftSide = leftSideRef.current;\n    var rightSide = rightSideRef.current;\n\n    if (!resizerEle || !leftSide || !rightSide) {\n      return;\n    }\n\n    document.body.classList.remove('rpv-core__splitter-body--resizing');\n    resizerEle.classList.remove('rpv-core__splitter--resizing');\n    leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n    document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n    document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  var handleMouseDown = function (e) {\n    var leftSide = leftSideRef.current;\n\n    if (!leftSide) {\n      return;\n    }\n\n    xRef.current = e.clientX;\n    yRef.current = e.clientY;\n    leftWidthRef.current = leftSide.getBoundingClientRect().width;\n    document.addEventListener('mousemove', handleMouseMove, eventOptions);\n    document.addEventListener('mouseup', handleMouseUp, eventOptions);\n  };\n\n  React__namespace.useEffect(function () {\n    var resizerEle = resizerRef.current;\n\n    if (!resizerEle) {\n      return;\n    }\n\n    resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n    leftSideRef.current = resizerEle.previousElementSibling;\n    rightSideRef.current = resizerEle.nextElementSibling;\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: resizerRef,\n    className: \"rpv-core__splitter\",\n    onMouseDown: handleMouseDown\n  });\n};\n\nvar TextBox = function (_a) {\n  var _b = _a.ariaLabel,\n      ariaLabel = _b === void 0 ? '' : _b,\n      _c = _a.autoFocus,\n      autoFocus = _c === void 0 ? false : _c,\n      _d = _a.placeholder,\n      placeholder = _d === void 0 ? '' : _d,\n      testId = _a.testId,\n      _e = _a.type,\n      type = _e === void 0 ? 'text' : _e,\n      _f = _a.value,\n      value = _f === void 0 ? '' : _f,\n      onChange = _a.onChange,\n      _g = _a.onKeyDown,\n      onKeyDown = _g === void 0 ? function () {} : _g;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var textboxRef = React__namespace.useRef();\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var attrs = {\n    ref: textboxRef,\n    'data-testid': '',\n    'aria-label': ariaLabel,\n    className: classNames({\n      'rpv-core__textbox': true,\n      'rpv-core__textbox--rtl': isRtl\n    }),\n    placeholder: placeholder,\n    value: value,\n    onChange: function (e) {\n      return onChange(e.target.value);\n    },\n    onKeyDown: onKeyDown\n  };\n\n  if (testId) {\n    attrs['data-testid'] = testId;\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    if (autoFocus) {\n      var textboxEle = textboxRef.current;\n\n      if (textboxEle) {\n        var x = window.scrollX;\n        var y = window.scrollY;\n        textboxEle.focus();\n        window.scrollTo(x, y);\n      }\n    }\n  }, []);\n  return type === 'text' ? React__namespace.createElement(\"input\", __assign({\n    type: \"text\"\n  }, attrs)) : React__namespace.createElement(\"input\", __assign({\n    type: \"password\"\n  }, attrs));\n};\n\nvar Api;\n\n(function (Api) {\n  Api[Api[\"ExitFullScreen\"] = 0] = \"ExitFullScreen\";\n  Api[Api[\"FullScreenChange\"] = 1] = \"FullScreenChange\";\n  Api[Api[\"FullScreenElement\"] = 2] = \"FullScreenElement\";\n  Api[Api[\"FullScreenEnabled\"] = 3] = \"FullScreenEnabled\";\n  Api[Api[\"RequestFullScreen\"] = 4] = \"RequestFullScreen\";\n})(Api || (Api = {}));\n\nvar defaultVendor = {\n  ExitFullScreen: 'exitFullscreen',\n  FullScreenChange: 'fullscreenchange',\n  FullScreenElement: 'fullscreenElement',\n  FullScreenEnabled: 'fullscreenEnabled',\n  RequestFullScreen: 'requestFullscreen'\n};\nvar webkitVendor = {\n  ExitFullScreen: 'webkitExitFullscreen',\n  FullScreenChange: 'webkitfullscreenchange',\n  FullScreenElement: 'webkitFullscreenElement',\n  FullScreenEnabled: 'webkitFullscreenEnabled',\n  RequestFullScreen: 'webkitRequestFullscreen'\n};\nvar msVendor = {\n  ExitFullScreen: 'msExitFullscreen',\n  FullScreenChange: 'msFullscreenChange',\n  FullScreenElement: 'msFullscreenElement',\n  FullScreenEnabled: 'msFullscreenEnabled',\n  RequestFullScreen: 'msRequestFullscreen'\n};\nvar isBrowser = typeof window !== 'undefined';\nvar vendor = isBrowser ? Api.FullScreenEnabled in document && defaultVendor || webkitVendor.FullScreenEnabled in document && webkitVendor || msVendor.FullScreenEnabled in document && msVendor || defaultVendor : defaultVendor;\n\nvar isFullScreenEnabled = function () {\n  return isBrowser && vendor.FullScreenEnabled in document && document[vendor.FullScreenEnabled] === true;\n};\n\nvar addFullScreenChangeListener = function (handler) {\n  if (isBrowser) {\n    document.addEventListener(vendor.FullScreenChange, handler);\n  }\n};\n\nvar removeFullScreenChangeListener = function (handler) {\n  if (isBrowser) {\n    document.removeEventListener(vendor.FullScreenChange, handler);\n  }\n};\n\nvar exitFullScreen = function (element) {\n  return isBrowser ? element[vendor.ExitFullScreen]() : Promise.resolve({});\n};\n\nvar getFullScreenElement = function () {\n  return isBrowser ? document[vendor.FullScreenElement] : null;\n};\n\nvar requestFullScreen = function (element) {\n  if (isBrowser) {\n    element[vendor.RequestFullScreen]();\n  }\n};\n\nvar useDebounceCallback = function (callback, wait) {\n  var timeout = React__namespace.useRef();\n\n  var cleanup = function () {\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    return function () {\n      return cleanup();\n    };\n  }, []);\n  return React__namespace.useCallback(function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    cleanup();\n    timeout.current = setTimeout(function () {\n      callback.apply(void 0, args);\n    }, wait);\n  }, [callback, wait]);\n};\n\nvar useIsMounted = function () {\n  var isMountedRef = React__namespace.useRef(false);\n  React__namespace.useEffect(function () {\n    isMountedRef.current = true;\n    return function () {\n      isMountedRef.current = false;\n    };\n  }, []);\n  return isMountedRef;\n};\n\nvar usePrevious = function (value) {\n  var ref = React__namespace.useRef(value);\n  React__namespace.useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n};\n\nvar PageRenderStatus;\n\n(function (PageRenderStatus) {\n  PageRenderStatus[\"NotRenderedYet\"] = \"NotRenderedYet\";\n  PageRenderStatus[\"Rendering\"] = \"Rendering\";\n  PageRenderStatus[\"Rendered\"] = \"Rendered\";\n})(PageRenderStatus || (PageRenderStatus = {}));\n\nvar OUT_OF_RANGE_VISIBILITY = -9999;\n\nvar useRenderQueue = function (_a) {\n  var doc = _a.doc;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var initialPageVisibilities = React__namespace.useMemo(function () {\n    return Array(numPages).fill(null).map(function (_, pageIndex) {\n      return {\n        pageIndex: pageIndex,\n        renderStatus: PageRenderStatus.NotRenderedYet,\n        visibility: OUT_OF_RANGE_VISIBILITY\n      };\n    });\n  }, [docId]);\n  var latestRef = React__namespace.useRef({\n    currentRenderingPage: -1,\n    startRange: 0,\n    endRange: numPages - 1,\n    visibilities: initialPageVisibilities\n  });\n\n  var markNotRendered = function () {\n    for (var i = 0; i < numPages; i++) {\n      latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n    }\n  };\n\n  var markRendered = function (pageIndex) {\n    latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendered;\n  };\n\n  var markRendering = function (pageIndex) {\n    if (latestRef.current.currentRenderingPage !== -1 && latestRef.current.currentRenderingPage !== pageIndex && latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus === PageRenderStatus.Rendering) {\n      latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus = PageRenderStatus.NotRenderedYet;\n    }\n\n    latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendering;\n    latestRef.current.currentRenderingPage = pageIndex;\n  };\n\n  var setRange = function (startIndex, endIndex) {\n    latestRef.current.startRange = startIndex;\n    latestRef.current.endRange = endIndex;\n\n    for (var i = 0; i < numPages; i++) {\n      if (i < startIndex || i > endIndex) {\n        latestRef.current.visibilities[i].visibility = OUT_OF_RANGE_VISIBILITY;\n        latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n      }\n    }\n  };\n\n  var setOutOfRange = function (pageIndex) {\n    setVisibility(pageIndex, OUT_OF_RANGE_VISIBILITY);\n  };\n\n  var setVisibility = function (pageIndex, visibility) {\n    latestRef.current.visibilities[pageIndex].visibility = visibility;\n  };\n\n  var getHighestPriorityPage = function () {\n    var visiblePages = latestRef.current.visibilities.slice(latestRef.current.startRange, latestRef.current.endRange + 1).filter(function (item) {\n      return item.visibility > OUT_OF_RANGE_VISIBILITY;\n    });\n\n    if (!visiblePages.length) {\n      return -1;\n    }\n\n    var firstVisiblePage = visiblePages[0].pageIndex;\n    var lastVisiblePage = visiblePages[visiblePages.length - 1].pageIndex;\n    var numVisiblePages = visiblePages.length;\n\n    for (var i = 0; i < numVisiblePages; i++) {\n      if (visiblePages[i].renderStatus === PageRenderStatus.Rendering) {\n        return -1;\n      }\n\n      if (visiblePages[i].renderStatus === PageRenderStatus.NotRenderedYet) {\n        return visiblePages[i].pageIndex;\n      }\n    }\n\n    if (lastVisiblePage + 1 < numPages && latestRef.current.visibilities[lastVisiblePage + 1].renderStatus !== PageRenderStatus.Rendered) {\n      return lastVisiblePage + 1;\n    } else if (firstVisiblePage - 1 >= 0 && latestRef.current.visibilities[firstVisiblePage - 1].renderStatus !== PageRenderStatus.Rendered) {\n      return firstVisiblePage - 1;\n    }\n\n    return -1;\n  };\n\n  var isInRange = function (pageIndex) {\n    return pageIndex >= latestRef.current.startRange && pageIndex <= latestRef.current.endRange;\n  };\n\n  return {\n    getHighestPriorityPage: getHighestPriorityPage,\n    isInRange: isInRange,\n    markNotRendered: markNotRendered,\n    markRendered: markRendered,\n    markRendering: markRendering,\n    setOutOfRange: setOutOfRange,\n    setRange: setRange,\n    setVisibility: setVisibility\n  };\n};\n\nvar core = {\n  askingPassword: {\n    requirePasswordToOpen: \"This document requires a password to open\",\n    submit: \"Submit\"\n  },\n  wrongPassword: {\n    tryAgain: \"The password is wrong. Please try again\"\n  },\n  pageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n  core: core\n};\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n  l10n: DefaultLocalization,\n  setL10n: function () {}\n});\nvar id = 0;\n\nvar uniqueId = function () {\n  return id++;\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (!target) {\n      return;\n    }\n\n    var clickedTarget = e.target;\n\n    if (clickedTarget instanceof Element && clickedTarget.shadowRoot) {\n      var paths = e.composedPath();\n\n      if (paths.length > 0 && !target.contains(paths[0])) {\n        onClickOutside();\n      }\n    } else if (!target.contains(clickedTarget)) {\n      onClickOutside();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    var eventOptions = {\n      capture: true\n    };\n    document.addEventListener('click', clickHandler, eventOptions);\n    return function () {\n      document.removeEventListener('click', clickHandler, eventOptions);\n    };\n  }, []);\n};\n\nvar useEscape = function (handler) {\n  var keyUpHandler = function (e) {\n    if (e.key === 'Escape') {\n      handler();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React__namespace.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var contentRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useLockScroll();\n  useEscape(function () {\n    if (contentRef.current && closeOnEscape) {\n      onToggle();\n    }\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  useIsomorphicLayoutEffect(function () {\n    var contentEle = contentRef.current;\n\n    if (!contentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (contentEle.getBoundingClientRect().height >= maxHeight) {\n      contentEle.style.overflow = 'auto';\n      contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    \"aria-modal\": \"true\",\n    className: classNames({\n      'rpv-core__modal-body': true,\n      'rpv-core__modal-body--rtl': isRtl\n    }),\n    id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__modal-overlay\"\n  }, children);\n};\n\nexports.ToggleStatus = void 0;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n\nvar useToggle = function (isOpened) {\n  var _a = React__namespace.useState(isOpened),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case exports.ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case exports.ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case exports.ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n\n  var _c = useToggle(isOpened),\n      opened = _c.opened,\n      toggle = _c.toggle;\n\n  return React__namespace.createElement(React__namespace.Fragment, null, target && target(toggle, opened), opened && content(toggle));\n};\n\nvar Modal = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _b = _a.isOpened,\n      isOpened = _b === void 0 ? false : _b,\n      target = _a.target;\n  var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n\n  var renderTarget = function (toggle, opened) {\n    return React__namespace.createElement(\"div\", {\n      \"aria-expanded\": opened ? 'true' : 'false',\n      \"aria-haspopup\": \"dialog\",\n      \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix)\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__namespace.createElement(ModalOverlay, null, React__namespace.createElement(ModalBody, {\n      ariaControlsSuffix: controlsSuffix,\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__namespace.createElement(Portal, {\n    target: target ? renderTarget : null,\n    content: renderContent,\n    isOpened: isOpened\n  });\n};\n\nexports.Position = void 0;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case exports.Position.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case exports.Position.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case exports.Position.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case exports.Position.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case exports.Position.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case exports.Position.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  useIsomorphicLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n    contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  return React__namespace.createElement(\"div\", {\n    className: classNames((_b = {\n      'rpv-core__arrow': true,\n      'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n      'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n      'rpv-core__arrow--tr': position === exports.Position.TopRight,\n      'rpv-core__arrow--rt': position === exports.Position.RightTop,\n      'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n      'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n      'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n      'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n      'rpv-core__arrow--br': position === exports.Position.BottomRight,\n      'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n      'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n      'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n    }, _b[\"\".concat(customClassName)] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var contentRef = React__namespace.useRef();\n  var innerRef = React__namespace.useRef();\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  useIsomorphicLayoutEffect(function () {\n    var innerContentEle = innerRef.current;\n\n    if (!innerContentEle) {\n      return;\n    }\n\n    var maxHeight = document.body.clientHeight * 0.75;\n\n    if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n      innerContentEle.style.overflow = 'auto';\n      innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n    }\n  }, []);\n  var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    \"aria-describedby\": innerId,\n    className: classNames({\n      'rpv-core__popover-body': true,\n      'rpv-core__popover-body--rtl': isRtl\n    }),\n    id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"dialog\",\n    tabIndex: -1\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__popover-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    id: innerId,\n    ref: innerRef\n  }, children)));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  var containerRef = React__namespace.useRef();\n  useEscape(function () {\n    if (containerRef.current && closeOnEscape) {\n      onClose();\n    }\n  });\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__popover-overlay\",\n    ref: containerRef\n  });\n};\n\nvar Popover = function (_a) {\n  var _b = _a.ariaHasPopup,\n      ariaHasPopup = _b === void 0 ? 'dialog' : _b,\n      ariaControlsSuffix = _a.ariaControlsSuffix,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      _c = _a.lockScroll,\n      lockScroll = _c === void 0 ? true : _c,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _d = useToggle(false),\n      opened = _d.opened,\n      toggle = _d.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var controlsSuffix = React__namespace.useMemo(function () {\n    return ariaControlsSuffix || \"\".concat(uniqueId());\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-expanded\": opened ? 'true' : 'false',\n    \"aria-haspopup\": ariaHasPopup,\n    \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix)\n  }, target(toggle, opened), opened && React__namespace.createElement(React__namespace.Fragment, null, lockScroll && React__namespace.createElement(PopoverOverlay, {\n    closeOnEscape: closeOnEscape,\n    onClose: toggle\n  }), React__namespace.createElement(PopoverBody, {\n    ariaControlsSuffix: controlsSuffix,\n    closeOnClickOutside: closeOnClickOutside,\n    offset: offset,\n    position: position,\n    targetRef: targetRef,\n    onClose: toggle\n  }, content(toggle))));\n};\n\nvar TooltipBody = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      children = _a.children,\n      contentRef = _a.contentRef,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var anchorRef = React__namespace.useRef();\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__tooltip-body': true,\n      'rpv-core__tooltip-body--rtl': isRtl\n    }),\n    id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix),\n    ref: contentRef,\n    role: \"tooltip\"\n  }, React__namespace.createElement(Arrow, {\n    customClassName: \"rpv-core__tooltip-body-arrow\",\n    position: position\n  }), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var ariaControlsSuffix = _a.ariaControlsSuffix,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n\n  var _b = useToggle(false),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  var targetRef = React__namespace.useRef();\n  var contentRef = React__namespace.useRef();\n  var controlsSuffix = React__namespace.useMemo(function () {\n    return ariaControlsSuffix || \"\".concat(uniqueId());\n  }, []);\n  useEscape(function () {\n    if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n      close();\n    }\n  });\n\n  var open = function () {\n    toggle(exports.ToggleStatus.Open);\n  };\n\n  var close = function () {\n    toggle(exports.ToggleStatus.Close);\n  };\n\n  var onBlur = function (e) {\n    var shouldHideTooltip = e.relatedTarget instanceof HTMLElement && e.currentTarget.parentElement && e.currentTarget.parentElement.contains(e.relatedTarget);\n\n    if (shouldHideTooltip) {\n      if (contentRef.current) {\n        contentRef.current.style.display = 'none';\n      }\n    } else {\n      close();\n    }\n  };\n\n  return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    ref: targetRef,\n    \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix),\n    onBlur: onBlur,\n    onFocus: open,\n    onMouseEnter: open,\n    onMouseLeave: close\n  }, target), opened && React__namespace.createElement(TooltipBody, {\n    ariaControlsSuffix: controlsSuffix,\n    contentRef: contentRef,\n    offset: offset,\n    position: position,\n    targetRef: targetRef\n  }, content()));\n};\n\nfunction createStore(initialState) {\n  var state = initialState || {};\n  var listeners = {};\n\n  var update = function (key, data) {\n    var _a;\n\n    state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n    (listeners[key] || []).forEach(function (handler) {\n      return handler(state[key]);\n    });\n  };\n\n  var get = function (key) {\n    return state[key];\n  };\n\n  return {\n    subscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).concat(handler);\n    },\n    unsubscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).filter(function (f) {\n        return f !== handler;\n      });\n    },\n    update: function (key, data) {\n      update(key, data);\n    },\n    updateCurrentValue: function (key, updater) {\n      var currentValue = get(key);\n\n      if (currentValue !== undefined) {\n        update(key, updater(currentValue));\n      }\n    },\n    get: function (key) {\n      return get(key);\n    }\n  };\n}\n\nexports.FullScreenMode = void 0;\n\n(function (FullScreenMode) {\n  FullScreenMode[\"Normal\"] = \"Normal\";\n  FullScreenMode[\"Entering\"] = \"Entering\";\n  FullScreenMode[\"Entered\"] = \"Entered\";\n  FullScreenMode[\"EnteredCompletely\"] = \"EnteredCompletely\";\n  FullScreenMode[\"Exitting\"] = \"Exitting\";\n  FullScreenMode[\"Exited\"] = \"Exited\";\n})(exports.FullScreenMode || (exports.FullScreenMode = {}));\n\nexports.LayerRenderStatus = void 0;\n\n(function (LayerRenderStatus) {\n  LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n  LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.PageMode = void 0;\n\n(function (PageMode) {\n  PageMode[\"Attachments\"] = \"UseAttachments\";\n  PageMode[\"Bookmarks\"] = \"UseOutlines\";\n  PageMode[\"ContentGroup\"] = \"UseOC\";\n  PageMode[\"Default\"] = \"UserNone\";\n  PageMode[\"FullScreen\"] = \"FullScreen\";\n  PageMode[\"Thumbnails\"] = \"UseThumbs\";\n})(exports.PageMode || (exports.PageMode = {}));\n\nexports.PasswordStatus = void 0;\n\n(function (PasswordStatus) {\n  PasswordStatus[\"RequiredPassword\"] = \"RequiredPassword\";\n  PasswordStatus[\"WrongPassword\"] = \"WrongPassword\";\n})(exports.PasswordStatus || (exports.PasswordStatus = {}));\n\nexports.RotateDirection = void 0;\n\n(function (RotateDirection) {\n  RotateDirection[\"Backward\"] = \"Backward\";\n  RotateDirection[\"Forward\"] = \"Forward\";\n})(exports.RotateDirection || (exports.RotateDirection = {}));\n\nexports.ScrollMode = void 0;\n\n(function (ScrollMode) {\n  ScrollMode[\"Page\"] = \"Page\";\n  ScrollMode[\"Horizontal\"] = \"Horizontal\";\n  ScrollMode[\"Vertical\"] = \"Vertical\";\n  ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(exports.ScrollMode || (exports.ScrollMode = {}));\n\nexports.SpecialZoomLevel = void 0;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nexports.ViewMode = void 0;\n\n(function (ViewMode) {\n  ViewMode[\"DualPage\"] = \"DualPage\";\n  ViewMode[\"DualPageWithCover\"] = \"DualPageWithCover\";\n  ViewMode[\"SinglePage\"] = \"SinglePage\";\n})(exports.ViewMode || (exports.ViewMode = {}));\n\nvar chunk = function (arr, size) {\n  return arr.reduce(function (acc, e, i) {\n    return i % size ? acc[acc.length - 1].push(e) : acc.push([e]), acc;\n  }, []);\n};\n\nvar isMac = function () {\n  return typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false;\n};\n\nvar normalizeDestination = function (pageIndex, destArray) {\n  switch (destArray[1].name) {\n    case 'XYZ':\n      return {\n        bottomOffset: function (_, viewportHeight) {\n          return destArray[3] === null ? viewportHeight : destArray[3];\n        },\n        leftOffset: function (_, __) {\n          return destArray[2] === null ? 0 : destArray[2];\n        },\n        pageIndex: pageIndex,\n        scaleTo: destArray[4]\n      };\n\n    case 'Fit':\n    case 'FitB':\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageFit\n      };\n\n    case 'FitH':\n    case 'FitBH':\n      return {\n        bottomOffset: destArray[2],\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: exports.SpecialZoomLevel.PageWidth\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        leftOffset: 0,\n        pageIndex: pageIndex,\n        scaleTo: 1\n      };\n  }\n};\n\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\n\nvar generateRefKey = function (doc, outline) {\n  return \"\".concat(doc.loadingTask.docId, \"___\").concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\n};\n\nvar getPageIndex = function (doc, outline) {\n  var key = generateRefKey(doc, outline);\n  return pageOutlinesMap.has(key) ? pageOutlinesMap.get(key) : null;\n};\n\nvar cacheOutlineRef = function (doc, outline, pageIndex) {\n  pageOutlinesMap.set(generateRefKey(doc, outline), pageIndex);\n};\n\nvar clearPagesCache = function () {\n  pageOutlinesMap.clear();\n  pagesMap.clear();\n};\n\nvar getPage = function (doc, pageIndex) {\n  if (!doc) {\n    return Promise.reject('The document is not loaded yet');\n  }\n\n  var pageKey = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n  var page = pagesMap.get(pageKey);\n\n  if (page) {\n    return Promise.resolve(page);\n  }\n\n  return new Promise(function (resolve, _) {\n    doc.getPage(pageIndex + 1).then(function (page) {\n      pagesMap.set(pageKey, page);\n\n      if (page.ref) {\n        cacheOutlineRef(doc, page.ref, pageIndex);\n      }\n\n      resolve(page);\n    });\n  });\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      if ('object' === typeof destArray[0] && destArray[0] !== null) {\n        var outlineRef_1 = destArray[0];\n        var pageIndex = getPageIndex(doc, outlineRef_1);\n\n        if (pageIndex === null) {\n          doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n            cacheOutlineRef(doc, outlineRef_1, pageIndex);\n            getDestination(doc, dest).then(function (result) {\n              return res(result);\n            });\n          });\n        } else {\n          res(normalizeDestination(pageIndex, destArray));\n        }\n      } else {\n        var target = normalizeDestination(destArray[0], destArray);\n        res(target);\n      }\n    });\n  });\n};\n\nvar useRunOnce = function (cb, condition) {\n  var isCalledRef = React__namespace.useRef(false);\n  useIsomorphicLayoutEffect(function () {\n    if (condition && !isCalledRef.current) {\n      isCalledRef.current = true;\n      cb();\n    }\n  }, [cb, condition]);\n};\n\nvar useTrackResize = function (_a) {\n  var targetRef = _a.targetRef,\n      onResize = _a.onResize;\n  useIsomorphicLayoutEffect(function () {\n    var io = new ResizeObserver(function (entries) {\n      entries.forEach(function (entry) {\n        onResize(entry.target);\n      });\n    });\n    var container = targetRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n};\n\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + \"'?\" + '(\\\\d{2})?' + \"'?\");\n\nvar parse = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse(matches[2], 1, 12, 1) - 1;\n  var day = parse(matches[3], 1, 31, 1);\n  var hour = parse(matches[4], 0, 23, 0);\n  var minute = parse(matches[5], 0, 59, 0);\n  var second = parse(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse(matches[8], 0, 23, 0);\n  var offsetMinute = parse(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar getContents = function (annotation) {\n  return annotation.contentsObj ? annotation.contentsObj.str : annotation.contents || '';\n};\n\nvar getTitle = function (annotation) {\n  return annotation.titleObj ? annotation.titleObj.str : annotation.title || '';\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n  }\n\n  React__namespace.useLayoutEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!annotationEle) {\n      return;\n    }\n\n    var ele = annotationEle;\n    ele.style.zIndex += 1;\n    return function () {\n      ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: classNames({\n      'rpv-core__annotation-popup-wrapper': true,\n      'rpv-core__annotation-popup-wrapper--rtl': isRtl\n    }),\n    style: {\n      top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%'\n    }\n  }, title && React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__annotation-popup-title': true,\n      'rpv-core__annotation-popup-title--ltr': !isRtl,\n      'rpv-core__annotation-popup-title--rtl': isRtl\n    })\n  }, title), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-date\"\n  }, dateStr)), contents && React__namespace.createElement(\"div\", {\n    className: \"rpv-core__annotation-popup-content\"\n  }, contents.split('\\n').map(function (item, index) {\n    return React__namespace.createElement(React__namespace.Fragment, {\n      key: index\n    }, item, React__namespace.createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(false),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React__namespace.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(exports.ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(exports.ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType.Beveled:\n      case AnnotationBorderStyleType.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = \"\".concat(borderWidth, \"px\");\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\") : styles.borderWidth = '0';\n  }\n\n  return React__namespace.createElement(React__namespace.Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: \"\".concat(height, \"px\"),\n          left: \"\".concat(bound[0], \"px\"),\n          top: \"\".concat(bound[1], \"px\"),\n          transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n          transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n          width: \"\".concat(width, \"px\")\n        }, styles)\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"circle\", {\n      cy: height / 2,\n      fill: \"none\",\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar getFileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', getFileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var hasPopup = annotation.hasPopup === false && (!!title || !!contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(title || contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  useIsomorphicLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n    var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = \"\".concat(left, \"px\");\n    container.style.top = \"\".concat(top, \"px\");\n    container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n  }, []);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__namespace.createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n\n  if (hasQuadPoints) {\n    var annotations = annotation.quadPoints.map(function (quadPoint) {\n      return Object.assign({}, annotation, {\n        rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n        quadPoints: []\n      });\n    });\n    return React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) {\n      return React__namespace.createElement(Highlight, {\n        key: index,\n        annotation: ann,\n        childAnnotation: childAnnotation,\n        page: page,\n        viewport: viewport\n      });\n    }));\n  }\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__namespace.createElement(\"polyline\", {\n        key: index,\n        fill: \"none\",\n        stroke: \"transparent\",\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"line\", {\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar INVALID_PROTOCOL = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar HTML_ENTITIES = /&#(\\w+)(^\\w|;)?/g;\nvar CTRL_CHARS = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar URL_SCHEME = /^([^:]+):/gm;\n\nvar decodeHtmlEntities = function (str) {\n  return str.replace(HTML_ENTITIES, function (_, dec) {\n    return String.fromCharCode(dec);\n  });\n};\n\nvar sanitizeUrl = function (url, defaultUrl) {\n  if (defaultUrl === void 0) {\n    defaultUrl = 'about:blank';\n  }\n\n  var result = decodeHtmlEntities(url || '').replace(CTRL_CHARS, '').trim();\n\n  if (!result) {\n    return defaultUrl;\n  }\n\n  var firstChar = result[0];\n\n  if (firstChar === '.' || firstChar === '/') {\n    return result;\n  }\n\n  var parsedUrlScheme = result.match(URL_SCHEME);\n\n  if (!parsedUrlScheme) {\n    return result;\n  }\n\n  var scheme = parsedUrlScheme[0];\n  return INVALID_PROTOCOL.test(scheme) ? defaultUrl : result;\n};\n\nvar Link = function (_a) {\n  var _b;\n\n  var annotation = _a.annotation,\n      annotationContainerRef = _a.annotationContainerRef,\n      doc = _a.doc,\n      outlines = _a.outlines,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      scale = _a.scale,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation,\n      onJumpToDest = _a.onJumpToDest;\n  var elementRef = React__namespace.useRef();\n  var title = outlines && outlines.length && annotation.dest && typeof annotation.dest === 'string' ? (_b = outlines.find(function (item) {\n    return item.dest === annotation.dest;\n  })) === null || _b === void 0 ? void 0 : _b.title : '';\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var element = elementRef.current;\n      var annotationContainer = annotationContainerRef.current;\n\n      if (element && annotationContainer) {\n        var linkRect = element.getBoundingClientRect();\n        annotationContainer.style.setProperty('height', '100%');\n        annotationContainer.style.setProperty('width', '100%');\n        var annotationLayerRect = annotationContainer.getBoundingClientRect();\n        annotationContainer.style.removeProperty('height');\n        annotationContainer.style.removeProperty('width');\n        var leftOffset = (linkRect.left - annotationLayerRect.left) / scale;\n        var bottomOffset = (annotationLayerRect.bottom - linkRect.bottom + linkRect.height) / scale;\n        onJumpFromLinkAnnotation({\n          bottomOffset: bottomOffset,\n          label: title,\n          leftOffset: leftOffset,\n          pageIndex: pageIndex\n        });\n      }\n\n      onJumpToDest(target);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action || annotation.unsafeUrl);\n  var attrs = {};\n\n  if (annotation.url || annotation.unsafeUrl) {\n    var targetUrl = sanitizeUrl(annotation.url || annotation.unsafeUrl, '');\n\n    if (targetUrl) {\n      attrs = {\n        'data-target': 'external',\n        href: targetUrl,\n        rel: 'noopener noreferrer nofollow',\n        target: annotation.newWindow ? '_blank' : '',\n        title: targetUrl\n      };\n    } else {\n      isRenderable = false;\n    }\n  } else {\n    attrs = {\n      href: '',\n      'data-annotation-link': annotation.id,\n      onClick: link\n    };\n  }\n\n  if (title) {\n    attrs = Object.assign({}, attrs, {\n      title: title,\n      'aria-label': title\n    });\n  }\n\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--link\",\n      \"data-annotation-id\": annotation.id,\n      \"data-testid\": \"core__annotation--link-\".concat(annotation.id)\n    }), React__namespace.createElement(\"a\", __assign({\n      ref: elementRef\n    }, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polygon\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"polyline\", {\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__namespace.createElement(\"svg\", {\n      height: \"\".concat(height, \"px\"),\n      preserveAspectRatio: \"none\",\n      version: \"1.1\",\n      viewBox: \"0 0 \".concat(width, \" \").concat(height),\n      width: \"\".concat(width, \"px\")\n    }, React__namespace.createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: \"none\",\n      stroke: \"transparent\",\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\"\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M21.423 5.406L17.415 9.414\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14.587 6.585L18.607 2.565\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M5.405 21.424L9.413 17.416\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6.585 14.588L2.577 18.596\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18.602 21.419L14.595 17.412\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M17.419 14.58L21.428 18.589\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M2.582 5.399L6.588 9.406\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M9.421 6.581L5.412 2.572\"\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\"\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M6 4.5L6 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M18 4.5L18 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10 4.5L10 0.5\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M14 4.5L14 0.5\"\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M17.5 0.498L17.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M10.5 0.498L10.5 23.498\"\n  }), React__namespace.createElement(\"path\", {\n    d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\"\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__namespace.createElement(Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\"\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__namespace.createElement(\"div\", {\n      className: \"rpv-core__annotation-text-icon\"\n    }, name === 'check' && React__namespace.createElement(CheckIcon, null), name === 'comment' && React__namespace.createElement(CommentIcon, null), name === 'help' && React__namespace.createElement(HelpIcon, null), name === 'insert' && React__namespace.createElement(TriangleIcon, null), name === 'key' && React__namespace.createElement(KeyIcon, null), name === 'note' && React__namespace.createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === exports.AnnotationType.Popup && props.popup.opened && React__namespace.createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var hasPopup = annotation.hasPopup === false;\n  var title = getTitle(annotation);\n  var contents = getContents(annotation);\n  var isRenderable = !!(annotation.hasPopup || title || contents);\n  return React__namespace.createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: \"rpv-core__annotation rpv-core__annotation--underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayerBody = function (_a) {\n  var annotations = _a.annotations,\n      doc = _a.doc,\n      outlines = _a.outlines,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React__namespace.useRef();\n  var viewport = page.getViewport({\n    rotation: rotation,\n    scale: scale\n  });\n  var clonedViewPort = viewport.clone({\n    dontFlip: true\n  });\n  var filterAnnotations = annotations.filter(function (annotation) {\n    return !annotation.parentId;\n  });\n  useIsomorphicLayoutEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    plugins.forEach(function (plugin) {\n      if (plugin.onAnnotationLayerRender) {\n        plugin.onAnnotationLayerRender({\n          annotations: filterAnnotations,\n          container: container,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale\n        });\n      }\n    });\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__annotation-layer\",\n    \"data-testid\": \"core__annotation-layer-\".concat(pageIndex)\n  }, filterAnnotations.map(function (annotation) {\n    var childAnnotation = annotations.find(function (item) {\n      return item.parentId === annotation.id;\n    });\n\n    switch (annotation.annotationType) {\n      case exports.AnnotationType.Caret:\n        return React__namespace.createElement(Caret, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Circle:\n        return React__namespace.createElement(Circle, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FileAttachment:\n        return React__namespace.createElement(FileAttachment, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.FreeText:\n        return React__namespace.createElement(FreeText, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Highlight:\n        return React__namespace.createElement(Highlight, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Ink:\n        return React__namespace.createElement(Ink, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Line:\n        return React__namespace.createElement(Line, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Link:\n        return React__namespace.createElement(Link, {\n          key: annotation.id,\n          annotation: annotation,\n          annotationContainerRef: containerRef,\n          doc: doc,\n          outlines: outlines,\n          page: page,\n          pageIndex: pageIndex,\n          scale: scale,\n          viewport: clonedViewPort,\n          onExecuteNamedAction: onExecuteNamedAction,\n          onJumpFromLinkAnnotation: onJumpFromLinkAnnotation,\n          onJumpToDest: onJumpToDest\n        });\n\n      case exports.AnnotationType.Polygon:\n        return React__namespace.createElement(Polygon, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Polyline:\n        return React__namespace.createElement(Polyline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Popup:\n        return React__namespace.createElement(Popup, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Square:\n        return React__namespace.createElement(Square, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Squiggly:\n        return React__namespace.createElement(Squiggly, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Stamp:\n        return React__namespace.createElement(Stamp, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.StrikeOut:\n        return React__namespace.createElement(StrikeOut, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Text:\n        return React__namespace.createElement(Text, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case exports.AnnotationType.Underline:\n        return React__namespace.createElement(Underline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      default:\n        return React__namespace.createElement(React__namespace.Fragment, {\n          key: annotation.id\n        });\n    }\n  }));\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n  var isMounted = useIsMounted();\n\n  var _b = React__namespace.useState({\n    loading: true,\n    annotations: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React__namespace.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      if (isMounted.current) {\n        setStatus({\n          loading: false,\n          annotations: result\n        });\n      }\n    });\n  }, []);\n  return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      outlines = _a.outlines,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation,\n      onJumpToDest = _a.onJumpToDest;\n\n  var renderAnnotations = function (annotations) {\n    return React__namespace.createElement(AnnotationLayerBody, {\n      annotations: annotations,\n      doc: doc,\n      outlines: outlines,\n      page: page,\n      pageIndex: pageIndex,\n      plugins: plugins,\n      rotation: rotation,\n      scale: scale,\n      onExecuteNamedAction: onExecuteNamedAction,\n      onJumpFromLinkAnnotation: onJumpFromLinkAnnotation,\n      onJumpToDest: onJumpToDest\n    });\n  };\n\n  return React__namespace.createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  });\n};\n\nvar floatToRatio = function (x, limit) {\n  var _a, _b;\n\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  var y = 1 / x;\n\n  if (y > limit) {\n    return [1, limit];\n  }\n\n  if (Math.floor(y) === y) {\n    return [1, y];\n  }\n\n  var value = x > 1 ? y : x;\n  var a = 0;\n  var b = 1;\n  var c = 1;\n  var d = 1;\n\n  while (true) {\n    var numerator = a + c;\n    var denominator = b + d;\n\n    if (denominator > limit) {\n      break;\n    }\n\n    value <= numerator / denominator ? (_a = [numerator, denominator], c = _a[0], d = _a[1], _a) : (_b = [numerator, denominator], a = _b[0], b = _b[1], _b);\n  }\n\n  var middle = (a / b + c / d) / 2;\n  return value < middle ? value === x ? [a, b] : [b, a] : value === x ? [c, d] : [d, c];\n};\n\nvar roundToDivide = function (a, b) {\n  var remainder = a % b;\n  return remainder === 0 ? a : Math.floor(a - remainder);\n};\n\nvar MAX_CANVAS_SIZE = 4096 * 4096;\n\nvar CanvasLayer = function (_a) {\n  var canvasLayerRef = _a.canvasLayerRef,\n      height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onRenderCanvasCompleted = _a.onRenderCanvasCompleted;\n  var renderTask = React__namespace.useRef();\n  useIsomorphicLayoutEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasLayerRef.current;\n    canvasEle.removeAttribute('data-testid');\n    plugins.forEach(function (plugin) {\n      if (plugin.onCanvasLayerRender) {\n        plugin.onCanvasLayerRender({\n          ele: canvasEle,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    var outputScale = window.devicePixelRatio || 1;\n    var maxScale = Math.sqrt(MAX_CANVAS_SIZE / (viewport.width * viewport.height));\n    var shouldScaleByCSS = outputScale > maxScale;\n    shouldScaleByCSS ? canvasEle.style.transform = \"scale(1, 1)\" : canvasEle.style.removeProperty('transform');\n    var possibleScale = Math.min(maxScale, outputScale);\n\n    var _a = floatToRatio(possibleScale, 8),\n        x = _a[0],\n        y = _a[1];\n\n    canvasEle.width = roundToDivide(viewport.width * possibleScale, x);\n    canvasEle.height = roundToDivide(viewport.height * possibleScale, x);\n    canvasEle.style.width = \"\".concat(roundToDivide(viewport.width, y), \"px\");\n    canvasEle.style.height = \"\".concat(roundToDivide(viewport.height, y), \"px\");\n    canvasEle.hidden = true;\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var transform = shouldScaleByCSS || outputScale !== 1 ? [possibleScale, 0, 0, possibleScale, 0, 0] : null;\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      transform: transform,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      canvasEle.hidden = false;\n      canvasEle.setAttribute('data-testid', \"core__canvas-layer-\".concat(pageIndex));\n      plugins.forEach(function (plugin) {\n        if (plugin.onCanvasLayerRender) {\n          plugin.onCanvasLayerRender({\n            ele: canvasEle,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            status: exports.LayerRenderStatus.DidRender\n          });\n        }\n      });\n      onRenderCanvasCompleted();\n    }, function () {\n      onRenderCanvasCompleted();\n    });\n    return function () {\n      if (canvasEle) {\n        canvasEle.width = 0;\n        canvasEle.height = 0;\n      }\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__canvas-layer\",\n    style: {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    }\n  }, React__namespace.createElement(\"canvas\", {\n    ref: canvasLayerRef\n  }));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var containerRef = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = \"\".concat(height, \"px\");\n        svg.style.width = \"\".concat(width, \"px\");\n        containerEle.appendChild(svg);\n      });\n    });\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__svg-layer\",\n    ref: containerRef\n  });\n};\n\nvar TextLayer = function (_a) {\n  var containerRef = _a.containerRef,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onRenderTextCompleted = _a.onRenderTextCompleted;\n  var renderTask = React__namespace.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = [].slice.call(containerEle.querySelectorAll('.rpv-core__text-layer-text'));\n    spans.forEach(function (span) {\n      return containerEle.removeChild(span);\n    });\n    var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n    breaks.forEach(function (br) {\n      return containerEle.removeChild(br);\n    });\n  };\n\n  useIsomorphicLayoutEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.removeAttribute('data-testid');\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    plugins.forEach(function (plugin) {\n      if (plugin.onTextLayerRender) {\n        plugin.onTextLayerRender({\n          ele: containerEle,\n          pageIndex: pageIndex,\n          scale: scale,\n          status: exports.LayerRenderStatus.PreRender\n        });\n      }\n    });\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJsApi__namespace.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        textContentSource: textContent,\n        viewport: viewport\n      });\n      renderTask.current.promise.then(function () {\n        containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n        var spans = [].slice.call(containerEle.children);\n        spans.forEach(function (span) {\n          if (!span.classList.contains('rpv-core__text-layer-text--not')) {\n            span.classList.add('rpv-core__text-layer-text');\n          }\n        });\n        plugins.forEach(function (plugin) {\n          if (plugin.onTextLayerRender) {\n            plugin.onTextLayerRender({\n              ele: containerEle,\n              pageIndex: pageIndex,\n              scale: scale,\n              status: exports.LayerRenderStatus.DidRender\n            });\n          }\n        });\n        onRenderTextCompleted();\n      }, function () {\n        containerEle.removeAttribute('data-testid');\n        onRenderTextCompleted();\n      });\n    });\n    return function () {\n      var _a;\n\n      empty();\n      (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    };\n  }, []);\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__text-layer\",\n    ref: containerRef\n  });\n};\n\nvar PageLayer = function (_a) {\n  var doc = _a.doc,\n      measureRef = _a.measureRef,\n      outlines = _a.outlines,\n      pageIndex = _a.pageIndex,\n      pageRotation = _a.pageRotation,\n      pageSize = _a.pageSize,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      renderQueueKey = _a.renderQueueKey,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      shouldRender = _a.shouldRender,\n      viewMode = _a.viewMode,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation,\n      onJumpToDest = _a.onJumpToDest,\n      onRenderCompleted = _a.onRenderCompleted,\n      onRotatePage = _a.onRotatePage;\n  var isMounted = useIsMounted();\n\n  var _b = React__namespace.useState(null),\n      page = _b[0],\n      setPage = _b[1];\n\n  var _c = React__namespace.useState(false),\n      canvasLayerRendered = _c[0],\n      setCanvasLayerRendered = _c[1];\n\n  var _d = React__namespace.useState(false),\n      textLayerRendered = _d[0],\n      setTextLayerRendered = _d[1];\n\n  var canvasLayerRef = React__namespace.useRef();\n  var textLayerRef = React__namespace.useRef();\n  var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n  var scaledWidth = pageSize.pageWidth * scale;\n  var scaledHeight = pageSize.pageHeight * scale;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n  var rotationValue = (pageSize.rotation + rotation + pageRotation) % 360;\n  var renderQueueKeyRef = React__namespace.useRef(0);\n\n  var determinePageInstance = function () {\n    getPage(doc, pageIndex).then(function (pdfPage) {\n      if (isMounted.current) {\n        renderQueueKeyRef.current = renderQueueKey;\n        setPage(pdfPage);\n      }\n    });\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__namespace.createElement(React__namespace.Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n\n  var handleRenderCanvasCompleted = function () {\n    if (isMounted.current) {\n      setCanvasLayerRendered(true);\n    }\n  };\n\n  var handleRenderTextCompleted = function () {\n    if (isMounted.current) {\n      setTextLayerRendered(true);\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    setPage(null);\n    setCanvasLayerRendered(false);\n    setTextLayerRendered(false);\n  }, [pageRotation, rotation, scale]);\n  React__namespace.useEffect(function () {\n    if (shouldRender && isMounted.current && !page) {\n      determinePageInstance();\n    }\n  }, [shouldRender, page]);\n  React__namespace.useEffect(function () {\n    if (canvasLayerRendered && textLayerRendered) {\n      if (renderQueueKey !== renderQueueKeyRef.current) {\n        setPage(null);\n        setCanvasLayerRendered(false);\n        setTextLayerRendered(false);\n      } else {\n        onRenderCompleted(pageIndex);\n      }\n    }\n  }, [canvasLayerRendered, textLayerRendered]);\n  return React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__page-layer': true,\n      'rpv-core__page-layer--dual': viewMode === exports.ViewMode.DualPage,\n      'rpv-core__page-layer--dual-cover': viewMode === exports.ViewMode.DualPageWithCover,\n      'rpv-core__page-layer--single': viewMode === exports.ViewMode.SinglePage\n    }),\n    \"data-testid\": \"core__page-layer-\".concat(pageIndex),\n    ref: measureRef,\n    style: {\n      height: \"\".concat(h, \"px\"),\n      width: \"\".concat(w, \"px\")\n    }\n  }, !page ? React__namespace.createElement(Spinner, {\n    testId: \"core__page-layer-loading-\".concat(pageIndex)\n  }) : React__namespace.createElement(React__namespace.Fragment, null, renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__namespace.createElement(AnnotationLayer, {\n        doc: doc,\n        outlines: outlines,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpFromLinkAnnotation: onJumpFromLinkAnnotation,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__namespace.createElement(CanvasLayer, {\n        canvasLayerRef: canvasLayerRef,\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        width: w,\n        onRenderCanvasCompleted: handleRenderCanvasCompleted\n      })\n    },\n    canvasLayerRendered: canvasLayerRendered,\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotationValue,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__namespace.createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationValue,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__namespace.createElement(TextLayer, {\n        containerRef: textLayerRef,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationValue,\n        scale: scale,\n        onRenderTextCompleted: handleRenderTextCompleted\n      })\n    },\n    textLayerRendered: textLayerRendered,\n    width: w,\n    markRendered: onRenderCompleted,\n    onRotatePage: function (direction) {\n      return onRotatePage(pageIndex, direction);\n    }\n  }), plugins.map(function (plugin, idx) {\n    return plugin.renderPageLayer ? React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    }, plugin.renderPageLayer({\n      canvasLayerRef: canvasLayerRef,\n      canvasLayerRendered: canvasLayerRendered,\n      doc: doc,\n      height: h,\n      pageIndex: pageIndex,\n      rotation: rotationValue,\n      scale: scale,\n      textLayerRef: textLayerRef,\n      textLayerRendered: textLayerRendered,\n      width: w\n    })) : React__namespace.createElement(React__namespace.Fragment, {\n      key: idx\n    });\n  })));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar rectReducer = function (state, action) {\n  var rect = action.rect;\n  return state.height !== rect.height || state.width !== rect.width ? rect : state;\n};\n\nvar useMeasureRect = function (_a) {\n  var elementRef = _a.elementRef;\n\n  var _b = React__namespace.useState(elementRef.current),\n      element = _b[0],\n      setElement = _b[1];\n\n  var initializedRectRef = React__namespace.useRef(false);\n\n  var _c = React__namespace.useReducer(rectReducer, {\n    height: 0,\n    width: 0\n  }),\n      rect = _c[0],\n      dispatch = _c[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (elementRef.current !== element) {\n      setElement(elementRef.current);\n    }\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (element && !initializedRectRef.current) {\n      initializedRectRef.current = true;\n\n      var _a = element.getBoundingClientRect(),\n          height = _a.height,\n          width = _a.width;\n\n      dispatch({\n        rect: {\n          height: height,\n          width: width\n        }\n      });\n    }\n  }, [element]);\n  React__namespace.useEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    var tracker = new ResizeObserver(function (entries, __) {\n      entries.forEach(function (entry) {\n        if (entry.target === element) {\n          var _a = entry.contentRect,\n              height = _a.height,\n              width = _a.width;\n          dispatch({\n            rect: {\n              height: height,\n              width: width\n            }\n          });\n        }\n      });\n    });\n    tracker.observe(element);\n    return function () {\n      tracker.unobserve(element);\n    };\n  }, [element]);\n  return rect;\n};\n\nvar ScrollDirection;\n\n(function (ScrollDirection) {\n  ScrollDirection[\"Horizontal\"] = \"Horizontal\";\n  ScrollDirection[\"Vertical\"] = \"Vertical\";\n  ScrollDirection[\"Both\"] = \"Both\";\n})(ScrollDirection || (ScrollDirection = {}));\n\nvar easeOutQuart = function (t) {\n  return 1 - Math.pow(1 - t, 4);\n};\n\nvar EPS = 0.0001;\n\nvar smoothScroll = function (ele, scrollDirection, targetPosition, duration, easing, onReachTarget) {\n  if (easing === void 0) {\n    easing = function (t) {\n      return t;\n    };\n  }\n\n  if (onReachTarget === void 0) {\n    onReachTarget = function () {};\n  }\n\n  var top = 0;\n  var left = 0;\n  var reachTarget = false;\n\n  switch (scrollDirection) {\n    case ScrollDirection.Horizontal:\n      left = ele.scrollLeft;\n      top = 0;\n\n    case ScrollDirection.Both:\n      left = ele.scrollLeft;\n      top = ele.scrollTop;\n      break;\n\n    case ScrollDirection.Vertical:\n    default:\n      left = 0;\n      top = ele.scrollTop;\n      break;\n  }\n\n  var markTargetReached = function () {\n    if (!reachTarget) {\n      reachTarget = true;\n      ele.scrollLeft = targetPosition.left;\n      ele.scrollTop = targetPosition.top;\n      onReachTarget();\n    }\n  };\n\n  if (Math.abs(top - targetPosition.top) <= EPS && scrollDirection === ScrollDirection.Vertical) {\n    markTargetReached();\n    return;\n  }\n\n  if (Math.abs(left - targetPosition.left) <= EPS && scrollDirection === ScrollDirection.Horizontal) {\n    markTargetReached();\n    return;\n  }\n\n  var startTime = -1;\n  var requestId;\n  var offset = {\n    left: left - targetPosition.left,\n    top: top - targetPosition.top\n  };\n\n  var loop = function (currentTime) {\n    if (startTime === -1) {\n      startTime = currentTime;\n    }\n\n    var time = currentTime - startTime;\n    var percent = Math.min(time / duration, 1);\n    var easedPercent = easing(percent);\n    var updatePosition = {\n      left: left - offset.left * easedPercent,\n      top: top - offset.top * easedPercent\n    };\n\n    switch (scrollDirection) {\n      case ScrollDirection.Horizontal:\n        ele.scrollLeft = updatePosition.left;\n        break;\n\n      case ScrollDirection.Both:\n        ele.scrollLeft = updatePosition.left;\n        ele.scrollTop = updatePosition.top;\n        break;\n\n      case ScrollDirection.Vertical:\n      default:\n        ele.scrollTop = updatePosition.top;\n        break;\n    }\n\n    if (Math.abs(updatePosition.top - targetPosition.top) <= EPS && Math.abs(updatePosition.left - targetPosition.left) <= EPS && !reachTarget) {\n      window.cancelAnimationFrame(requestId);\n      markTargetReached();\n    }\n\n    if (time < duration) {\n      requestId = window.requestAnimationFrame(loop);\n    } else {\n      window.cancelAnimationFrame(requestId);\n    }\n  };\n\n  requestId = window.requestAnimationFrame(loop);\n};\n\nvar ZERO_OFFSET$6 = {\n  left: 0,\n  top: 0\n};\nvar SCROLL_EVENT_OPTIONS = {\n  capture: false,\n  passive: true\n};\nvar SCROLL_DURATION = 400;\n\nvar useScroll = function (_a) {\n  var elementRef = _a.elementRef,\n      enableSmoothScroll = _a.enableSmoothScroll,\n      isRtl = _a.isRtl,\n      scrollDirection = _a.scrollDirection,\n      onSmoothScroll = _a.onSmoothScroll;\n\n  var _b = React__namespace.useState(ZERO_OFFSET$6),\n      scrollOffset = _b[0],\n      setScrollOffset = _b[1];\n\n  var _c = React__namespace.useState(elementRef.current),\n      element = _c[0],\n      setElement = _c[1];\n\n  var factor = isRtl ? -1 : 1;\n  var latestRef = React__namespace.useRef(scrollDirection);\n  latestRef.current = scrollDirection;\n  var latestOffsetRef = React__namespace.useRef(ZERO_OFFSET$6);\n  var isSmoothScrollingDoneRef = React__namespace.useRef(true);\n  var handleSmoothScrollingComplete = React__namespace.useCallback(function () {\n    isSmoothScrollingDoneRef.current = true;\n\n    if (enableSmoothScroll) {\n      setScrollOffset(latestOffsetRef.current);\n    }\n\n    onSmoothScroll(false);\n  }, []);\n  var handleScroll = React__namespace.useCallback(function () {\n    if (!element) {\n      return;\n    }\n\n    switch (latestRef.current) {\n      case ScrollDirection.Horizontal:\n        latestOffsetRef.current = {\n          left: factor * element.scrollLeft,\n          top: 0\n        };\n        break;\n\n      case ScrollDirection.Both:\n        latestOffsetRef.current = {\n          left: factor * element.scrollLeft,\n          top: element.scrollTop\n        };\n        break;\n\n      case ScrollDirection.Vertical:\n      default:\n        latestOffsetRef.current = {\n          left: 0,\n          top: element.scrollTop\n        };\n        break;\n    }\n\n    if (!enableSmoothScroll || isSmoothScrollingDoneRef.current) {\n      setScrollOffset(latestOffsetRef.current);\n    }\n  }, [element]);\n  useIsomorphicLayoutEffect(function () {\n    setElement(elementRef.current);\n  });\n  useIsomorphicLayoutEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    element.addEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n    return function () {\n      element.removeEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n    };\n  }, [element]);\n  var scrollTo = React__namespace.useCallback(function (targetPosition, withSmoothScroll) {\n    var ele = elementRef.current;\n\n    if (!ele) {\n      return Promise.resolve();\n    }\n\n    var updatePosition = {\n      left: 0,\n      top: 0\n    };\n\n    switch (latestRef.current) {\n      case ScrollDirection.Horizontal:\n        updatePosition.left = factor * targetPosition.left;\n        break;\n\n      case ScrollDirection.Both:\n        updatePosition.left = factor * targetPosition.left;\n        updatePosition.top = targetPosition.top;\n        break;\n\n      case ScrollDirection.Vertical:\n      default:\n        updatePosition.top = targetPosition.top;\n        break;\n    }\n\n    if (withSmoothScroll) {\n      isSmoothScrollingDoneRef.current = false;\n      onSmoothScroll(true);\n      return new Promise(function (resolve, _) {\n        smoothScroll(ele, latestRef.current, updatePosition, SCROLL_DURATION, easeOutQuart, function () {\n          handleSmoothScrollingComplete();\n          resolve();\n        });\n      });\n    }\n\n    return new Promise(function (resolve, _) {\n      switch (latestRef.current) {\n        case ScrollDirection.Horizontal:\n          ele.scrollLeft = updatePosition.left;\n          break;\n\n        case ScrollDirection.Both:\n          ele.scrollLeft = updatePosition.left;\n          ele.scrollTop = updatePosition.top;\n          break;\n\n        case ScrollDirection.Vertical:\n        default:\n          ele.scrollTop = updatePosition.top;\n          break;\n      }\n\n      resolve();\n    });\n  }, [elementRef]);\n  return {\n    scrollOffset: scrollOffset,\n    scrollTo: scrollTo\n  };\n};\n\nvar clamp = function (min, max, value) {\n  return Math.max(min, Math.min(value, max));\n};\n\nvar indexOfMax = function (arr) {\n  return arr.reduce(function (prev, curr, i, a) {\n    return curr > a[prev] ? i : prev;\n  }, 0);\n};\n\nvar buildContainerStyles = function (totalSize, scrollMode) {\n  switch (scrollMode) {\n    case exports.ScrollMode.Horizontal:\n      return {\n        position: 'relative',\n        height: '100%',\n        width: \"\".concat(totalSize.width, \"px\")\n      };\n\n    case exports.ScrollMode.Vertical:\n    default:\n      return {\n        position: 'relative',\n        height: \"\".concat(totalSize.height, \"px\"),\n        width: '100%'\n      };\n  }\n};\n\nvar buildItemContainerStyles = function (item, parentRect, scrollMode) {\n  return scrollMode !== exports.ScrollMode.Page ? {} : {\n    height: \"\".concat(parentRect.height, \"px\"),\n    width: '100%',\n    position: 'absolute',\n    top: 0,\n    transform: \"translateY(\".concat(item.start.top, \"px)\")\n  };\n};\n\nvar hasDifferentSizes = function (sizes) {\n  var numberOfItems = sizes.length;\n\n  if (numberOfItems === 1) {\n    return false;\n  }\n\n  for (var i = 1; i < numberOfItems; i++) {\n    if (sizes[i].height !== sizes[0].height || sizes[i].width !== sizes[0].width) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar getMinWidthOfCover = function (sizes, viewMode) {\n  if (viewMode !== exports.ViewMode.DualPageWithCover) {\n    return 0;\n  }\n\n  if (!hasDifferentSizes(sizes)) {\n    return 2 * sizes[0].width;\n  }\n\n  var chunkWidths = chunk(sizes.slice(1), 2).map(function (eachChunk) {\n    return eachChunk.length === 2 ? eachChunk[0].width + eachChunk[1].width : eachChunk[0].width;\n  });\n  var widths = [sizes[0].width].concat(chunkWidths);\n  return Math.max.apply(Math, widths);\n};\n\nvar buildItemStyles = function (item, isRtl, sizes, viewMode, scrollMode) {\n  var _a, _b, _c, _d, _e, _f, _g;\n\n  var sideProperty = isRtl ? 'right' : 'left';\n  var factor = isRtl ? -1 : 1;\n  var numberOfItems = sizes.length;\n  var left = item.start.left * factor;\n  var _h = item.size,\n      height = _h.height,\n      width = _h.width;\n\n  if (viewMode === exports.ViewMode.DualPageWithCover) {\n    var transformTop = scrollMode === exports.ScrollMode.Page ? 0 : item.start.top;\n\n    if (item.index === 0 || numberOfItems % 2 === 0 && item.index === numberOfItems - 1) {\n      return _a = {\n        height: \"\".concat(height, \"px\"),\n        minWidth: \"\".concat(getMinWidthOfCover(sizes, viewMode), \"px\"),\n        width: '100%'\n      }, _a[sideProperty] = 0, _a.position = 'absolute', _a.top = 0, _a.transform = \"translate(\".concat(left, \"px, \").concat(transformTop, \"px)\"), _a;\n    }\n\n    return _b = {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    }, _b[sideProperty] = 0, _b.position = 'absolute', _b.top = 0, _b.transform = \"translate(\".concat(left, \"px, \").concat(transformTop, \"px)\"), _b;\n  }\n\n  if (viewMode === exports.ViewMode.DualPage) {\n    return _c = {\n      height: \"\".concat(height, \"px\"),\n      width: \"\".concat(width, \"px\")\n    }, _c[sideProperty] = 0, _c.position = 'absolute', _c.top = 0, _c.transform = \"translate(\".concat(left, \"px, \").concat(scrollMode === exports.ScrollMode.Page ? 0 : item.start.top, \"px)\"), _c;\n  }\n\n  switch (scrollMode) {\n    case exports.ScrollMode.Horizontal:\n      return _d = {\n        height: '100%',\n        width: \"\".concat(width, \"px\")\n      }, _d[sideProperty] = 0, _d.position = 'absolute', _d.top = 0, _d.transform = \"translateX(\".concat(left, \"px)\"), _d;\n\n    case exports.ScrollMode.Page:\n      return _e = {\n        height: \"\".concat(height, \"px\"),\n        width: \"\".concat(width, \"px\")\n      }, _e[sideProperty] = 0, _e.position = 'absolute', _e.top = 0, _e;\n\n    case exports.ScrollMode.Wrapped:\n      return _f = {\n        height: \"\".concat(height, \"px\"),\n        width: \"\".concat(width, \"px\")\n      }, _f[sideProperty] = 0, _f.position = 'absolute', _f.top = 0, _f.transform = \"translate(\".concat(left, \"px, \").concat(item.start.top, \"px)\"), _f;\n\n    case exports.ScrollMode.Vertical:\n    default:\n      return _g = {\n        height: \"\".concat(height, \"px\"),\n        width: '100%'\n      }, _g[sideProperty] = 0, _g.position = 'absolute', _g.top = 0, _g.transform = \"translateY(\".concat(item.start.top, \"px)\"), _g;\n  }\n};\n\nvar findNearest = function (low, high, value, getItemValue) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getItemValue(middle);\n\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n\n  return low > 0 ? low - 1 : 0;\n};\n\nvar calculateRange = function (scrollDirection, measurements, outerSize, scrollOffset) {\n  var currentOffset = 0;\n\n  switch (scrollDirection) {\n    case ScrollDirection.Horizontal:\n      currentOffset = scrollOffset.left;\n      break;\n\n    case ScrollDirection.Vertical:\n    default:\n      currentOffset = scrollOffset.top;\n      break;\n  }\n\n  var size = measurements.length - 1;\n\n  var getOffset = function (index) {\n    switch (scrollDirection) {\n      case ScrollDirection.Horizontal:\n        return measurements[index].start.left;\n\n      case ScrollDirection.Both:\n      case ScrollDirection.Vertical:\n      default:\n        return measurements[index].start.top;\n    }\n  };\n\n  var start = findNearest(0, size, currentOffset, getOffset);\n\n  if (scrollDirection === ScrollDirection.Both) {\n    var startTop = measurements[start].start.top;\n\n    while (start - 1 >= 0 && measurements[start - 1].start.top === startTop && measurements[start - 1].start.left >= scrollOffset.left) {\n      start--;\n    }\n  }\n\n  var end = start;\n\n  while (end <= size) {\n    var topLeftCorner = {\n      top: measurements[end].start.top - scrollOffset.top,\n      left: measurements[end].start.left - scrollOffset.left\n    };\n    var visibleSize = {\n      height: outerSize.height - topLeftCorner.top,\n      width: outerSize.width - topLeftCorner.left\n    };\n\n    if (scrollDirection === ScrollDirection.Horizontal && visibleSize.width < 0) {\n      break;\n    }\n\n    if (scrollDirection === ScrollDirection.Vertical && visibleSize.height < 0) {\n      break;\n    }\n\n    if (scrollDirection === ScrollDirection.Both && (visibleSize.width < 0 || visibleSize.height < 0)) {\n      break;\n    }\n\n    end++;\n  }\n\n  return {\n    start: start,\n    end: end\n  };\n};\n\nvar ZERO_OFFSET$5 = {\n  left: 0,\n  top: 0\n};\n\nvar measure = function (numberOfItems, parentRect, sizes, scrollMode) {\n  var measurements = [];\n  var totalWidth = 0;\n  var firstOfRow = {\n    left: 0,\n    top: 0\n  };\n  var maxHeight = 0;\n  var start = ZERO_OFFSET$5;\n\n  for (var i = 0; i < numberOfItems; i++) {\n    var size = sizes[i];\n\n    if (i === 0) {\n      totalWidth = size.width;\n      firstOfRow = {\n        left: 0,\n        top: 0\n      };\n      maxHeight = size.height;\n    } else {\n      switch (scrollMode) {\n        case exports.ScrollMode.Wrapped:\n          totalWidth += size.width;\n\n          if (totalWidth < parentRect.width) {\n            start = {\n              left: measurements[i - 1].end.left,\n              top: firstOfRow.top\n            };\n            maxHeight = Math.max(maxHeight, size.height);\n          } else {\n            totalWidth = size.width;\n            start = {\n              left: firstOfRow.left,\n              top: firstOfRow.top + maxHeight\n            };\n            firstOfRow = {\n              left: start.left,\n              top: start.top\n            };\n            maxHeight = size.height;\n          }\n\n          break;\n\n        case exports.ScrollMode.Horizontal:\n        case exports.ScrollMode.Vertical:\n        default:\n          start = measurements[i - 1].end;\n          break;\n      }\n    }\n\n    var end = {\n      left: start.left + size.width,\n      top: start.top + size.height\n    };\n    measurements[i] = {\n      index: i,\n      start: start,\n      size: size,\n      end: end,\n      visibility: -1\n    };\n  }\n\n  return measurements;\n};\n\nvar ZERO_OFFSET$4 = {\n  left: 0,\n  top: 0\n};\n\nvar measureDualPage = function (numberOfItems, parentRect, sizes, scrollMode) {\n  var measurements = [];\n  var top = 0;\n  var maxHeight = 0;\n  var start = ZERO_OFFSET$4;\n\n  for (var i = 0; i < numberOfItems; i++) {\n    var size = {\n      height: scrollMode === exports.ScrollMode.Page ? Math.max(parentRect.height, sizes[i].height) : sizes[i].height,\n      width: Math.max(parentRect.width / 2, sizes[i].width)\n    };\n\n    if (scrollMode === exports.ScrollMode.Page) {\n      start = {\n        left: i % 2 === 0 ? 0 : size.width,\n        top: Math.floor(i / 2) * size.height\n      };\n    } else {\n      if (i % 2 === 0) {\n        top = top + maxHeight;\n        start = {\n          left: 0,\n          top: top\n        };\n        maxHeight = i === numberOfItems - 1 ? sizes[i].height : Math.max(sizes[i].height, sizes[i + 1].height);\n      } else {\n        start = {\n          left: measurements[i - 1].end.left,\n          top: top\n        };\n      }\n    }\n\n    var end = {\n      left: start.left + size.width,\n      top: start.top + size.height\n    };\n    measurements[i] = {\n      index: i,\n      start: start,\n      size: size,\n      end: end,\n      visibility: -1\n    };\n  }\n\n  return measurements;\n};\n\nvar ZERO_OFFSET$3 = {\n  left: 0,\n  top: 0\n};\n\nvar measureDualPageWithCover = function (numberOfItems, parentRect, sizes, scrollMode) {\n  var measurements = [];\n  var top = 0;\n  var maxHeight = 0;\n  var start = ZERO_OFFSET$3;\n\n  for (var i = 0; i < numberOfItems; i++) {\n    var size = i === 0 ? {\n      height: scrollMode === exports.ScrollMode.Page ? Math.max(parentRect.height, sizes[i].height) : sizes[i].height,\n      width: scrollMode === exports.ScrollMode.Page ? Math.max(parentRect.width, sizes[i].width) : sizes[i].width\n    } : {\n      height: scrollMode === exports.ScrollMode.Page ? Math.max(parentRect.height, sizes[i].height) : sizes[i].height,\n      width: Math.max(parentRect.width / 2, sizes[i].width)\n    };\n\n    if (scrollMode === exports.ScrollMode.Page) {\n      start = i === 0 ? ZERO_OFFSET$3 : {\n        left: i % 2 === 0 ? size.width : 0,\n        top: Math.floor((i - 1) / 2) * size.height + measurements[0].end.top\n      };\n    } else {\n      if (i === 0) {\n        start = ZERO_OFFSET$3;\n        top = sizes[0].height;\n        maxHeight = 0;\n      } else if (i % 2 === 1) {\n        top = top + maxHeight;\n        start = {\n          left: 0,\n          top: top\n        };\n        maxHeight = i === numberOfItems - 1 ? sizes[i].height : Math.max(sizes[i].height, sizes[i + 1].height);\n      } else {\n        start = {\n          left: measurements[i - 1].end.left,\n          top: top\n        };\n      }\n    }\n\n    var end = {\n      left: start.left + size.width,\n      top: start.top + size.height\n    };\n    measurements[i] = {\n      index: i,\n      start: start,\n      size: size,\n      end: end,\n      visibility: -1\n    };\n  }\n\n  return measurements;\n};\n\nvar ZERO_OFFSET$2 = {\n  left: 0,\n  top: 0\n};\n\nvar measureSinglePage = function (numberOfItems, parentRect, sizes) {\n  var measurements = [];\n\n  for (var i = 0; i < numberOfItems; i++) {\n    var size = {\n      height: Math.max(parentRect.height, sizes[i].height),\n      width: Math.max(parentRect.width, sizes[i].width)\n    };\n    var start = i === 0 ? ZERO_OFFSET$2 : measurements[i - 1].end;\n    var end = {\n      left: start.left + size.width,\n      top: start.top + size.height\n    };\n    measurements[i] = {\n      index: i,\n      start: start,\n      size: size,\n      end: end,\n      visibility: -1\n    };\n  }\n\n  return measurements;\n};\n\nvar ZERO_RECT$2 = {\n  height: 0,\n  width: 0\n};\nvar ZERO_OFFSET$1 = {\n  left: 0,\n  top: 0\n};\nvar COMPARE_EPSILON = 0.000000000001;\nvar VIRTUAL_INDEX_ATTR = 'data-virtual-index';\nvar IO_THRESHOLD = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];\n\nvar useVirtual = function (_a) {\n  var enableSmoothScroll = _a.enableSmoothScroll,\n      isRtl = _a.isRtl,\n      numberOfItems = _a.numberOfItems,\n      parentRef = _a.parentRef,\n      setRenderRange = _a.setRenderRange,\n      sizes = _a.sizes,\n      scrollMode = _a.scrollMode,\n      viewMode = _a.viewMode;\n\n  var _b = React__namespace.useState(false),\n      isSmoothScrolling = _b[0],\n      setSmoothScrolling = _b[1];\n\n  var onSmoothScroll = React__namespace.useCallback(function (isSmoothScrolling) {\n    return setSmoothScrolling(isSmoothScrolling);\n  }, []);\n  var scrollModeRef = React__namespace.useRef(scrollMode);\n  scrollModeRef.current = scrollMode;\n  var viewModeRef = React__namespace.useRef(viewMode);\n  viewModeRef.current = viewMode;\n  var scrollDirection = scrollMode === exports.ScrollMode.Wrapped || viewMode === exports.ViewMode.DualPageWithCover || viewMode === exports.ViewMode.DualPage ? ScrollDirection.Both : scrollMode === exports.ScrollMode.Horizontal ? ScrollDirection.Horizontal : ScrollDirection.Vertical;\n\n  var _c = useScroll({\n    elementRef: parentRef,\n    enableSmoothScroll: enableSmoothScroll,\n    isRtl: isRtl,\n    scrollDirection: scrollDirection,\n    onSmoothScroll: onSmoothScroll\n  }),\n      scrollOffset = _c.scrollOffset,\n      scrollTo = _c.scrollTo;\n\n  var parentRect = useMeasureRect({\n    elementRef: parentRef\n  });\n  var latestRef = React__namespace.useRef({\n    scrollOffset: ZERO_OFFSET$1,\n    measurements: []\n  });\n  latestRef.current.scrollOffset = scrollOffset;\n  var defaultVisibilities = React__namespace.useMemo(function () {\n    return Array(numberOfItems).fill(-1);\n  }, []);\n\n  var _d = React__namespace.useState(defaultVisibilities),\n      visibilities = _d[0],\n      setVisibilities = _d[1];\n\n  var intersectionTracker = React__namespace.useMemo(function () {\n    var io = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var ratio = entry.isIntersecting ? entry.intersectionRatio : -1;\n        var target = entry.target;\n        var indexAttribute = target.getAttribute(VIRTUAL_INDEX_ATTR);\n\n        if (!indexAttribute) {\n          return;\n        }\n\n        var index = parseInt(indexAttribute, 10);\n\n        if (0 <= index && index < numberOfItems) {\n          setVisibilities(function (old) {\n            old[index] = ratio;\n            return __spreadArray([], old, true);\n          });\n        }\n      });\n    }, {\n      threshold: IO_THRESHOLD\n    });\n    return io;\n  }, []);\n  var measurements = React__namespace.useMemo(function () {\n    if (scrollMode === exports.ScrollMode.Page && viewMode === exports.ViewMode.SinglePage) {\n      return measureSinglePage(numberOfItems, parentRect, sizes);\n    }\n\n    if (viewMode === exports.ViewMode.DualPageWithCover) {\n      return measureDualPageWithCover(numberOfItems, parentRect, sizes, scrollMode);\n    }\n\n    if (viewMode === exports.ViewMode.DualPage) {\n      return measureDualPage(numberOfItems, parentRect, sizes, scrollMode);\n    }\n\n    return measure(numberOfItems, parentRect, sizes, scrollMode);\n  }, [scrollMode, sizes, viewMode, parentRect]);\n  var totalSize = measurements[numberOfItems - 1] ? {\n    height: measurements[numberOfItems - 1].end.top,\n    width: measurements[numberOfItems - 1].end.left\n  } : ZERO_RECT$2;\n  latestRef.current.measurements = measurements;\n\n  var _e = React__namespace.useMemo(function () {\n    var _a = calculateRange(scrollDirection, measurements, parentRect, scrollOffset),\n        start = _a.start,\n        end = _a.end;\n\n    var visiblePageVisibilities = visibilities.slice(clamp(0, numberOfItems, start), clamp(0, numberOfItems, end));\n    var maxVisbilityItem = start + indexOfMax(visiblePageVisibilities);\n    maxVisbilityItem = clamp(0, numberOfItems - 1, maxVisbilityItem);\n    var maxVisbilityIndex = maxVisbilityItem;\n\n    var _b = setRenderRange({\n      endPage: end,\n      numPages: numberOfItems,\n      startPage: start\n    }),\n        startPage = _b.startPage,\n        endPage = _b.endPage;\n\n    startPage = Math.max(startPage, 0);\n    endPage = Math.min(endPage, numberOfItems - 1);\n\n    switch (viewMode) {\n      case exports.ViewMode.DualPageWithCover:\n        if (maxVisbilityItem > 0) {\n          maxVisbilityIndex = maxVisbilityItem % 2 === 1 ? maxVisbilityItem : maxVisbilityItem - 1;\n        }\n\n        startPage = startPage === 0 ? 0 : startPage % 2 === 1 ? startPage : startPage - 1;\n        endPage = endPage % 2 === 1 ? endPage - 1 : endPage;\n\n        if (numberOfItems - endPage <= 2) {\n          endPage = numberOfItems - 1;\n        }\n\n        break;\n\n      case exports.ViewMode.DualPage:\n        maxVisbilityIndex = maxVisbilityItem % 2 === 0 ? maxVisbilityItem : maxVisbilityItem - 1;\n        startPage = startPage % 2 === 0 ? startPage : startPage - 1;\n        endPage = endPage % 2 === 1 ? endPage : endPage - 1;\n        break;\n\n      case exports.ViewMode.SinglePage:\n      default:\n        maxVisbilityIndex = maxVisbilityItem;\n        break;\n    }\n\n    return {\n      startPage: startPage,\n      endPage: endPage,\n      maxVisbilityIndex: maxVisbilityIndex\n    };\n  }, [measurements, parentRect, scrollOffset, viewMode, visibilities]),\n      startPage = _e.startPage,\n      endPage = _e.endPage,\n      maxVisbilityIndex = _e.maxVisbilityIndex;\n\n  var virtualItems = React__namespace.useMemo(function () {\n    var virtualItems = [];\n\n    var _loop_1 = function (i) {\n      var item = measurements[i];\n\n      var virtualItem = __assign(__assign({}, item), {\n        visibility: visibilities[i] !== undefined ? visibilities[i] : -1,\n        measureRef: function (ele) {\n          if (!ele) {\n            return;\n          }\n\n          ele.setAttribute(VIRTUAL_INDEX_ATTR, \"\".concat(i));\n          intersectionTracker.observe(ele);\n        }\n      });\n\n      virtualItems.push(virtualItem);\n    };\n\n    for (var i = startPage; i <= endPage; i++) {\n      _loop_1(i);\n    }\n\n    return virtualItems;\n  }, [startPage, endPage, visibilities, measurements]);\n  var scrollToItem = React__namespace.useCallback(function (index, offset) {\n    var measurements = latestRef.current.measurements;\n    var normalizedIndex = clamp(0, numberOfItems - 1, index);\n    var measurement = measurements[normalizedIndex];\n    var withOffset = scrollModeRef.current === exports.ScrollMode.Page ? ZERO_OFFSET$1 : offset;\n    return measurement ? scrollTo({\n      left: withOffset.left + measurement.start.left,\n      top: withOffset.top + measurement.start.top\n    }, enableSmoothScroll) : Promise.resolve();\n  }, [scrollTo, enableSmoothScroll]);\n  var scrollToSmallestItemAbove = React__namespace.useCallback(function (index, offset) {\n    var measurements = latestRef.current.measurements;\n    var start = measurements[index].start;\n    var nextItem = measurements.find(function (item) {\n      return item.start.top - start.top > COMPARE_EPSILON;\n    });\n\n    if (!nextItem) {\n      return Promise.resolve();\n    }\n\n    var nextIndex = nextItem.index;\n\n    switch (viewModeRef.current) {\n      case exports.ViewMode.DualPage:\n        nextIndex = nextIndex % 2 === 0 ? nextIndex : nextIndex + 1;\n        break;\n\n      case exports.ViewMode.DualPageWithCover:\n        nextIndex = nextIndex % 2 === 1 ? nextIndex : nextIndex + 1;\n        break;\n    }\n\n    return scrollToItem(nextIndex, offset);\n  }, []);\n  var scrollToBiggestItemBelow = React__namespace.useCallback(function (index, offset) {\n    var measurements = latestRef.current.measurements;\n    var start = measurements[index].start;\n    var prevIndex = index;\n    var found = false;\n\n    for (var i = numberOfItems - 1; i >= 0; i--) {\n      if (start.top - measurements[i].start.top > COMPARE_EPSILON) {\n        found = true;\n        prevIndex = measurements[i].index;\n        break;\n      }\n    }\n\n    if (!found) {\n      return Promise.resolve();\n    }\n\n    switch (viewModeRef.current) {\n      case exports.ViewMode.DualPage:\n        prevIndex = prevIndex % 2 === 0 ? prevIndex : prevIndex - 1;\n        break;\n\n      case exports.ViewMode.DualPageWithCover:\n        prevIndex = prevIndex % 2 === 0 ? prevIndex - 1 : prevIndex;\n        break;\n    }\n\n    if (prevIndex === index) {\n      prevIndex = index - 1;\n    }\n\n    return scrollToItem(prevIndex, offset);\n  }, []);\n  var scrollToNextItem = React__namespace.useCallback(function (index, offset) {\n    if (viewModeRef.current === exports.ViewMode.DualPageWithCover || viewModeRef.current === exports.ViewMode.DualPage) {\n      return scrollToSmallestItemAbove(index, offset);\n    }\n\n    switch (scrollModeRef.current) {\n      case exports.ScrollMode.Wrapped:\n        return scrollToSmallestItemAbove(index, offset);\n\n      case exports.ScrollMode.Horizontal:\n      case exports.ScrollMode.Vertical:\n      default:\n        return scrollToItem(index + 1, offset);\n    }\n  }, []);\n  var scrollToPreviousItem = React__namespace.useCallback(function (index, offset) {\n    if (viewModeRef.current === exports.ViewMode.DualPageWithCover || viewModeRef.current === exports.ViewMode.DualPage) {\n      return scrollToBiggestItemBelow(index, offset);\n    }\n\n    switch (scrollModeRef.current) {\n      case exports.ScrollMode.Wrapped:\n        return scrollToBiggestItemBelow(index, offset);\n\n      case exports.ScrollMode.Horizontal:\n      case exports.ScrollMode.Vertical:\n      default:\n        return scrollToItem(index - 1, offset);\n    }\n  }, []);\n  var getContainerStyles = React__namespace.useCallback(function () {\n    return buildContainerStyles(totalSize, scrollModeRef.current);\n  }, [totalSize]);\n  var getItemContainerStyles = React__namespace.useCallback(function (item) {\n    return buildItemContainerStyles(item, parentRect, scrollModeRef.current);\n  }, [parentRect]);\n  var getItemStyles = React__namespace.useCallback(function (item) {\n    return buildItemStyles(item, isRtl, sizes, viewModeRef.current, scrollModeRef.current);\n  }, [isRtl, sizes]);\n  var zoom = React__namespace.useCallback(function (scale, index) {\n    var _a = latestRef.current,\n        measurements = _a.measurements,\n        scrollOffset = _a.scrollOffset;\n    var normalizedIndex = clamp(0, numberOfItems - 1, index);\n    var measurement = measurements[normalizedIndex];\n\n    if (measurement) {\n      var updateOffset = scrollModeRef.current === exports.ScrollMode.Page ? {\n        left: measurement.start.left,\n        top: measurement.start.top\n      } : {\n        left: scrollOffset.left * scale,\n        top: scrollOffset.top * scale\n      };\n      return scrollTo(updateOffset, false);\n    }\n\n    return Promise.resolve();\n  }, []);\n  React__namespace.useEffect(function () {\n    return function () {\n      intersectionTracker.disconnect();\n    };\n  }, []);\n  return {\n    boundingClientRect: parentRect,\n    isSmoothScrolling: isSmoothScrolling,\n    startPage: startPage,\n    endPage: endPage,\n    maxVisbilityIndex: maxVisbilityIndex,\n    virtualItems: virtualItems,\n    getContainerStyles: getContainerStyles,\n    getItemContainerStyles: getItemContainerStyles,\n    getItemStyles: getItemStyles,\n    scrollToItem: scrollToItem,\n    scrollToNextItem: scrollToNextItem,\n    scrollToPreviousItem: scrollToPreviousItem,\n    zoom: zoom\n  };\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar calculateScale = function (container, pageHeight, pageWidth, scale, viewMode, numPages) {\n  var w = pageWidth;\n\n  switch (true) {\n    case viewMode === exports.ViewMode.DualPageWithCover && numPages >= 3:\n    case viewMode === exports.ViewMode.DualPage && numPages >= 3:\n      w = 2 * pageWidth;\n      break;\n\n    default:\n      w = pageWidth;\n      break;\n  }\n\n  switch (scale) {\n    case exports.SpecialZoomLevel.ActualSize:\n      return 1;\n\n    case exports.SpecialZoomLevel.PageFit:\n      return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / w, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n\n    case exports.SpecialZoomLevel.PageWidth:\n      return (container.clientWidth - SCROLL_BAR_WIDTH) / w;\n  }\n};\n\nvar useStack = function (maxLength) {\n  var stackRef = React__namespace.useRef([]);\n\n  var map = function (transformer) {\n    return stackRef.current.map(function (item) {\n      return transformer(item);\n    });\n  };\n\n  var pop = function () {\n    var stack = stackRef.current;\n    var size = stack.length;\n\n    if (size === 0) {\n      return null;\n    }\n\n    var lastItem = stack.pop();\n    stackRef.current = stack;\n    return lastItem;\n  };\n\n  var push = function (item) {\n    var stack = stackRef.current;\n\n    if (stack.length + 1 > maxLength) {\n      stack.shift();\n    }\n\n    stack.push(item);\n    stackRef.current = stack;\n  };\n\n  React__namespace.useEffect(function () {\n    return function () {\n      stackRef.current = [];\n    };\n  }, []);\n  return {\n    push: push,\n    map: map,\n    pop: pop\n  };\n};\n\nvar useQueue = function (maxLength) {\n  var queueRef = React__namespace.useRef([]);\n\n  var dequeue = function () {\n    var queue = queueRef.current;\n    var size = queue.length;\n\n    if (size === 0) {\n      return null;\n    }\n\n    var firstItem = queue.shift();\n    queueRef.current = queue;\n    return firstItem || null;\n  };\n\n  var enqueue = function (item) {\n    var queue = queueRef.current;\n\n    if (queue.length + 1 > maxLength) {\n      queue.pop();\n    }\n\n    queueRef.current = [item].concat(queue);\n  };\n\n  var map = function (transformer) {\n    return queueRef.current.map(function (item) {\n      return transformer(item);\n    });\n  };\n\n  React__namespace.useEffect(function () {\n    return function () {\n      queueRef.current = [];\n    };\n  }, []);\n  return {\n    dequeue: dequeue,\n    enqueue: enqueue,\n    map: map\n  };\n};\n\nvar MAX_QUEUE_LENGTH = 50;\n\nvar useDestination = function (_a) {\n  var getCurrentPage = _a.getCurrentPage;\n  var previousDestinations = useStack(MAX_QUEUE_LENGTH);\n  var nextDestinations = useQueue(MAX_QUEUE_LENGTH);\n\n  var getNextDestination = function () {\n    var nextDest = nextDestinations.dequeue();\n\n    if (nextDest) {\n      previousDestinations.push(nextDest);\n    }\n\n    if (nextDest && nextDest.pageIndex === getCurrentPage()) {\n      return getNextDestination();\n    }\n\n    return nextDest;\n  };\n\n  var getPreviousDestination = function () {\n    var prevDest = previousDestinations.pop();\n\n    if (prevDest) {\n      nextDestinations.enqueue(prevDest);\n    }\n\n    if (prevDest && prevDest.pageIndex === getCurrentPage()) {\n      return getPreviousDestination();\n    }\n\n    return prevDest;\n  };\n\n  var markVisitedDestination = React__namespace.useCallback(function (destination) {\n    previousDestinations.push(destination);\n  }, []);\n  return {\n    getNextDestination: getNextDestination,\n    getPreviousDestination: getPreviousDestination,\n    markVisitedDestination: markVisitedDestination\n  };\n};\n\nvar flaternSingleOutline = function (outline) {\n  var result = [];\n\n  if (outline.items && outline.items.length > 0) {\n    result = result.concat(flaternOutlines(outline.items));\n  }\n\n  return result;\n};\n\nvar flaternOutlines = function (outlines) {\n  var result = [];\n  outlines.map(function (outline) {\n    result = result.concat(outline).concat(flaternSingleOutline(outline));\n  });\n  return result;\n};\n\nvar useOutlines = function (doc) {\n  var isMounted = useIsMounted();\n\n  var _a = React__namespace.useState([]),\n      outlines = _a[0],\n      setOutlines = _a[1];\n\n  React__namespace.useEffect(function () {\n    doc.getOutline().then(function (result) {\n      if (isMounted.current && result !== null) {\n        var items = flaternOutlines(result);\n        setOutlines(items);\n      }\n    });\n  }, []);\n  return outlines;\n};\n\nvar RESIZE_EVENT_OPTIONS = {\n  capture: false,\n  passive: true\n};\nvar ZERO_RECT$1 = {\n  height: 0,\n  width: 0\n};\n\nvar useWindowResize = function () {\n  var _a = React__namespace.useState(ZERO_RECT$1),\n      windowRect = _a[0],\n      setWindowRect = _a[1];\n\n  var handleResize = useDebounceCallback(function () {\n    setWindowRect({\n      height: window.innerHeight,\n      width: window.innerWidth\n    });\n  }, 100);\n  useIsomorphicLayoutEffect(function () {\n    window.addEventListener('resize', handleResize, RESIZE_EVENT_OPTIONS);\n    return function () {\n      window.removeEventListener('resize', handleResize, RESIZE_EVENT_OPTIONS);\n    };\n  }, []);\n  return windowRect;\n};\n\nvar ZERO_RECT = {\n  height: 0,\n  width: 0\n};\n\nvar useFullScreen = function (_a) {\n  var getCurrentPage = _a.getCurrentPage,\n      getCurrentScrollMode = _a.getCurrentScrollMode,\n      jumpToPage = _a.jumpToPage,\n      targetRef = _a.targetRef;\n\n  var _b = React__namespace.useState(exports.FullScreenMode.Normal),\n      fullScreenMode = _b[0],\n      setFullScreenMode = _b[1];\n\n  var windowRect = useWindowResize();\n\n  var _c = React__namespace.useState(ZERO_RECT),\n      targetRect = _c[0],\n      setTargetRect = _c[1];\n\n  var windowSizeBeforeFullScreenRef = React__namespace.useRef(ZERO_RECT);\n  var targetPageRef = React__namespace.useRef(getCurrentPage());\n  var fullScreenSizeRef = React__namespace.useRef(ZERO_RECT);\n\n  var _d = React__namespace.useState(targetRef.current),\n      element = _d[0],\n      setElement = _d[1];\n\n  var fullScreenElementRef = React__namespace.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (targetRef.current !== element) {\n      setElement(targetRef.current);\n    }\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    if (!element) {\n      return;\n    }\n\n    var io = new ResizeObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var _a = entry.target.getBoundingClientRect(),\n            height = _a.height,\n            width = _a.width;\n\n        setTargetRect({\n          height: height,\n          width: width\n        });\n      });\n    });\n    io.observe(element);\n    return function () {\n      io.unobserve(element);\n      io.disconnect();\n    };\n  }, [element]);\n  var closeOtherFullScreen = React__namespace.useCallback(function (target) {\n    var currentFullScreenEle = getFullScreenElement();\n\n    if (currentFullScreenEle && currentFullScreenEle !== target) {\n      setFullScreenMode(exports.FullScreenMode.Normal);\n      return exitFullScreen(currentFullScreenEle);\n    }\n\n    return Promise.resolve();\n  }, []);\n  var enterFullScreenMode = React__namespace.useCallback(function (target) {\n    if (!target || !isFullScreenEnabled()) {\n      return;\n    }\n\n    setElement(target);\n    closeOtherFullScreen(target).then(function () {\n      fullScreenElementRef.current = target;\n      setFullScreenMode(exports.FullScreenMode.Entering);\n      requestFullScreen(target);\n    });\n  }, []);\n  var exitFullScreenMode = React__namespace.useCallback(function () {\n    var currentFullScreenEle = getFullScreenElement();\n\n    if (currentFullScreenEle) {\n      setFullScreenMode(exports.FullScreenMode.Exitting);\n      exitFullScreen(document);\n    }\n  }, []);\n  var handleFullScreenChange = React__namespace.useCallback(function () {\n    if (!element) {\n      return;\n    }\n\n    var currentFullScreenEle = getFullScreenElement();\n\n    if (currentFullScreenEle !== element) {\n      setFullScreenMode(exports.FullScreenMode.Exitting);\n    }\n  }, [element]);\n  React__namespace.useEffect(function () {\n    switch (fullScreenMode) {\n      case exports.FullScreenMode.Entering:\n        if (fullScreenElementRef.current) {\n          fullScreenElementRef.current.style.backgroundColor = 'var(--rpv-core__full-screen-target-background-color)';\n        }\n\n        targetPageRef.current = getCurrentPage();\n        windowSizeBeforeFullScreenRef.current = {\n          height: window.innerHeight,\n          width: window.innerWidth\n        };\n        break;\n\n      case exports.FullScreenMode.Entered:\n        if (getCurrentScrollMode() === exports.ScrollMode.Page) {\n          jumpToPage(targetPageRef.current).then(function () {\n            setFullScreenMode(exports.FullScreenMode.EnteredCompletely);\n          });\n        } else {\n          setFullScreenMode(exports.FullScreenMode.EnteredCompletely);\n        }\n\n        break;\n\n      case exports.FullScreenMode.Exitting:\n        if (fullScreenElementRef.current) {\n          fullScreenElementRef.current.style.backgroundColor = '';\n          fullScreenElementRef.current = null;\n        }\n\n        targetPageRef.current = getCurrentPage();\n        break;\n\n      case exports.FullScreenMode.Exited:\n        setFullScreenMode(exports.FullScreenMode.Normal);\n\n        if (getCurrentScrollMode() === exports.ScrollMode.Page) {\n          jumpToPage(targetPageRef.current);\n        }\n\n        break;\n    }\n  }, [fullScreenMode]);\n  React__namespace.useEffect(function () {\n    if (fullScreenMode === exports.FullScreenMode.Normal) {\n      return;\n    }\n\n    if (fullScreenMode === exports.FullScreenMode.Entering && windowRect.height === targetRect.height && windowRect.width === targetRect.width && windowRect.height > 0 && windowRect.width > 0 && (fullScreenSizeRef.current.height === 0 || windowRect.height == fullScreenSizeRef.current.height)) {\n      fullScreenSizeRef.current = {\n        height: window.innerHeight,\n        width: window.innerWidth\n      };\n      setFullScreenMode(exports.FullScreenMode.Entered);\n      return;\n    }\n\n    if (fullScreenMode === exports.FullScreenMode.Exitting && windowSizeBeforeFullScreenRef.current.height === windowRect.height && windowSizeBeforeFullScreenRef.current.width === windowRect.width && windowRect.height > 0 && windowRect.width > 0) {\n      setFullScreenMode(exports.FullScreenMode.Exited);\n    }\n  }, [fullScreenMode, windowRect, targetRect]);\n  React__namespace.useEffect(function () {\n    addFullScreenChangeListener(handleFullScreenChange);\n    return function () {\n      removeFullScreenChangeListener(handleFullScreenChange);\n    };\n  }, [element]);\n  return {\n    enterFullScreenMode: enterFullScreenMode,\n    exitFullScreenMode: exitFullScreenMode,\n    fullScreenMode: fullScreenMode\n  };\n};\n\nvar DEFAULT_PAGE_LAYOUT = {\n  buildPageStyles: function () {\n    return {};\n  },\n  transformSize: function (_a) {\n    var size = _a.size;\n    return size;\n  }\n};\nvar ZERO_OFFSET = {\n  left: 0,\n  top: 0\n};\n\nvar Inner = function (_a) {\n  var currentFile = _a.currentFile,\n      defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      enableSmoothScroll = _a.enableSmoothScroll,\n      initialPage = _a.initialPage,\n      initialRotation = _a.initialRotation,\n      initialScale = _a.initialScale,\n      pageLayout = _a.pageLayout,\n      pageSizes = _a.pageSizes,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      scrollMode = _a.scrollMode,\n      setRenderRange = _a.setRenderRange,\n      viewMode = _a.viewMode,\n      viewerState = _a.viewerState,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onRotate = _a.onRotate,\n      onRotatePage = _a.onRotatePage,\n      onZoom = _a.onZoom;\n  var numPages = doc.numPages;\n  var docId = doc.loadingTask.docId;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n  var themeContext = React__namespace.useContext(ThemeContext);\n  var isRtl = themeContext.direction === exports.TextDirection.RightToLeft;\n  var containerRef = React__namespace.useRef();\n  var pagesRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState(initialPage),\n      currentPage = _b[0],\n      setCurrentPage = _b[1];\n\n  var mostRecentVisitedRef = React__namespace.useRef(null);\n  var destinationManager = useDestination({\n    getCurrentPage: function () {\n      return stateRef.current.pageIndex;\n    }\n  });\n\n  var _c = React__namespace.useState(initialRotation),\n      rotation = _c[0],\n      setRotation = _c[1];\n\n  var previousRotation = usePrevious(rotation);\n\n  var _d = React__namespace.useState(false),\n      pagesRotationChanged = _d[0],\n      setPagesRotationChanged = _d[1];\n\n  var _e = React__namespace.useState(new Map()),\n      pagesRotation = _e[0],\n      setPagesRotation = _e[1];\n\n  var _f = React__namespace.useState(scrollMode),\n      currentScrollMode = _f[0],\n      setCurrentScrollMode = _f[1];\n\n  var previousScrollMode = usePrevious(currentScrollMode);\n\n  var _g = React__namespace.useState(viewMode),\n      currentViewMode = _g[0],\n      setCurrentViewMode = _g[1];\n\n  var previousViewMode = usePrevious(currentViewMode);\n  var outlines = useOutlines(doc);\n\n  var _h = React__namespace.useState(initialScale),\n      scale = _h[0],\n      setScale = _h[1];\n\n  var previousScale = usePrevious(scale);\n  var stateRef = React__namespace.useRef(viewerState);\n  var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n  var forceTargetFullScreenRef = React__namespace.useRef(-1);\n  var forceTargetZoomRef = React__namespace.useRef(-1);\n  var forceTargetInitialPageRef = React__namespace.useRef(initialPage);\n  var fullScreen = useFullScreen({\n    getCurrentPage: function () {\n      return stateRef.current.pageIndex;\n    },\n    getCurrentScrollMode: function () {\n      return stateRef.current.scrollMode;\n    },\n    jumpToPage: function (pageIndex) {\n      return jumpToPage(pageIndex);\n    },\n    targetRef: pagesRef\n  });\n\n  var _j = React__namespace.useState(-1),\n      renderPageIndex = _j[0],\n      setRenderPageIndex = _j[1];\n\n  var _k = React__namespace.useState(0),\n      renderQueueKey = _k[0],\n      setRenderQueueKey = _k[1];\n\n  var renderQueue = useRenderQueue({\n    doc: doc\n  });\n  React__namespace.useEffect(function () {\n    return function () {\n      clearPagesCache();\n    };\n  }, [docId]);\n  var layoutBuilder = React__namespace.useMemo(function () {\n    return Object.assign({}, DEFAULT_PAGE_LAYOUT, pageLayout);\n  }, []);\n  var sizes = React__namespace.useMemo(function () {\n    return Array(numPages).fill(0).map(function (_, pageIndex) {\n      var pageSize = [pageSizes[pageIndex].pageHeight, pageSizes[pageIndex].pageWidth];\n      var rect = Math.abs(rotation) % 180 === 0 ? {\n        height: pageSize[0],\n        width: pageSize[1]\n      } : {\n        height: pageSize[1],\n        width: pageSize[0]\n      };\n      var pageRect = {\n        height: rect.height * scale,\n        width: rect.width * scale\n      };\n      return layoutBuilder.transformSize({\n        numPages: numPages,\n        pageIndex: pageIndex,\n        size: pageRect\n      });\n    });\n  }, [rotation, scale]);\n  var virtualizer = useVirtual({\n    enableSmoothScroll: enableSmoothScroll,\n    isRtl: isRtl,\n    numberOfItems: numPages,\n    parentRef: pagesRef,\n    scrollMode: currentScrollMode,\n    setRenderRange: setRenderRange,\n    sizes: sizes,\n    viewMode: currentViewMode\n  });\n  var handlePagesResize = useDebounceCallback(function () {\n    if (!keepSpecialZoomLevelRef.current || stateRef.current.fullScreenMode !== exports.FullScreenMode.Normal || initialPage > 0 && forceTargetInitialPageRef.current === initialPage) {\n      return;\n    }\n\n    zoom(keepSpecialZoomLevelRef.current);\n  }, 200);\n  useTrackResize({\n    targetRef: pagesRef,\n    onResize: handlePagesResize\n  });\n\n  var setViewerState = function (viewerState) {\n    var newState = viewerState;\n    plugins.forEach(function (plugin) {\n      if (plugin.onViewerStateChange) {\n        newState = plugin.onViewerStateChange(newState);\n      }\n    });\n    stateRef.current = newState;\n  };\n\n  var getPagesContainer = function () {\n    return pagesRef.current;\n  };\n\n  var getViewerState = function () {\n    return stateRef.current;\n  };\n\n  var handleJumpFromLinkAnnotation = React__namespace.useCallback(function (destination) {\n    destinationManager.markVisitedDestination(destination);\n  }, []);\n  var handleJumpToDestination = React__namespace.useCallback(function (destination) {\n    var pageIndex = destination.pageIndex,\n        bottomOffset = destination.bottomOffset,\n        leftOffset = destination.leftOffset,\n        scaleTo = destination.scaleTo;\n    var pagesContainer = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesContainer || !currentState) {\n      return Promise.resolve();\n    }\n\n    return new Promise(function (resolve, _) {\n      getPage(doc, pageIndex).then(function (page) {\n        var viewport = page.getViewport({\n          scale: 1\n        });\n        var top = 0;\n        var bottom = (typeof bottomOffset === 'function' ? bottomOffset(viewport.width, viewport.height) : bottomOffset) || 0;\n        var left = (typeof leftOffset === 'function' ? leftOffset(viewport.width, viewport.height) : leftOffset) || 0;\n        var updateScale = currentState.scale;\n\n        switch (scaleTo) {\n          case exports.SpecialZoomLevel.PageFit:\n            top = 0;\n            left = 0;\n            zoom(exports.SpecialZoomLevel.PageFit);\n            break;\n\n          case exports.SpecialZoomLevel.PageWidth:\n            updateScale = calculateScale(pagesContainer, pageSizes[pageIndex].pageHeight, pageSizes[pageIndex].pageWidth, exports.SpecialZoomLevel.PageWidth, viewMode, numPages);\n            top = (viewport.height - bottom) * updateScale;\n            left = left * updateScale;\n            zoom(updateScale);\n            break;\n\n          default:\n            top = (viewport.height - bottom) * updateScale;\n            left = left * updateScale;\n            break;\n        }\n\n        switch (currentState.scrollMode) {\n          case exports.ScrollMode.Horizontal:\n            virtualizer.scrollToItem(pageIndex, {\n              left: left,\n              top: 0\n            }).then(function () {\n              resolve();\n            });\n            break;\n\n          case exports.ScrollMode.Vertical:\n          default:\n            virtualizer.scrollToItem(pageIndex, {\n              left: 0,\n              top: top\n            }).then(function () {\n              resolve();\n            });\n            break;\n        }\n      });\n    });\n  }, []);\n  var jumpToDestination = React__namespace.useCallback(function (destination) {\n    destinationManager.markVisitedDestination(destination);\n    return handleJumpToDestination(destination);\n  }, []);\n  var jumpToNextDestination = React__namespace.useCallback(function () {\n    var nextDestination = destinationManager.getNextDestination();\n    return nextDestination ? handleJumpToDestination(nextDestination) : Promise.resolve();\n  }, []);\n  var jumpToPreviousDestination = React__namespace.useCallback(function () {\n    var lastDestination = destinationManager.getPreviousDestination();\n    return lastDestination ? handleJumpToDestination(lastDestination) : Promise.resolve();\n  }, []);\n  var jumpToNextPage = React__namespace.useCallback(function () {\n    return virtualizer.scrollToNextItem(stateRef.current.pageIndex, ZERO_OFFSET);\n  }, []);\n  var jumpToPage = React__namespace.useCallback(function (pageIndex) {\n    return 0 <= pageIndex && pageIndex < numPages ? virtualizer.scrollToItem(pageIndex, ZERO_OFFSET) : Promise.resolve();\n  }, []);\n  var jumpToPreviousPage = React__namespace.useCallback(function () {\n    return virtualizer.scrollToPreviousItem(stateRef.current.pageIndex, ZERO_OFFSET);\n  }, []);\n  var openFile = React__namespace.useCallback(function (file) {\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(file.name, data);\n    });\n  }, [onOpenFile]);\n  var rotate = React__namespace.useCallback(function (direction) {\n    var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n    var currentRotation = stateRef.current.rotation;\n    var updateRotation = currentRotation === 360 || currentRotation === -360 ? degrees : currentRotation + degrees;\n    renderQueue.markNotRendered();\n    setRotation(updateRotation);\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      rotation: updateRotation\n    }));\n    onRotate({\n      direction: direction,\n      doc: doc,\n      rotation: updateRotation\n    });\n  }, []);\n  var rotatePage = React__namespace.useCallback(function (pageIndex, direction) {\n    var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n    var rotations = stateRef.current.pagesRotation;\n    var currentPageRotation = rotations.has(pageIndex) ? rotations.get(pageIndex) : initialRotation;\n    var finalRotation = currentPageRotation + degrees;\n    var updateRotations = rotations.set(pageIndex, finalRotation);\n    setPagesRotation(updateRotations);\n    setPagesRotationChanged(function (value) {\n      return !value;\n    });\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      pagesRotation: updateRotations,\n      rotatedPage: pageIndex\n    }));\n    onRotatePage({\n      direction: direction,\n      doc: doc,\n      pageIndex: pageIndex,\n      rotation: finalRotation\n    });\n    renderQueue.markRendering(pageIndex);\n    setRenderPageIndex(pageIndex);\n  }, []);\n  var switchScrollMode = React__namespace.useCallback(function (scrollMode) {\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      scrollMode: scrollMode\n    }));\n    setCurrentScrollMode(scrollMode);\n  }, []);\n  var switchViewMode = React__namespace.useCallback(function (viewMode) {\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      viewMode: viewMode\n    }));\n    setCurrentViewMode(viewMode);\n  }, []);\n  var zoom = React__namespace.useCallback(function (newScale) {\n    var pagesEle = pagesRef.current;\n    var currentPage = stateRef.current.pageIndex;\n\n    if (currentPage < 0 || currentPage >= numPages) {\n      return;\n    }\n\n    var currentPageHeight = pageSizes[currentPage].pageHeight;\n    var currentPageWidth = pageSizes[currentPage].pageWidth;\n    var updateScale = pagesEle ? typeof newScale === 'string' ? calculateScale(pagesEle, currentPageHeight, currentPageWidth, newScale, stateRef.current.viewMode, numPages) : newScale : 1;\n    keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n\n    if (updateScale === stateRef.current.scale) {\n      return;\n    }\n\n    setRenderQueueKey(function (key) {\n      return key + 1;\n    });\n    renderQueue.markNotRendered();\n    setScale(updateScale);\n    onZoom({\n      doc: doc,\n      scale: updateScale\n    });\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      scale: updateScale\n    }));\n  }, []);\n  var enterFullScreenMode = React__namespace.useCallback(function (target) {\n    fullScreen.enterFullScreenMode(target);\n  }, []);\n  var exitFullScreenMode = React__namespace.useCallback(function () {\n    fullScreen.exitFullScreenMode();\n  }, []);\n  React__namespace.useEffect(function () {\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      fullScreenMode: fullScreen.fullScreenMode\n    }));\n  }, [fullScreen.fullScreenMode]);\n  React__namespace.useEffect(function () {\n    var pluginMethods = {\n      enterFullScreenMode: enterFullScreenMode,\n      exitFullScreenMode: exitFullScreenMode,\n      getPagesContainer: getPagesContainer,\n      getViewerState: getViewerState,\n      jumpToDestination: jumpToDestination,\n      jumpToNextDestination: jumpToNextDestination,\n      jumpToPreviousDestination: jumpToPreviousDestination,\n      jumpToNextPage: jumpToNextPage,\n      jumpToPreviousPage: jumpToPreviousPage,\n      jumpToPage: jumpToPage,\n      openFile: openFile,\n      rotate: rotate,\n      rotatePage: rotatePage,\n      setViewerState: setViewerState,\n      switchScrollMode: switchScrollMode,\n      switchViewMode: switchViewMode,\n      zoom: zoom\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.install) {\n        plugin.install(pluginMethods);\n      }\n    });\n    return function () {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginMethods);\n        }\n      });\n    };\n  }, [docId]);\n  React__namespace.useEffect(function () {\n    onDocumentLoad({\n      doc: doc,\n      file: currentFile\n    });\n    plugins.forEach(function (plugin) {\n      plugin.onDocumentLoad && plugin.onDocumentLoad({\n        doc: doc,\n        file: currentFile\n      });\n    });\n  }, [docId]);\n  var boundingClientRect = virtualizer.boundingClientRect;\n  useRunOnce(function () {\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, boundingClientRect.height > 0 && boundingClientRect.width > 0);\n  useIsomorphicLayoutEffect(function () {\n    var latestPage = stateRef.current.pageIndex;\n\n    if (latestPage > -1 && previousScrollMode !== currentScrollMode) {\n      virtualizer.scrollToItem(latestPage, ZERO_OFFSET).then(function () {\n        if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely) {\n          if (!enableSmoothScroll) {\n            renderQueue.markNotRendered();\n          }\n\n          forceTargetFullScreenRef.current = -1;\n        }\n      });\n    }\n  }, [currentScrollMode]);\n  useIsomorphicLayoutEffect(function () {\n    var latestPage = stateRef.current.pageIndex;\n\n    if (latestPage > -1 && previousRotation !== rotation) {\n      virtualizer.scrollToItem(latestPage, ZERO_OFFSET);\n    }\n  }, [rotation]);\n  useIsomorphicLayoutEffect(function () {\n    if (previousScale != 0 && previousScale != stateRef.current.scale) {\n      virtualizer.zoom(stateRef.current.scale / previousScale, stateRef.current.pageIndex).then(function () {\n        if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely) {\n          forceTargetZoomRef.current = -1;\n        }\n      });\n    }\n  }, [scale]);\n  useIsomorphicLayoutEffect(function () {\n    if (previousViewMode === stateRef.current.viewMode) {\n      return;\n    }\n\n    var startPage = virtualizer.startPage,\n        endPage = virtualizer.endPage,\n        virtualItems = virtualizer.virtualItems;\n    renderQueue.markNotRendered();\n    renderQueue.setRange(startPage, endPage);\n\n    var _loop_1 = function (i) {\n      var item = virtualItems.find(function (item) {\n        return item.index === i;\n      });\n\n      if (item) {\n        renderQueue.setVisibility(i, item.visibility);\n      }\n    };\n\n    for (var i = startPage; i <= endPage; i++) {\n      _loop_1(i);\n    }\n\n    renderNextPage();\n  }, [currentViewMode]);\n  useIsomorphicLayoutEffect(function () {\n    var latestPage = stateRef.current.pageIndex;\n\n    if (latestPage > -1 && previousViewMode !== currentViewMode) {\n      virtualizer.scrollToItem(latestPage, ZERO_OFFSET);\n    }\n  }, [currentViewMode]);\n  useIsomorphicLayoutEffect(function () {\n    var latestPage = stateRef.current.pageIndex;\n\n    if (latestPage > 0 && latestPage === initialPage && forceTargetInitialPageRef.current === initialPage && keepSpecialZoomLevelRef.current) {\n      forceTargetInitialPageRef.current = -1;\n      zoom(keepSpecialZoomLevelRef.current);\n    }\n  }, [currentPage]);\n  React__namespace.useEffect(function () {\n    var isSmoothScrolling = virtualizer.isSmoothScrolling;\n\n    if (isSmoothScrolling) {\n      return;\n    }\n\n    if (mostRecentVisitedRef.current === null || mostRecentVisitedRef.current !== currentPage) {\n      mostRecentVisitedRef.current = currentPage;\n      onPageChange({\n        currentPage: currentPage,\n        doc: doc\n      });\n    }\n  }, [currentPage, virtualizer.isSmoothScrolling]);\n  React__namespace.useEffect(function () {\n    if (fullScreen.fullScreenMode === exports.FullScreenMode.Entering && stateRef.current.scrollMode === exports.ScrollMode.Page) {\n      forceTargetFullScreenRef.current = stateRef.current.pageIndex;\n    }\n\n    if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely && stateRef.current.scrollMode === exports.ScrollMode.Page && enableSmoothScroll) {\n      forceTargetFullScreenRef.current = -1;\n    }\n\n    if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely && keepSpecialZoomLevelRef.current) {\n      forceTargetZoomRef.current = stateRef.current.pageIndex;\n      zoom(keepSpecialZoomLevelRef.current);\n    }\n  }, [fullScreen.fullScreenMode]);\n  React__namespace.useEffect(function () {\n    if (fullScreen.fullScreenMode === exports.FullScreenMode.Entering || fullScreen.fullScreenMode === exports.FullScreenMode.Exitting || virtualizer.isSmoothScrolling) {\n      return;\n    }\n\n    var startPage = virtualizer.startPage,\n        endPage = virtualizer.endPage,\n        maxVisbilityIndex = virtualizer.maxVisbilityIndex,\n        virtualItems = virtualizer.virtualItems;\n    var currentPage = maxVisbilityIndex;\n    var isFullScreen = fullScreen.fullScreenMode === exports.FullScreenMode.Entered || fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely;\n\n    if (isFullScreen && currentPage !== forceTargetFullScreenRef.current && forceTargetFullScreenRef.current > -1) {\n      return;\n    }\n\n    if (isFullScreen && currentPage !== forceTargetZoomRef.current && forceTargetZoomRef.current > -1) {\n      return;\n    }\n\n    setCurrentPage(currentPage);\n    setViewerState(__assign(__assign({}, stateRef.current), {\n      pageIndex: currentPage\n    }));\n    renderQueue.setRange(startPage, endPage);\n\n    var _loop_2 = function (i) {\n      var item = virtualItems.find(function (item) {\n        return item.index === i;\n      });\n\n      if (item) {\n        renderQueue.setVisibility(i, item.visibility);\n      }\n    };\n\n    for (var i = startPage; i <= endPage; i++) {\n      _loop_2(i);\n    }\n\n    renderNextPage();\n  }, [virtualizer.startPage, virtualizer.endPage, virtualizer.isSmoothScrolling, virtualizer.maxVisbilityIndex, fullScreen.fullScreenMode, pagesRotationChanged, rotation, scale]);\n  var handlePageRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n    renderQueue.markRendered(pageIndex);\n    renderNextPage();\n  }, [renderQueueKey]);\n\n  var renderNextPage = function () {\n    var nextPage = renderQueue.getHighestPriorityPage();\n\n    if (nextPage > -1 && renderQueue.isInRange(nextPage)) {\n      renderQueue.markRendering(nextPage);\n      setRenderPageIndex(nextPage);\n    }\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var renderViewer = React__namespace.useCallback(function () {\n    var virtualItems = virtualizer.virtualItems;\n    var chunks = [];\n\n    switch (currentViewMode) {\n      case exports.ViewMode.DualPage:\n        chunks = chunk(virtualItems, 2);\n        break;\n\n      case exports.ViewMode.DualPageWithCover:\n        if (virtualItems.length) {\n          chunks = virtualItems[0].index === 0 ? [[virtualItems[0]]].concat(chunk(virtualItems.slice(1), 2)) : chunk(virtualItems, 2);\n        }\n\n        break;\n\n      case exports.ViewMode.SinglePage:\n      default:\n        chunks = chunk(virtualItems, 1);\n        break;\n    }\n\n    var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\n    var slot = {\n      attrs: {\n        className: 'rpv-core__inner-container',\n        'data-testid': 'core__inner-container',\n        ref: containerRef,\n        style: {\n          height: '100%'\n        }\n      },\n      children: React__namespace.createElement(React__namespace.Fragment, null),\n      subSlot: {\n        attrs: {\n          'data-testid': 'core__inner-pages',\n          className: classNames({\n            'rpv-core__inner-pages': true,\n            'rpv-core__inner-pages--horizontal': currentScrollMode === exports.ScrollMode.Horizontal,\n            'rpv-core__inner-pages--rtl': isRtl,\n            'rpv-core__inner-pages--single': currentScrollMode === exports.ScrollMode.Page,\n            'rpv-core__inner-pages--vertical': currentScrollMode === exports.ScrollMode.Vertical,\n            'rpv-core__inner-pages--wrapped': currentScrollMode === exports.ScrollMode.Wrapped\n          }),\n          ref: pagesRef,\n          style: {\n            height: '100%',\n            position: 'relative'\n          }\n        },\n        children: React__namespace.createElement(\"div\", {\n          \"data-testid\": \"core__inner-current-page-\".concat(currentPage),\n          style: Object.assign({\n            '--scale-factor': scale\n          }, virtualizer.getContainerStyles())\n        }, chunks.map(function (items) {\n          return React__namespace.createElement(\"div\", {\n            className: classNames({\n              'rpv-core__inner-page-container': true,\n              'rpv-core__inner-page-container--single': currentScrollMode === exports.ScrollMode.Page\n            }),\n            style: virtualizer.getItemContainerStyles(items[0]),\n            key: \"\".concat(items[0].index, \"-\").concat(currentViewMode)\n          }, items.map(function (item) {\n            var isCover = currentViewMode === exports.ViewMode.DualPageWithCover && (item.index === 0 || numPages % 2 === 0 && item.index === numPages - 1);\n            return React__namespace.createElement(\"div\", {\n              \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(item.index + 1)),\n              className: classNames({\n                'rpv-core__inner-page': true,\n                'rpv-core__inner-page--dual-even': currentViewMode === exports.ViewMode.DualPage && item.index % 2 === 0,\n                'rpv-core__inner-page--dual-odd': currentViewMode === exports.ViewMode.DualPage && item.index % 2 === 1,\n                'rpv-core__inner-page--dual-cover': isCover,\n                'rpv-core__inner-page--dual-cover-even': currentViewMode === exports.ViewMode.DualPageWithCover && !isCover && item.index % 2 === 0,\n                'rpv-core__inner-page--dual-cover-odd': currentViewMode === exports.ViewMode.DualPageWithCover && !isCover && item.index % 2 === 1,\n                'rpv-core__inner-page--single': currentViewMode === exports.ViewMode.SinglePage && currentScrollMode === exports.ScrollMode.Page\n              }),\n              role: \"region\",\n              key: \"\".concat(item.index, \"-\").concat(currentViewMode),\n              style: Object.assign({}, virtualizer.getItemStyles(item), layoutBuilder.buildPageStyles({\n                numPages: numPages,\n                pageIndex: item.index,\n                scrollMode: currentScrollMode,\n                viewMode: currentViewMode\n              }))\n            }, React__namespace.createElement(PageLayer, {\n              doc: doc,\n              measureRef: item.measureRef,\n              outlines: outlines,\n              pageIndex: item.index,\n              pageRotation: pagesRotation.has(item.index) ? pagesRotation.get(item.index) : 0,\n              pageSize: pageSizes[item.index],\n              plugins: plugins,\n              renderPage: renderPage,\n              renderQueueKey: renderQueueKey,\n              rotation: rotation,\n              scale: scale,\n              shouldRender: renderPageIndex === item.index,\n              viewMode: currentViewMode,\n              onExecuteNamedAction: executeNamedAction,\n              onJumpFromLinkAnnotation: handleJumpFromLinkAnnotation,\n              onJumpToDest: jumpToDestination,\n              onRenderCompleted: handlePageRenderCompleted,\n              onRotatePage: rotatePage\n            }));\n          }));\n        }))\n      }\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.renderViewer) {\n        slot = plugin.renderViewer({\n          containerRef: containerRef,\n          doc: doc,\n          pagesContainerRef: pagesRef,\n          pagesRotation: pagesRotation,\n          pageSizes: pageSizes,\n          rotation: rotation,\n          slot: slot,\n          themeContext: themeContext,\n          jumpToPage: jumpToPage,\n          openFile: openFile,\n          rotate: rotate,\n          rotatePage: rotatePage,\n          switchScrollMode: switchScrollMode,\n          switchViewMode: switchViewMode,\n          zoom: zoom\n        });\n      }\n    });\n    return slot;\n  }, [plugins, virtualizer]);\n  var renderSlot = React__namespace.useCallback(function (slot) {\n    return React__namespace.createElement(\"div\", __assign({}, slot.attrs, {\n      style: slot.attrs && slot.attrs.style ? slot.attrs.style : {}\n    }), slot.children, slot.subSlot && renderSlot(slot.subSlot));\n  }, []);\n  return renderSlot(renderViewer());\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_HEIGHT = 45;\nvar RESERVE_WIDTH = 45;\n\nvar PageSizeCalculator = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      render = _a.render,\n      scrollMode = _a.scrollMode,\n      viewMode = _a.viewMode;\n  var pagesRef = React__namespace.useRef();\n\n  var _b = React__namespace.useState({\n    pageSizes: [],\n    scale: 0\n  }),\n      state = _b[0],\n      setState = _b[1];\n\n  React__namespace.useLayoutEffect(function () {\n    var queryPageSizes = Array(doc.numPages).fill(0).map(function (_, i) {\n      return new Promise(function (resolve, _) {\n        getPage(doc, i).then(function (pdfPage) {\n          var viewport = pdfPage.getViewport({\n            scale: 1\n          });\n          resolve({\n            pageHeight: viewport.height,\n            pageWidth: viewport.width,\n            rotation: viewport.rotation\n          });\n        });\n      });\n    });\n    Promise.all(queryPageSizes).then(function (pageSizes) {\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle || pageSizes.length === 0) {\n        return;\n      }\n\n      var w = pageSizes[0].pageWidth;\n      var h = pageSizes[0].pageHeight;\n      var parentEle = pagesEle.parentElement;\n      var scaleWidth = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n      var scaleHeight = (parentEle.clientHeight - RESERVE_HEIGHT) / h;\n      var scaled = scaleWidth;\n\n      switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n          scaled = Math.min(scaleWidth, scaleHeight);\n          break;\n\n        case exports.ScrollMode.Vertical:\n        default:\n          scaled = scaleWidth;\n          break;\n      }\n\n      var scale = defaultScale ? typeof defaultScale === 'string' ? calculateScale(parentEle, h, w, defaultScale, viewMode, doc.numPages) : defaultScale : decrease(scaled);\n      setState({\n        pageSizes: pageSizes,\n        scale: scale\n      });\n    });\n  }, [doc.loadingTask.docId]);\n  return state.pageSizes.length === 0 || state.scale === 0 ? React__namespace.createElement(\"div\", {\n    className: \"rpv-core__page-size-calculator\",\n    \"data-testid\": \"core__page-size-calculating\",\n    ref: pagesRef\n  }, React__namespace.createElement(Spinner, null)) : render(state.pageSizes, state.scale);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPassword, passwordStatus) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPassword = verifyPassword;\n    _this.passwordStatus = passwordStatus;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var passwordStatus = _a.passwordStatus,\n      renderProtectedView = _a.renderProtectedView,\n      verifyPassword = _a.verifyPassword,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var l10n = React__namespace.useContext(LocalizationContext).l10n;\n\n  var _b = React__namespace.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var submit = function () {\n    return verifyPassword(password);\n  };\n\n  var handleKeyDown = function (e) {\n    if (e.key === 'Enter') {\n      submit();\n    }\n  };\n\n  React__namespace.useEffect(function () {\n    if (onDocumentAskPassword) {\n      onDocumentAskPassword({\n        verifyPassword: verifyPassword\n      });\n    }\n  }, []);\n\n  if (renderProtectedView) {\n    return renderProtectedView({\n      passwordStatus: passwordStatus,\n      verifyPassword: verifyPassword\n    });\n  }\n\n  return React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-wrapper\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password': true,\n      'rpv-core__asking-password--rtl': isRtl\n    })\n  }, React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-message\"\n  }, passwordStatus === exports.PasswordStatus.RequiredPassword && l10n.core.askingPassword.requirePasswordToOpen, passwordStatus === exports.PasswordStatus.WrongPassword && l10n.core.wrongPassword.tryAgain), React__namespace.createElement(\"div\", {\n    className: \"rpv-core__asking-password-body\"\n  }, React__namespace.createElement(\"div\", {\n    className: classNames({\n      'rpv-core__asking-password-input': true,\n      'rpv-core__asking-password-input--ltr': !isRtl,\n      'rpv-core__asking-password-input--rtl': isRtl\n    })\n  }, React__namespace.createElement(TextBox, {\n    testId: \"core__asking-password-input\",\n    type: \"password\",\n    value: password,\n    onChange: setPassword,\n    onKeyDown: handleKeyDown\n  })), React__namespace.createElement(PrimaryButton, {\n    onClick: submit\n  }, l10n.core.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var characterMap = _a.characterMap,\n      file = _a.file,\n      httpHeaders = _a.httpHeaders,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader,\n      renderProtectedView = _a.renderProtectedView,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      withCredentials = _a.withCredentials,\n      onDocumentAskPassword = _a.onDocumentAskPassword;\n  var direction = React__namespace.useContext(ThemeContext).direction;\n  var isRtl = direction === exports.TextDirection.RightToLeft;\n\n  var _b = React__namespace.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  var docRef = React__namespace.useRef('');\n  var isMounted = useIsMounted();\n  React__namespace.useEffect(function () {\n    docRef.current = '';\n    setStatus(new LoadingState(0));\n    var worker = new PdfJsApi__namespace.PDFWorker({\n      name: \"PDFWorker_\".concat(Date.now())\n    });\n    var params = Object.assign({\n      httpHeaders: httpHeaders,\n      withCredentials: withCredentials,\n      worker: worker\n    }, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n    var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n    var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, exports.PasswordStatus.RequiredPassword));\n          break;\n\n        case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n          isMounted.current && setStatus(new AskForPasswordState(verifyPassword, exports.PasswordStatus.WrongPassword));\n          break;\n      }\n    };\n\n    loadingTask.onProgress = function (progress) {\n      var loaded = progress.total > 0 ? Math.min(100, 100 * progress.loaded / progress.total) : 100;\n\n      if (isMounted.current && docRef.current === '') {\n        setStatus(new LoadingState(loaded));\n      }\n    };\n\n    loadingTask.promise.then(function (doc) {\n      docRef.current = doc.loadingTask.docId;\n      isMounted.current && setStatus(new CompletedState(doc));\n    }, function (err) {\n      return isMounted.current && !worker.destroyed && setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n      worker.destroy();\n    };\n  }, [file]);\n\n  if (status instanceof AskForPasswordState) {\n    return React__namespace.createElement(AskingPassword, {\n      passwordStatus: status.passwordStatus,\n      renderProtectedView: renderProtectedView,\n      verifyPassword: status.verifyPassword,\n      onDocumentAskPassword: onDocumentAskPassword\n    });\n  }\n\n  if (status instanceof CompletedState) {\n    return render(status.doc);\n  }\n\n  if (status instanceof FailureState) {\n    return renderError ? renderError(status.error) : React__namespace.createElement(\"div\", {\n      className: classNames({\n        'rpv-core__doc-error': true,\n        'rpv-core__doc-error--rtl': isRtl\n      })\n    }, React__namespace.createElement(\"div\", {\n      className: \"rpv-core__doc-error-text\"\n    }, status.error.message));\n  }\n\n  return React__namespace.createElement(\"div\", {\n    \"data-testid\": \"core__doc-loading\",\n    className: classNames({\n      'rpv-core__doc-loading': true,\n      'rpv-core__doc-loading--rtl': isRtl\n    })\n  }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null));\n};\n\nvar isDarkMode = function () {\n  return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n  var initialTheme = React__namespace.useMemo(function () {\n    return theme === 'auto' ? isDarkMode() ? 'dark' : 'light' : theme;\n  }, []);\n\n  var _a = React__namespace.useState(initialTheme),\n      currentTheme = _a[0],\n      setCurrentTheme = _a[1];\n\n  var prevTheme = usePrevious(currentTheme);\n  React__namespace.useEffect(function () {\n    if (theme !== 'auto') {\n      return;\n    }\n\n    var media = window.matchMedia('(prefers-color-scheme: dark)');\n\n    var handler = function (e) {\n      setCurrentTheme(e.matches ? 'dark' : 'light');\n    };\n\n    media.addEventListener('change', handler);\n    return function () {\n      return media.removeEventListener('change', handler);\n    };\n  }, []);\n  React__namespace.useEffect(function () {\n    if (currentTheme !== prevTheme && onSwitchTheme) {\n      onSwitchTheme(currentTheme);\n    }\n  }, [currentTheme]);\n  React__namespace.useEffect(function () {\n    if (theme !== currentTheme) {\n      setCurrentTheme(theme);\n    }\n  }, [theme]);\n  return {\n    currentTheme: currentTheme,\n    setCurrentTheme: setCurrentTheme\n  };\n};\n\nvar isSameUrl = function (a, b) {\n  var typeA = typeof a;\n  var typeB = typeof b;\n\n  if (typeA === 'string' && typeB === 'string' && a === b) {\n    return true;\n  }\n\n  if (typeA === 'object' && typeB === 'object') {\n    return a.length === b.length && a.every(function (v, i) {\n      return v === b[i];\n    });\n  }\n\n  return false;\n};\n\nvar NUM_OVERSCAN_PAGES = 3;\n\nvar DEFAULT_RENDER_RANGE = function (visiblePagesRange) {\n  return {\n    startPage: visiblePagesRange.startPage - NUM_OVERSCAN_PAGES,\n    endPage: visiblePagesRange.endPage + NUM_OVERSCAN_PAGES\n  };\n};\n\nvar Viewer = function (_a) {\n  var characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      _b = _a.enableSmoothScroll,\n      enableSmoothScroll = _b === void 0 ? true : _b,\n      fileUrl = _a.fileUrl,\n      _c = _a.httpHeaders,\n      httpHeaders = _c === void 0 ? {} : _c,\n      _d = _a.initialPage,\n      initialPage = _d === void 0 ? 0 : _d,\n      pageLayout = _a.pageLayout,\n      _e = _a.initialRotation,\n      initialRotation = _e === void 0 ? 0 : _e,\n      localization = _a.localization,\n      _f = _a.plugins,\n      plugins = _f === void 0 ? [] : _f,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader,\n      renderPage = _a.renderPage,\n      renderProtectedView = _a.renderProtectedView,\n      _g = _a.scrollMode,\n      scrollMode = _g === void 0 ? exports.ScrollMode.Vertical : _g,\n      _h = _a.setRenderRange,\n      setRenderRange = _h === void 0 ? DEFAULT_RENDER_RANGE : _h,\n      transformGetDocumentParams = _a.transformGetDocumentParams,\n      _j = _a.theme,\n      theme = _j === void 0 ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: 'light'\n  } : _j,\n      _k = _a.viewMode,\n      viewMode = _k === void 0 ? exports.ViewMode.SinglePage : _k,\n      _l = _a.withCredentials,\n      withCredentials = _l === void 0 ? false : _l,\n      onDocumentAskPassword = _a.onDocumentAskPassword,\n      _m = _a.onDocumentLoad,\n      onDocumentLoad = _m === void 0 ? function () {} : _m,\n      _o = _a.onPageChange,\n      onPageChange = _o === void 0 ? function () {} : _o,\n      _p = _a.onRotate,\n      onRotate = _p === void 0 ? function () {} : _p,\n      _q = _a.onRotatePage,\n      onRotatePage = _q === void 0 ? function () {} : _q,\n      _r = _a.onSwitchTheme,\n      onSwitchTheme = _r === void 0 ? function () {} : _r,\n      _s = _a.onZoom,\n      onZoom = _s === void 0 ? function () {} : _s;\n\n  var _t = React__namespace.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : '',\n    shouldLoad: false\n  }),\n      file = _t[0],\n      setFile = _t[1];\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName,\n      shouldLoad: true\n    });\n  };\n\n  var _u = React__namespace.useState(false),\n      visible = _u[0],\n      setVisible = _u[1];\n\n  var prevFile = usePrevious(file);\n  React__namespace.useEffect(function () {\n    if (!isSameUrl(prevFile.data, fileUrl)) {\n      setFile({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: visible\n      });\n    }\n  }, [fileUrl, visible]);\n\n  var visibilityChanged = function (params) {\n    setVisible(params.isVisible);\n\n    if (params.isVisible) {\n      setFile(function (currentFile) {\n        return Object.assign({}, currentFile, {\n          shouldLoad: true\n        });\n      });\n    }\n  };\n\n  var containerRef = useIntersectionObserver({\n    onVisibilityChanged: visibilityChanged\n  });\n  var themeProps = typeof theme === 'string' ? {\n    direction: exports.TextDirection.LeftToRight,\n    theme: theme\n  } : theme;\n\n  var _v = React__namespace.useState(localization || DefaultLocalization),\n      l10n = _v[0],\n      setL10n = _v[1];\n\n  var localizationContext = {\n    l10n: l10n,\n    setL10n: setL10n\n  };\n  var themeContext = Object.assign({}, {\n    direction: themeProps.direction\n  }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n  React__namespace.useEffect(function () {\n    if (localization) {\n      setL10n(localization);\n    }\n  }, [localization]);\n  return React__namespace.createElement(LocalizationContext.Provider, {\n    value: localizationContext\n  }, React__namespace.createElement(ThemeContext.Provider, {\n    value: themeContext\n  }, React__namespace.createElement(\"div\", {\n    ref: containerRef,\n    className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme),\n    \"data-testid\": \"core__viewer\",\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, file.shouldLoad && React__namespace.createElement(DocumentLoader, {\n    characterMap: characterMap,\n    file: file.data,\n    httpHeaders: httpHeaders,\n    render: function (doc) {\n      return React__namespace.createElement(PageSizeCalculator, {\n        defaultScale: defaultScale,\n        doc: doc,\n        render: function (pageSizes, initialScale) {\n          return React__namespace.createElement(Inner, {\n            currentFile: {\n              data: file.data,\n              name: file.name\n            },\n            defaultScale: defaultScale,\n            doc: doc,\n            enableSmoothScroll: enableSmoothScroll,\n            initialPage: initialPage,\n            initialRotation: initialRotation,\n            initialScale: initialScale,\n            pageLayout: pageLayout,\n            pageSizes: pageSizes,\n            plugins: plugins,\n            renderPage: renderPage,\n            scrollMode: scrollMode,\n            setRenderRange: setRenderRange,\n            viewMode: viewMode,\n            viewerState: {\n              file: file,\n              fullScreenMode: exports.FullScreenMode.Normal,\n              pageIndex: -1,\n              pageHeight: pageSizes[0].pageHeight,\n              pageWidth: pageSizes[0].pageWidth,\n              pagesRotation: new Map(),\n              rotation: initialRotation,\n              scale: initialScale,\n              scrollMode: scrollMode,\n              viewMode: viewMode\n            },\n            onDocumentLoad: onDocumentLoad,\n            onOpenFile: openFile,\n            onPageChange: onPageChange,\n            onRotate: onRotate,\n            onRotatePage: onRotatePage,\n            onZoom: onZoom\n          });\n        },\n        scrollMode: scrollMode,\n        viewMode: viewMode\n      });\n    },\n    renderError: renderError,\n    renderLoader: renderLoader,\n    renderProtectedView: renderProtectedView,\n    transformGetDocumentParams: transformGetDocumentParams,\n    withCredentials: withCredentials,\n    onDocumentAskPassword: onDocumentAskPassword\n  }))));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LazyRender = LazyRender;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.chunk = chunk;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isFullScreenEnabled = isFullScreenEnabled;\nexports.isMac = isMac;\nexports.useDebounceCallback = useDebounceCallback;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\nexports.usePrevious = usePrevious;\nexports.useRenderQueue = useRenderQueue;","map":{"version":3,"names":["React","require","PdfJsApi","_interopNamespaceDefault","e","n","Object","create","keys","forEach","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","default","freeze","React__namespace","PdfJsApi__namespace","exports","AnnotationType","extendStatics","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","__assign","assign","t","s","i","arguments","length","apply","__spreadArray","to","from","pack","l","ar","slice","concat","TextDirection","ThemeContext","createContext","currentTheme","direction","LeftToRight","setCurrentTheme","classNames","classes","result","clazz","push","join","Button","_a","children","testId","onClick","useContext","isRtl","RightToLeft","attrs","createElement","className","type","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useIntersectionObserver","props","containerRef","useRef","once","threshold","onVisibilityChanged","container","current","intersectionTracker","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","unobserve","disconnect","observe","LazyRender","_b","useState","visible","setVisible","containerAttrs","handleVisibilityChanged","params","ref","Menu","visibleMenuItemsRef","handleKeyDown","key","preventDefault","moveToItem","_","currentIndex","items","getNextItem","findIndex","item","getAttribute","targetIndex","Math","min","max","setAttribute","focus","findVisibleItems","visibleItems","querySelectorAll","HTMLElement","parent_1","parentElement","getComputedStyle","display","document","addEventListener","removeEventListener","role","tabIndex","MenuDivider","Icon","ignoreDirection","_c","size","width","focusable","height","viewBox","CheckIcon","MenuItem","checked","icon","_d","isDisabled","MinimalButton","ariaLabel","ariaKeyShortcuts","_e","isSelected","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","Splitter","constrain","resizerRef","leftSideRef","rightSideRef","xRef","yRef","leftWidthRef","resizerWidthRef","eventOptions","capture","handleMouseMove","resizerEle","leftSide","rightSide","resizerWidth","dx","clientX","firstHalfSize","containerWidth","getBoundingClientRect","firstHalfPercentage","classList","add","secondHalfSize","secondHalfPercentage","body","handleMouseUp","remove","handleMouseDown","clientY","previousElementSibling","nextElementSibling","onMouseDown","TextBox","autoFocus","placeholder","_f","value","onChange","_g","onKeyDown","textboxRef","target","textboxEle","x","scrollX","y","scrollY","scrollTo","Api","defaultVendor","ExitFullScreen","FullScreenChange","FullScreenElement","FullScreenEnabled","RequestFullScreen","webkitVendor","msVendor","isBrowser","vendor","isFullScreenEnabled","addFullScreenChangeListener","handler","removeFullScreenChangeListener","exitFullScreen","element","Promise","resolve","getFullScreenElement","requestFullScreen","useDebounceCallback","callback","wait","timeout","cleanup","clearTimeout","useCallback","args","_i","setTimeout","useIsMounted","isMountedRef","usePrevious","PageRenderStatus","OUT_OF_RANGE_VISIBILITY","useRenderQueue","doc","numPages","docId","loadingTask","initialPageVisibilities","useMemo","fill","map","pageIndex","renderStatus","NotRenderedYet","visibility","latestRef","currentRenderingPage","startRange","endRange","visibilities","markNotRendered","markRendered","Rendered","markRendering","Rendering","setRange","startIndex","endIndex","setOutOfRange","setVisibility","getHighestPriorityPage","visiblePages","filter","firstVisiblePage","lastVisiblePage","numVisiblePages","isInRange","core","askingPassword","requirePasswordToOpen","submit","wrongPassword","tryAgain","pageLabel","enUs","DefaultLocalization","LocalizationContext","l10n","setL10n","id","uniqueId","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","clickedTarget","Element","shadowRoot","paths","composedPath","contains","useEscape","keyUpHandler","useLockScroll","originalStyle","overflow","ModalBody","ariaControlsSuffix","closeOnEscape","onToggle","contentRef","contentEle","maxHeight","clientHeight","ModalOverlay","ToggleStatus","useToggle","isOpened","opened","setOpened","toggle","status","Close","Open","Toggle","Portal","content","Fragment","Modal","controlsSuffix","renderTarget","renderContent","Position","calculatePosition","position","offset","targetRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","targetEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","innerRef","innerContentEle","innerId","PopoverOverlay","Popover","ariaHasPopup","lockScroll","TooltipBody","Tooltip","activeElement","close","open","onBlur","shouldHideTooltip","relatedTarget","currentTarget","onFocus","onMouseEnter","onMouseLeave","createStore","initialState","state","listeners","update","data","subscribe","unsubscribe","f","updateCurrentValue","updater","currentValue","undefined","FullScreenMode","LayerRenderStatus","PageMode","PasswordStatus","RotateDirection","ScrollMode","SpecialZoomLevel","ViewMode","chunk","arr","reduce","acc","isMac","test","navigator","platform","normalizeDestination","destArray","name","bottomOffset","viewportHeight","leftOffset","scaleTo","PageFit","PageWidth","pageOutlinesMap","Map","pagesMap","generateRefKey","outline","num","gen","getPageIndex","has","cacheOutlineRef","set","clearPagesCache","clear","getPage","reject","pageKey","page","then","getDestination","dest","res","outlineRef_1","useRunOnce","cb","condition","isCalledRef","useTrackResize","onResize","io","ResizeObserver","AnnotationBorderStyleType","dateRegex","RegExp","parse","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","getContents","annotation","contentsObj","str","contents","getTitle","titleObj","title","PopupWrapper","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","containerEle","annotationEle","querySelector","ele","zIndex","annotationType","Popup","split","index","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","viewport","rect","normalizeRect","r","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","transform","transformOrigin","Caret","Circle","preserveAspectRatio","version","cy","rx","ry","stroke","strokeWidth","getFileName","url","pop","downloadFile","blobUrl","URL","createObjectURL","Blob","link","href","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","ignoredParents","parentType","indexOf","parentId","parent","parseFloat","Highlight","childAnnotation","hasQuadPoints","quadPoints","annotations","quadPoint","ann","Ink","inkLists","inkList","points","Line","x1","lineCoordinates","x2","y1","y2","INVALID_PROTOCOL","HTML_ENTITIES","CTRL_CHARS","URL_SCHEME","decodeHtmlEntities","replace","dec","fromCharCode","sanitizeUrl","defaultUrl","trim","firstChar","parsedUrlScheme","match","scheme","Link","annotationContainerRef","outlines","scale","onExecuteNamedAction","onJumpFromLinkAnnotation","onJumpToDest","elementRef","find","action","annotationContainer","linkRect","setProperty","annotationLayerRect","removeProperty","bottom","label","unsafeUrl","targetUrl","rel","newWindow","Polygon","vertices","Polyline","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","toLowerCase","AnnotationLayerBody","plugins","rotation","getViewport","clonedViewPort","clone","dontFlip","filterAnnotations","plugin","onAnnotationLayerRender","AnnotationLoader","renderAnnotations","isMounted","loading","setStatus","getAnnotations","intent","AnnotationLayer","floatToRatio","limit","floor","a","c","numerator","denominator","middle","roundToDivide","remainder","MAX_CANVAS_SIZE","CanvasLayer","canvasLayerRef","onRenderCanvasCompleted","renderTask","task","cancel","canvasEle","removeAttribute","onCanvasLayerRender","PreRender","outputScale","devicePixelRatio","maxScale","sqrt","shouldScaleByCSS","possibleScale","hidden","canvasContext","getContext","alpha","render","promise","DidRender","SvgLayer","empty","innerHTML","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","TextLayer","onRenderTextCompleted","spans","span","breaks","br","onTextLayerRender","getTextContent","textContent","renderTextLayer","textContentSource","PageLayer","measureRef","pageRotation","pageSize","renderPage","renderQueueKey","shouldRender","viewMode","onRenderCompleted","onRotatePage","setPage","canvasLayerRendered","setCanvasLayerRendered","textLayerRendered","setTextLayerRendered","textLayerRef","isVertical","abs","scaledWidth","pageWidth","scaledHeight","pageHeight","w","h","rotationValue","renderQueueKeyRef","determinePageInstance","pdfPage","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","handleRenderCanvasCompleted","handleRenderTextCompleted","DualPage","DualPageWithCover","SinglePage","svgLayer","idx","getFileExt","rectReducer","useMeasureRect","setElement","initializedRectRef","useReducer","dispatch","tracker","ScrollDirection","easeOutQuart","pow","EPS","smoothScroll","scrollDirection","targetPosition","duration","easing","onReachTarget","reachTarget","Horizontal","scrollLeft","Both","scrollTop","Vertical","markTargetReached","startTime","requestId","loop","currentTime","time","percent","easedPercent","updatePosition","cancelAnimationFrame","requestAnimationFrame","ZERO_OFFSET$6","SCROLL_EVENT_OPTIONS","passive","SCROLL_DURATION","useScroll","enableSmoothScroll","onSmoothScroll","scrollOffset","setScrollOffset","factor","latestOffsetRef","isSmoothScrollingDoneRef","handleSmoothScrollingComplete","handleScroll","withSmoothScroll","clamp","indexOfMax","prev","curr","buildContainerStyles","totalSize","scrollMode","buildItemContainerStyles","parentRect","Page","start","hasDifferentSizes","sizes","numberOfItems","getMinWidthOfCover","chunkWidths","eachChunk","widths","buildItemStyles","sideProperty","_h","transformTop","minWidth","Wrapped","findNearest","low","high","getItemValue","calculateRange","measurements","outerSize","currentOffset","getOffset","startTop","end","topLeftCorner","visibleSize","ZERO_OFFSET$5","measure","totalWidth","firstOfRow","ZERO_OFFSET$4","measureDualPage","ZERO_OFFSET$3","measureDualPageWithCover","ZERO_OFFSET$2","measureSinglePage","ZERO_RECT$2","ZERO_OFFSET$1","COMPARE_EPSILON","VIRTUAL_INDEX_ATTR","IO_THRESHOLD","useVirtual","parentRef","setRenderRange","isSmoothScrolling","setSmoothScrolling","scrollModeRef","viewModeRef","defaultVisibilities","setVisibilities","indexAttribute","old","visiblePageVisibilities","maxVisbilityItem","maxVisbilityIndex","endPage","startPage","virtualItems","_loop_1","virtualItem","scrollToItem","normalizedIndex","measurement","withOffset","scrollToSmallestItemAbove","nextItem","nextIndex","scrollToBiggestItemBelow","prevIndex","found","scrollToNextItem","scrollToPreviousItem","getContainerStyles","getItemContainerStyles","getItemStyles","zoom","updateOffset","boundingClientRect","SCROLL_BAR_WIDTH","PAGE_PADDING","calculateScale","ActualSize","clientWidth","useStack","maxLength","stackRef","transformer","stack","lastItem","shift","useQueue","queueRef","dequeue","queue","firstItem","enqueue","MAX_QUEUE_LENGTH","useDestination","getCurrentPage","previousDestinations","nextDestinations","getNextDestination","nextDest","getPreviousDestination","prevDest","markVisitedDestination","destination","flaternSingleOutline","flaternOutlines","useOutlines","setOutlines","getOutline","RESIZE_EVENT_OPTIONS","ZERO_RECT$1","useWindowResize","windowRect","setWindowRect","handleResize","innerHeight","innerWidth","ZERO_RECT","useFullScreen","getCurrentScrollMode","jumpToPage","Normal","fullScreenMode","setFullScreenMode","setTargetRect","windowSizeBeforeFullScreenRef","targetPageRef","fullScreenSizeRef","fullScreenElementRef","closeOtherFullScreen","currentFullScreenEle","enterFullScreenMode","Entering","exitFullScreenMode","Exitting","handleFullScreenChange","backgroundColor","Entered","EnteredCompletely","Exited","DEFAULT_PAGE_LAYOUT","buildPageStyles","transformSize","ZERO_OFFSET","Inner","currentFile","defaultScale","initialPage","initialRotation","initialScale","pageLayout","pageSizes","viewerState","onDocumentLoad","onOpenFile","onPageChange","onRotate","onZoom","themeContext","pagesRef","currentPage","setCurrentPage","mostRecentVisitedRef","destinationManager","stateRef","setRotation","previousRotation","pagesRotationChanged","setPagesRotationChanged","pagesRotation","setPagesRotation","currentScrollMode","setCurrentScrollMode","previousScrollMode","currentViewMode","setCurrentViewMode","previousViewMode","setScale","previousScale","keepSpecialZoomLevelRef","forceTargetFullScreenRef","forceTargetZoomRef","forceTargetInitialPageRef","fullScreen","_j","renderPageIndex","setRenderPageIndex","_k","setRenderQueueKey","renderQueue","layoutBuilder","pageRect","virtualizer","handlePagesResize","setViewerState","newState","onViewerStateChange","getPagesContainer","getViewerState","handleJumpFromLinkAnnotation","handleJumpToDestination","pagesContainer","currentState","updateScale","jumpToDestination","jumpToNextDestination","nextDestination","jumpToPreviousDestination","lastDestination","jumpToNextPage","jumpToPreviousPage","openFile","reader","FileReader","readAsArrayBuffer","onload","bytes","Uint8Array","rotate","degrees","Backward","currentRotation","updateRotation","rotatePage","rotations","currentPageRotation","finalRotation","updateRotations","rotatedPage","switchScrollMode","switchViewMode","newScale","pagesEle","currentPageHeight","currentPageWidth","pluginMethods","install","uninstall","latestPage","renderNextPage","isFullScreen","_loop_2","handlePageRenderCompleted","nextPage","executeNamedAction","previousPage","renderViewer","chunks","subSlot","isCover","pagesContainerRef","renderSlot","LEVELS","decrease","currentLevel","RESERVE_HEIGHT","RESERVE_WIDTH","PageSizeCalculator","setState","queryPageSizes","all","parentEle","scaleWidth","scaleHeight","scaled","LoadingStatus","AskForPasswordState","_super","verifyPassword","passwordStatus","_this","AskingPassword","renderProtectedView","onDocumentAskPassword","password","setPassword","RequiredPassword","WrongPassword","CompletedState","FailureState","error","LoadingState","percentages","DocumentLoader","characterMap","httpHeaders","renderError","renderLoader","transformGetDocumentParams","withCredentials","docRef","worker","PDFWorker","now","cMapUrl","cMapPacked","isCompressed","transformParams","getDocument","onPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","onProgress","loaded","total","err","destroyed","message","destroy","isDarkMode","matchMedia","withTheme","theme","onSwitchTheme","initialTheme","prevTheme","media","isSameUrl","typeA","typeB","every","v","NUM_OVERSCAN_PAGES","DEFAULT_RENDER_RANGE","visiblePagesRange","Viewer","fileUrl","localization","_l","_m","_o","_p","_q","_r","_s","_t","shouldLoad","setFile","fileName","_u","prevFile","visibilityChanged","themeProps","_v","localizationContext","Provider","Worker","workerUrl","GlobalWorkerOptions","workerSrc"],"sources":["/Users/azavip/Desktop/Portf/node_modules/@react-pdf-viewer/core/lib/cjs/core.js"],"sourcesContent":["'use strict';\n\nvar React = require('react');\nvar PdfJsApi = require('pdfjs-dist');\n\nfunction _interopNamespaceDefault(e) {\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n.default = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespaceDefault(React);\nvar PdfJsApi__namespace = /*#__PURE__*/_interopNamespaceDefault(PdfJsApi);\n\nexports.AnnotationType = void 0;\n(function (AnnotationType) {\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(exports.AnnotationType || (exports.AnnotationType = {}));\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nexports.TextDirection = void 0;\n(function (TextDirection) {\n    TextDirection[\"RightToLeft\"] = \"RTL\";\n    TextDirection[\"LeftToRight\"] = \"LTR\";\n})(exports.TextDirection || (exports.TextDirection = {}));\nvar ThemeContext = React__namespace.createContext({\n    currentTheme: 'light',\n    direction: exports.TextDirection.LeftToRight,\n    setCurrentTheme: function () { },\n});\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar Button = function (_a) {\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__button': true,\n            'rpv-core__button--rtl': isRtl,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__namespace.useLayoutEffect : React__namespace.useEffect;\n\nvar useIntersectionObserver = function (props) {\n    var containerRef = React__namespace.useRef(null);\n    var once = props.once, threshold = props.threshold, onVisibilityChanged = props.onVisibilityChanged;\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var intersectionTracker = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n                if (isVisible && once) {\n                    intersectionTracker.unobserve(container);\n                    intersectionTracker.disconnect();\n                }\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        intersectionTracker.observe(container);\n        return function () {\n            intersectionTracker.unobserve(container);\n            intersectionTracker.disconnect();\n        };\n    }, []);\n    return containerRef;\n};\n\nvar LazyRender = function (_a) {\n    var attrs = _a.attrs, children = _a.children, testId = _a.testId;\n    var _b = React__namespace.useState(false), visible = _b[0], setVisible = _b[1];\n    var containerAttrs = testId ? __assign(__assign({}, attrs), { 'data-testid': testId }) : attrs;\n    var handleVisibilityChanged = function (params) {\n        if (params.isVisible) {\n            setVisible(true);\n        }\n    };\n    var containerRef = useIntersectionObserver({\n        once: true,\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    return (React__namespace.createElement(\"div\", __assign({ ref: containerRef }, containerAttrs), visible && children));\n};\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    var containerRef = React__namespace.useRef();\n    var visibleMenuItemsRef = React__namespace.useRef([]);\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var handleKeyDown = function (e) {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        switch (e.key) {\n            case 'Tab':\n                e.preventDefault();\n                break;\n            case 'ArrowDown':\n                e.preventDefault();\n                moveToItem(function (_, currentIndex) { return currentIndex + 1; });\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n                moveToItem(function (_, currentIndex) { return currentIndex - 1; });\n                break;\n            case 'End':\n                e.preventDefault();\n                moveToItem(function (items, _) { return items.length - 1; });\n                break;\n            case 'Home':\n                e.preventDefault();\n                moveToItem(function (_, __) { return 0; });\n                break;\n        }\n    };\n    var moveToItem = function (getNextItem) {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var items = visibleMenuItemsRef.current;\n        var currentIndex = items.findIndex(function (item) { return item.getAttribute('tabindex') === '0'; });\n        var targetIndex = Math.min(items.length - 1, Math.max(0, getNextItem(items, currentIndex)));\n        if (currentIndex >= 0 && currentIndex <= items.length - 1) {\n            items[currentIndex].setAttribute('tabindex', '-1');\n        }\n        items[targetIndex].setAttribute('tabindex', '0');\n        items[targetIndex].focus();\n    };\n    var findVisibleItems = function (container) {\n        var visibleItems = [];\n        container.querySelectorAll('.rpv-core__menu-item[role=\"menuitem\"]').forEach(function (item) {\n            if (item instanceof HTMLElement) {\n                var parent_1 = item.parentElement;\n                if (parent_1 === container) {\n                    visibleItems.push(item);\n                }\n                else {\n                    if (window.getComputedStyle(parent_1).display !== 'none') {\n                        visibleItems.push(item);\n                    }\n                }\n            }\n        });\n        return visibleItems;\n    };\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        var visibleItems = findVisibleItems(container);\n        visibleMenuItemsRef.current = visibleItems;\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        document.addEventListener('keydown', handleKeyDown);\n        return function () {\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, \"aria-orientation\": \"vertical\", className: classNames({\n            'rpv-core__menu': true,\n            'rpv-core__menu--rtl': isRtl,\n        }), role: \"menu\", tabIndex: 0 }, children));\n};\n\nvar MenuDivider = function () { return (React__namespace.createElement(\"div\", { \"aria-orientation\": \"horizontal\", className: \"rpv-core__menu-divider\", role: \"separator\" })); };\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.ignoreDirection, ignoreDirection = _b === void 0 ? false : _b, _c = _a.size, size = _c === void 0 ? 24 : _c;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = !ignoreDirection && direction === exports.TextDirection.RightToLeft;\n    var width = \"\".concat(size || 24, \"px\");\n    return (React__namespace.createElement(\"svg\", { \"aria-hidden\": \"true\", className: classNames({\n            'rpv-core__icon': true,\n            'rpv-core__icon--rtl': isRtl,\n        }), focusable: \"false\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" }))); };\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__menu-item': true,\n            'rpv-core__menu-item--disabled': isDisabled,\n            'rpv-core__menu-item--ltr': !isRtl,\n            'rpv-core__menu-item--rtl': isRtl,\n        }), role: \"menuitem\", tabIndex: -1, type: \"button\", onClick: onClick }, attrs),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-icon': true,\n                'rpv-core__menu-item-icon--ltr': !isRtl,\n                'rpv-core__menu-item-icon--rtl': isRtl,\n            }) }, icon),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-label': true,\n                'rpv-core__menu-item-label--ltr': !isRtl,\n                'rpv-core__menu-item-label--rtl': isRtl,\n            }) }, children),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__menu-item-check': true,\n                'rpv-core__menu-item-check--ltr': !isRtl,\n                'rpv-core__menu-item-check--rtl': isRtl,\n            }) }, checked && React__namespace.createElement(CheckIcon, null))));\n};\n\nvar MinimalButton = function (_a) {\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.ariaKeyShortcuts, ariaKeyShortcuts = _c === void 0 ? '' : _c, children = _a.children, _d = _a.isDisabled, isDisabled = _d === void 0 ? false : _d, _e = _a.isSelected, isSelected = _e === void 0 ? false : _e, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ \"aria-label\": ariaLabel }, (ariaKeyShortcuts && { 'aria-keyshortcuts': ariaKeyShortcuts }), (isDisabled && { 'aria-disabled': true }), { className: classNames({\n            'rpv-core__minimal-button': true,\n            'rpv-core__minimal-button--disabled': isDisabled,\n            'rpv-core__minimal-button--rtl': isRtl,\n            'rpv-core__minimal-button--selected': isSelected,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, testId = _a.testId, onClick = _a.onClick;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = testId ? { 'data-testid': testId } : {};\n    return (React__namespace.createElement(\"button\", __assign({ className: classNames({\n            'rpv-core__primary-button': true,\n            'rpv-core__primary-button--rtl': isRtl,\n        }), type: \"button\", onClick: onClick }, attrs), children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    return (React__namespace.createElement(\"div\", { className: classNames({\n            'rpv-core__progress-bar': true,\n            'rpv-core__progress-bar--rtl': isRtl,\n        }) },\n        React__namespace.createElement(\"div\", { className: \"rpv-core__progress-bar-progress\", style: { width: \"\".concat(progress, \"%\") } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () { return React__namespace.createElement(\"div\", { className: \"rpv-core__separator\" }); };\n\nvar Spinner = function (_a) {\n    var _b = _a.size, size = _b === void 0 ? '4rem' : _b, testId = _a.testId;\n    var _c = React__namespace.useState(false), visible = _c[0], setVisible = _c[1];\n    var attrs = testId ? { 'data-testid': testId } : {};\n    var handleVisibilityChanged = function (params) {\n        setVisible(params.isVisible);\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: handleVisibilityChanged,\n    });\n    return (React__namespace.createElement(\"div\", __assign({}, attrs, { className: classNames({\n            'rpv-core__spinner': true,\n            'rpv-core__spinner--animating': visible,\n        }), ref: containerRef, style: { height: size, width: size } })));\n};\n\nvar Splitter = function (_a) {\n    var constrain = _a.constrain;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var resizerRef = React__namespace.useRef();\n    var leftSideRef = React__namespace.useRef();\n    var rightSideRef = React__namespace.useRef();\n    var xRef = React__namespace.useRef(0);\n    var yRef = React__namespace.useRef(0);\n    var leftWidthRef = React__namespace.useRef(0);\n    var resizerWidthRef = React__namespace.useRef(0);\n    var eventOptions = {\n        capture: true,\n    };\n    var handleMouseMove = function (e) {\n        var resizerEle = resizerRef.current;\n        var leftSide = leftSideRef.current;\n        var rightSide = rightSideRef.current;\n        if (!resizerEle || !leftSide || !rightSide) {\n            return;\n        }\n        var resizerWidth = resizerWidthRef.current;\n        var dx = e.clientX - xRef.current;\n        var firstHalfSize = leftWidthRef.current + (isRtl ? -dx : dx);\n        var containerWidth = resizerEle.parentElement.getBoundingClientRect().width;\n        var firstHalfPercentage = (firstHalfSize * 100) / containerWidth;\n        resizerEle.classList.add('rpv-core__splitter--resizing');\n        if (constrain) {\n            var secondHalfSize = containerWidth - firstHalfSize - resizerWidth;\n            var secondHalfPercentage = (secondHalfSize * 100) / containerWidth;\n            if (!constrain({ firstHalfPercentage: firstHalfPercentage, firstHalfSize: firstHalfSize, secondHalfPercentage: secondHalfPercentage, secondHalfSize: secondHalfSize })) {\n                return;\n            }\n        }\n        leftSide.style.width = \"\".concat(firstHalfPercentage, \"%\");\n        document.body.classList.add('rpv-core__splitter-body--resizing');\n        leftSide.classList.add('rpv-core__splitter-sibling--resizing');\n        rightSide.classList.add('rpv-core__splitter-sibling--resizing');\n    };\n    var handleMouseUp = function (e) {\n        var resizerEle = resizerRef.current;\n        var leftSide = leftSideRef.current;\n        var rightSide = rightSideRef.current;\n        if (!resizerEle || !leftSide || !rightSide) {\n            return;\n        }\n        document.body.classList.remove('rpv-core__splitter-body--resizing');\n        resizerEle.classList.remove('rpv-core__splitter--resizing');\n        leftSide.classList.remove('rpv-core__splitter-sibling--resizing');\n        rightSide.classList.remove('rpv-core__splitter-sibling--resizing');\n        document.removeEventListener('mousemove', handleMouseMove, eventOptions);\n        document.removeEventListener('mouseup', handleMouseUp, eventOptions);\n    };\n    var handleMouseDown = function (e) {\n        var leftSide = leftSideRef.current;\n        if (!leftSide) {\n            return;\n        }\n        xRef.current = e.clientX;\n        yRef.current = e.clientY;\n        leftWidthRef.current = leftSide.getBoundingClientRect().width;\n        document.addEventListener('mousemove', handleMouseMove, eventOptions);\n        document.addEventListener('mouseup', handleMouseUp, eventOptions);\n    };\n    React__namespace.useEffect(function () {\n        var resizerEle = resizerRef.current;\n        if (!resizerEle) {\n            return;\n        }\n        resizerWidthRef.current = resizerEle.getBoundingClientRect().width;\n        leftSideRef.current = resizerEle.previousElementSibling;\n        rightSideRef.current = resizerEle.nextElementSibling;\n    }, []);\n    return React__namespace.createElement(\"div\", { ref: resizerRef, className: \"rpv-core__splitter\", onMouseDown: handleMouseDown });\n};\n\nvar TextBox = function (_a) {\n    var _b = _a.ariaLabel, ariaLabel = _b === void 0 ? '' : _b, _c = _a.autoFocus, autoFocus = _c === void 0 ? false : _c, _d = _a.placeholder, placeholder = _d === void 0 ? '' : _d, testId = _a.testId, _e = _a.type, type = _e === void 0 ? 'text' : _e, _f = _a.value, value = _f === void 0 ? '' : _f, onChange = _a.onChange, _g = _a.onKeyDown, onKeyDown = _g === void 0 ? function () { } : _g;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var textboxRef = React__namespace.useRef();\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var attrs = {\n        ref: textboxRef,\n        'data-testid': '',\n        'aria-label': ariaLabel,\n        className: classNames({\n            'rpv-core__textbox': true,\n            'rpv-core__textbox--rtl': isRtl,\n        }),\n        placeholder: placeholder,\n        value: value,\n        onChange: function (e) { return onChange(e.target.value); },\n        onKeyDown: onKeyDown,\n    };\n    if (testId) {\n        attrs['data-testid'] = testId;\n    }\n    useIsomorphicLayoutEffect(function () {\n        if (autoFocus) {\n            var textboxEle = textboxRef.current;\n            if (textboxEle) {\n                var x = window.scrollX;\n                var y = window.scrollY;\n                textboxEle.focus();\n                window.scrollTo(x, y);\n            }\n        }\n    }, []);\n    return type === 'text' ? React__namespace.createElement(\"input\", __assign({ type: \"text\" }, attrs)) : React__namespace.createElement(\"input\", __assign({ type: \"password\" }, attrs));\n};\n\nvar Api;\n(function (Api) {\n    Api[Api[\"ExitFullScreen\"] = 0] = \"ExitFullScreen\";\n    Api[Api[\"FullScreenChange\"] = 1] = \"FullScreenChange\";\n    Api[Api[\"FullScreenElement\"] = 2] = \"FullScreenElement\";\n    Api[Api[\"FullScreenEnabled\"] = 3] = \"FullScreenEnabled\";\n    Api[Api[\"RequestFullScreen\"] = 4] = \"RequestFullScreen\";\n})(Api || (Api = {}));\nvar defaultVendor = {\n    ExitFullScreen: 'exitFullscreen',\n    FullScreenChange: 'fullscreenchange',\n    FullScreenElement: 'fullscreenElement',\n    FullScreenEnabled: 'fullscreenEnabled',\n    RequestFullScreen: 'requestFullscreen',\n};\nvar webkitVendor = {\n    ExitFullScreen: 'webkitExitFullscreen',\n    FullScreenChange: 'webkitfullscreenchange',\n    FullScreenElement: 'webkitFullscreenElement',\n    FullScreenEnabled: 'webkitFullscreenEnabled',\n    RequestFullScreen: 'webkitRequestFullscreen',\n};\nvar msVendor = {\n    ExitFullScreen: 'msExitFullscreen',\n    FullScreenChange: 'msFullscreenChange',\n    FullScreenElement: 'msFullscreenElement',\n    FullScreenEnabled: 'msFullscreenEnabled',\n    RequestFullScreen: 'msRequestFullscreen',\n};\nvar isBrowser = typeof window !== 'undefined';\nvar vendor = isBrowser\n    ? (Api.FullScreenEnabled in document && defaultVendor) ||\n        (webkitVendor.FullScreenEnabled in document && webkitVendor) ||\n        (msVendor.FullScreenEnabled in document && msVendor) ||\n        defaultVendor\n    : defaultVendor;\nvar isFullScreenEnabled = function () {\n    return isBrowser && vendor.FullScreenEnabled in document && document[vendor.FullScreenEnabled] === true;\n};\nvar addFullScreenChangeListener = function (handler) {\n    if (isBrowser) {\n        document.addEventListener(vendor.FullScreenChange, handler);\n    }\n};\nvar removeFullScreenChangeListener = function (handler) {\n    if (isBrowser) {\n        document.removeEventListener(vendor.FullScreenChange, handler);\n    }\n};\nvar exitFullScreen = function (element) {\n    return isBrowser\n        ?\n            element[vendor.ExitFullScreen]()\n        : Promise.resolve({});\n};\nvar getFullScreenElement = function () {\n    return isBrowser ? document[vendor.FullScreenElement] : null;\n};\nvar requestFullScreen = function (element) {\n    if (isBrowser) {\n        element[vendor.RequestFullScreen]();\n    }\n};\n\nvar useDebounceCallback = function (callback, wait) {\n    var timeout = React__namespace.useRef();\n    var cleanup = function () {\n        if (timeout.current) {\n            clearTimeout(timeout.current);\n        }\n    };\n    React__namespace.useEffect(function () {\n        return function () { return cleanup(); };\n    }, []);\n    return React__namespace.useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        cleanup();\n        timeout.current = setTimeout(function () {\n            callback.apply(void 0, args);\n        }, wait);\n    }, [callback, wait]);\n};\n\nvar useIsMounted = function () {\n    var isMountedRef = React__namespace.useRef(false);\n    React__namespace.useEffect(function () {\n        isMountedRef.current = true;\n        return function () {\n            isMountedRef.current = false;\n        };\n    }, []);\n    return isMountedRef;\n};\n\nvar usePrevious = function (value) {\n    var ref = React__namespace.useRef(value);\n    React__namespace.useEffect(function () {\n        ref.current = value;\n    }, [value]);\n    return ref.current;\n};\n\nvar PageRenderStatus;\n(function (PageRenderStatus) {\n    PageRenderStatus[\"NotRenderedYet\"] = \"NotRenderedYet\";\n    PageRenderStatus[\"Rendering\"] = \"Rendering\";\n    PageRenderStatus[\"Rendered\"] = \"Rendered\";\n})(PageRenderStatus || (PageRenderStatus = {}));\nvar OUT_OF_RANGE_VISIBILITY = -9999;\nvar useRenderQueue = function (_a) {\n    var doc = _a.doc;\n    var numPages = doc.numPages;\n    var docId = doc.loadingTask.docId;\n    var initialPageVisibilities = React__namespace.useMemo(function () {\n        return Array(numPages)\n            .fill(null)\n            .map(function (_, pageIndex) { return ({\n            pageIndex: pageIndex,\n            renderStatus: PageRenderStatus.NotRenderedYet,\n            visibility: OUT_OF_RANGE_VISIBILITY,\n        }); });\n    }, [docId]);\n    var latestRef = React__namespace.useRef({\n        currentRenderingPage: -1,\n        startRange: 0,\n        endRange: numPages - 1,\n        visibilities: initialPageVisibilities,\n    });\n    var markNotRendered = function () {\n        for (var i = 0; i < numPages; i++) {\n            latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n        }\n    };\n    var markRendered = function (pageIndex) {\n        latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendered;\n    };\n    var markRendering = function (pageIndex) {\n        if (latestRef.current.currentRenderingPage !== -1 &&\n            latestRef.current.currentRenderingPage !== pageIndex &&\n            latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus ===\n                PageRenderStatus.Rendering) {\n            latestRef.current.visibilities[latestRef.current.currentRenderingPage].renderStatus =\n                PageRenderStatus.NotRenderedYet;\n        }\n        latestRef.current.visibilities[pageIndex].renderStatus = PageRenderStatus.Rendering;\n        latestRef.current.currentRenderingPage = pageIndex;\n    };\n    var setRange = function (startIndex, endIndex) {\n        latestRef.current.startRange = startIndex;\n        latestRef.current.endRange = endIndex;\n        for (var i = 0; i < numPages; i++) {\n            if (i < startIndex || i > endIndex) {\n                latestRef.current.visibilities[i].visibility = OUT_OF_RANGE_VISIBILITY;\n                latestRef.current.visibilities[i].renderStatus = PageRenderStatus.NotRenderedYet;\n            }\n        }\n    };\n    var setOutOfRange = function (pageIndex) {\n        setVisibility(pageIndex, OUT_OF_RANGE_VISIBILITY);\n    };\n    var setVisibility = function (pageIndex, visibility) {\n        latestRef.current.visibilities[pageIndex].visibility = visibility;\n    };\n    var getHighestPriorityPage = function () {\n        var visiblePages = latestRef.current.visibilities\n            .slice(latestRef.current.startRange, latestRef.current.endRange + 1)\n            .filter(function (item) { return item.visibility > OUT_OF_RANGE_VISIBILITY; });\n        if (!visiblePages.length) {\n            return -1;\n        }\n        var firstVisiblePage = visiblePages[0].pageIndex;\n        var lastVisiblePage = visiblePages[visiblePages.length - 1].pageIndex;\n        var numVisiblePages = visiblePages.length;\n        for (var i = 0; i < numVisiblePages; i++) {\n            if (visiblePages[i].renderStatus === PageRenderStatus.Rendering) {\n                return -1;\n            }\n            if (visiblePages[i].renderStatus === PageRenderStatus.NotRenderedYet) {\n                return visiblePages[i].pageIndex;\n            }\n        }\n        if (lastVisiblePage + 1 < numPages &&\n            latestRef.current.visibilities[lastVisiblePage + 1].renderStatus !== PageRenderStatus.Rendered) {\n            return lastVisiblePage + 1;\n        }\n        else if (firstVisiblePage - 1 >= 0 &&\n            latestRef.current.visibilities[firstVisiblePage - 1].renderStatus !== PageRenderStatus.Rendered) {\n            return firstVisiblePage - 1;\n        }\n        return -1;\n    };\n    var isInRange = function (pageIndex) {\n        return pageIndex >= latestRef.current.startRange && pageIndex <= latestRef.current.endRange;\n    };\n    return {\n        getHighestPriorityPage: getHighestPriorityPage,\n        isInRange: isInRange,\n        markNotRendered: markNotRendered,\n        markRendered: markRendered,\n        markRendering: markRendering,\n        setOutOfRange: setOutOfRange,\n        setRange: setRange,\n        setVisibility: setVisibility,\n    };\n};\n\nvar core = {\n\taskingPassword: {\n\t\trequirePasswordToOpen: \"This document requires a password to open\",\n\t\tsubmit: \"Submit\"\n\t},\n\twrongPassword: {\n\t\ttryAgain: \"The password is wrong. Please try again\"\n\t},\n\tpageLabel: \"Page {{pageIndex}}\"\n};\nvar enUs = {\n\tcore: core\n};\n\nvar DefaultLocalization = enUs;\nvar LocalizationContext = React__namespace.createContext({\n    l10n: DefaultLocalization,\n    setL10n: function () { },\n});\n\nvar id = 0;\nvar uniqueId = function () { return id++; };\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n    var clickHandler = function (e) {\n        var target = targetRef.current;\n        if (!target) {\n            return;\n        }\n        var clickedTarget = e.target;\n        if (clickedTarget instanceof Element && clickedTarget.shadowRoot) {\n            var paths = e.composedPath();\n            if (paths.length > 0 && !target.contains(paths[0])) {\n                onClickOutside();\n            }\n        }\n        else if (!target.contains(clickedTarget)) {\n            onClickOutside();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (!closeOnClickOutside) {\n            return;\n        }\n        var eventOptions = {\n            capture: true,\n        };\n        document.addEventListener('click', clickHandler, eventOptions);\n        return function () {\n            document.removeEventListener('click', clickHandler, eventOptions);\n        };\n    }, []);\n};\n\nvar useEscape = function (handler) {\n    var keyUpHandler = function (e) {\n        if (e.key === 'Escape') {\n            handler();\n        }\n    };\n    React__namespace.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () {\n            document.removeEventListener('keyup', keyUpHandler);\n        };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React__namespace.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var contentRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    useLockScroll();\n    useEscape(function () {\n        if (contentRef.current && closeOnEscape) {\n            onToggle();\n        }\n    });\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\n    useIsomorphicLayoutEffect(function () {\n        var contentEle = contentRef.current;\n        if (!contentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (contentEle.getBoundingClientRect().height >= maxHeight) {\n            contentEle.style.overflow = 'auto';\n            contentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n        }\n    }, []);\n    return (React__namespace.createElement(\"div\", { \"aria-modal\": \"true\", className: classNames({\n            'rpv-core__modal-body': true,\n            'rpv-core__modal-body--rtl': isRtl,\n        }), id: \"rpv-core__modal-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children;\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__modal-overlay\" }, children);\n};\n\nexports.ToggleStatus = void 0;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(exports.ToggleStatus || (exports.ToggleStatus = {}));\n\nvar useToggle = function (isOpened) {\n    var _a = React__namespace.useState(isOpened), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case exports.ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case exports.ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case exports.ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\n    var _c = useToggle(isOpened), opened = _c.opened, toggle = _c.toggle;\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        target && target(toggle, opened),\n        opened && content(toggle)));\n};\n\nvar Modal = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _b = _a.isOpened, isOpened = _b === void 0 ? false : _b, target = _a.target;\n    var controlsSuffix = ariaControlsSuffix || \"\".concat(uniqueId());\n    var renderTarget = function (toggle, opened) { return (React__namespace.createElement(\"div\", { \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": \"dialog\", \"aria-controls\": \"rpv-core__modal-body-\".concat(controlsSuffix) }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React__namespace.createElement(ModalOverlay, null,\n        React__namespace.createElement(ModalBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return React__namespace.createElement(Portal, { target: target ? renderTarget : null, content: renderContent, isOpened: isOpened });\n};\n\nexports.Position = void 0;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(exports.Position || (exports.Position = {}));\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case exports.Position.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case exports.Position.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case exports.Position.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case exports.Position.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case exports.Position.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case exports.Position.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case exports.Position.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case exports.Position.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case exports.Position.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case exports.Position.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + (offset.left || 0),\n        top: top + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n    useIsomorphicLayoutEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        var anchorEle = anchorRef.current;\n        if (!contentEle || !targetEle || !anchorEle) {\n            return;\n        }\n        var anchorRect = anchorEle.getBoundingClientRect();\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = \"\".concat(top - anchorRect.top, \"px\");\n        contentEle.style.left = \"\".concat(left - anchorRect.left, \"px\");\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    return (React__namespace.createElement(\"div\", { className: classNames((_b = {\n                'rpv-core__arrow': true,\n                'rpv-core__arrow--tl': position === exports.Position.TopLeft,\n                'rpv-core__arrow--tc': position === exports.Position.TopCenter,\n                'rpv-core__arrow--tr': position === exports.Position.TopRight,\n                'rpv-core__arrow--rt': position === exports.Position.RightTop,\n                'rpv-core__arrow--rc': position === exports.Position.RightCenter,\n                'rpv-core__arrow--rb': position === exports.Position.RightBottom,\n                'rpv-core__arrow--bl': position === exports.Position.BottomLeft,\n                'rpv-core__arrow--bc': position === exports.Position.BottomCenter,\n                'rpv-core__arrow--br': position === exports.Position.BottomRight,\n                'rpv-core__arrow--lt': position === exports.Position.LeftTop,\n                'rpv-core__arrow--lc': position === exports.Position.LeftCenter,\n                'rpv-core__arrow--lb': position === exports.Position.LeftBottom\n            },\n            _b[\"\".concat(customClassName)] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\n    var contentRef = React__namespace.useRef();\n    var innerRef = React__namespace.useRef();\n    var anchorRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    useIsomorphicLayoutEffect(function () {\n        var innerContentEle = innerRef.current;\n        if (!innerContentEle) {\n            return;\n        }\n        var maxHeight = document.body.clientHeight * 0.75;\n        if (innerContentEle.getBoundingClientRect().height >= maxHeight) {\n            innerContentEle.style.overflow = 'auto';\n            innerContentEle.style.maxHeight = \"\".concat(maxHeight, \"px\");\n        }\n    }, []);\n    var innerId = \"rpv-core__popover-body-inner-\".concat(ariaControlsSuffix);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { \"aria-describedby\": innerId, className: classNames({\n                'rpv-core__popover-body': true,\n                'rpv-core__popover-body--rtl': isRtl,\n            }), id: \"rpv-core__popover-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"dialog\", tabIndex: -1 },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__popover-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { id: innerId, ref: innerRef }, children))));\n};\n\nvar PopoverOverlay = function (_a) {\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\n    var containerRef = React__namespace.useRef();\n    useEscape(function () {\n        if (containerRef.current && closeOnEscape) {\n            onClose();\n        }\n    });\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__popover-overlay\", ref: containerRef });\n};\n\nvar Popover = function (_a) {\n    var _b = _a.ariaHasPopup, ariaHasPopup = _b === void 0 ? 'dialog' : _b, ariaControlsSuffix = _a.ariaControlsSuffix, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, _c = _a.lockScroll, lockScroll = _c === void 0 ? true : _c, offset = _a.offset, position = _a.position, target = _a.target;\n    var _d = useToggle(false), opened = _d.opened, toggle = _d.toggle;\n    var targetRef = React__namespace.useRef();\n    var controlsSuffix = React__namespace.useMemo(function () { return ariaControlsSuffix || \"\".concat(uniqueId()); }, []);\n    return (React__namespace.createElement(\"div\", { ref: targetRef, \"aria-expanded\": opened ? 'true' : 'false', \"aria-haspopup\": ariaHasPopup, \"aria-controls\": \"rpv-core__popver-body-\".concat(controlsSuffix) },\n        target(toggle, opened),\n        opened && (React__namespace.createElement(React__namespace.Fragment, null,\n            lockScroll && React__namespace.createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\n            React__namespace.createElement(PopoverBody, { ariaControlsSuffix: controlsSuffix, closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle))))));\n};\n\nvar TooltipBody = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, children = _a.children, contentRef = _a.contentRef, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var anchorRef = React__namespace.useRef();\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__tooltip-body': true,\n                'rpv-core__tooltip-body--rtl': isRtl,\n            }), id: \"rpv-core__tooltip-body-\".concat(ariaControlsSuffix), ref: contentRef, role: \"tooltip\" },\n            React__namespace.createElement(Arrow, { customClassName: \"rpv-core__tooltip-body-arrow\", position: position }),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__tooltip-body-content\" }, children))));\n};\n\nvar Tooltip = function (_a) {\n    var ariaControlsSuffix = _a.ariaControlsSuffix, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var _b = useToggle(false), opened = _b.opened, toggle = _b.toggle;\n    var targetRef = React__namespace.useRef();\n    var contentRef = React__namespace.useRef();\n    var controlsSuffix = React__namespace.useMemo(function () { return ariaControlsSuffix || \"\".concat(uniqueId()); }, []);\n    useEscape(function () {\n        if (targetRef.current && document.activeElement && targetRef.current.contains(document.activeElement)) {\n            close();\n        }\n    });\n    var open = function () {\n        toggle(exports.ToggleStatus.Open);\n    };\n    var close = function () {\n        toggle(exports.ToggleStatus.Close);\n    };\n    var onBlur = function (e) {\n        var shouldHideTooltip = e.relatedTarget instanceof HTMLElement &&\n            e.currentTarget.parentElement &&\n            e.currentTarget.parentElement.contains(e.relatedTarget);\n        if (shouldHideTooltip) {\n            if (contentRef.current) {\n                contentRef.current.style.display = 'none';\n            }\n        }\n        else {\n            close();\n        }\n    };\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { ref: targetRef, \"aria-describedby\": \"rpv-core__tooltip-body-\".concat(controlsSuffix), onBlur: onBlur, onFocus: open, onMouseEnter: open, onMouseLeave: close }, target),\n        opened && (React__namespace.createElement(TooltipBody, { ariaControlsSuffix: controlsSuffix, contentRef: contentRef, offset: offset, position: position, targetRef: targetRef }, content()))));\n};\n\nfunction createStore(initialState) {\n    var state = initialState || {};\n    var listeners = {};\n    var update = function (key, data) {\n        var _a;\n        state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n        (listeners[key] || []).forEach(function (handler) { return handler(state[key]); });\n    };\n    var get = function (key) { return state[key]; };\n    return {\n        subscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).concat(handler);\n        },\n        unsubscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).filter(function (f) { return f !== handler; });\n        },\n        update: function (key, data) {\n            update(key, data);\n        },\n        updateCurrentValue: function (key, updater) {\n            var currentValue = get(key);\n            if (currentValue !== undefined) {\n                update(key, updater(currentValue));\n            }\n        },\n        get: function (key) {\n            return get(key);\n        },\n    };\n}\n\nexports.FullScreenMode = void 0;\n(function (FullScreenMode) {\n    FullScreenMode[\"Normal\"] = \"Normal\";\n    FullScreenMode[\"Entering\"] = \"Entering\";\n    FullScreenMode[\"Entered\"] = \"Entered\";\n    FullScreenMode[\"EnteredCompletely\"] = \"EnteredCompletely\";\n    FullScreenMode[\"Exitting\"] = \"Exitting\";\n    FullScreenMode[\"Exited\"] = \"Exited\";\n})(exports.FullScreenMode || (exports.FullScreenMode = {}));\n\nexports.LayerRenderStatus = void 0;\n(function (LayerRenderStatus) {\n    LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n    LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(exports.LayerRenderStatus || (exports.LayerRenderStatus = {}));\n\nexports.PageMode = void 0;\n(function (PageMode) {\n    PageMode[\"Attachments\"] = \"UseAttachments\";\n    PageMode[\"Bookmarks\"] = \"UseOutlines\";\n    PageMode[\"ContentGroup\"] = \"UseOC\";\n    PageMode[\"Default\"] = \"UserNone\";\n    PageMode[\"FullScreen\"] = \"FullScreen\";\n    PageMode[\"Thumbnails\"] = \"UseThumbs\";\n})(exports.PageMode || (exports.PageMode = {}));\n\nexports.PasswordStatus = void 0;\n(function (PasswordStatus) {\n    PasswordStatus[\"RequiredPassword\"] = \"RequiredPassword\";\n    PasswordStatus[\"WrongPassword\"] = \"WrongPassword\";\n})(exports.PasswordStatus || (exports.PasswordStatus = {}));\n\nexports.RotateDirection = void 0;\n(function (RotateDirection) {\n    RotateDirection[\"Backward\"] = \"Backward\";\n    RotateDirection[\"Forward\"] = \"Forward\";\n})(exports.RotateDirection || (exports.RotateDirection = {}));\n\nexports.ScrollMode = void 0;\n(function (ScrollMode) {\n    ScrollMode[\"Page\"] = \"Page\";\n    ScrollMode[\"Horizontal\"] = \"Horizontal\";\n    ScrollMode[\"Vertical\"] = \"Vertical\";\n    ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(exports.ScrollMode || (exports.ScrollMode = {}));\n\nexports.SpecialZoomLevel = void 0;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(exports.SpecialZoomLevel || (exports.SpecialZoomLevel = {}));\n\nexports.ViewMode = void 0;\n(function (ViewMode) {\n    ViewMode[\"DualPage\"] = \"DualPage\";\n    ViewMode[\"DualPageWithCover\"] = \"DualPageWithCover\";\n    ViewMode[\"SinglePage\"] = \"SinglePage\";\n})(exports.ViewMode || (exports.ViewMode = {}));\n\nvar chunk = function (arr, size) {\n    return arr.reduce(function (acc, e, i) { return (i % size ? acc[acc.length - 1].push(e) : acc.push([e]), acc); }, []);\n};\n\nvar isMac = function () { return (typeof window !== 'undefined' ? /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) : false); };\n\nvar normalizeDestination = function (pageIndex, destArray) {\n    switch (destArray[1].name) {\n        case 'XYZ':\n            return {\n                bottomOffset: function (_, viewportHeight) {\n                    return destArray[3] === null ? viewportHeight : destArray[3];\n                },\n                leftOffset: function (_, __) { return (destArray[2] === null ? 0 : destArray[2]); },\n                pageIndex: pageIndex,\n                scaleTo: destArray[4],\n            };\n        case 'Fit':\n        case 'FitB':\n            return {\n                bottomOffset: 0,\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: exports.SpecialZoomLevel.PageFit,\n            };\n        case 'FitH':\n        case 'FitBH':\n            return {\n                bottomOffset: destArray[2],\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: exports.SpecialZoomLevel.PageWidth,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                leftOffset: 0,\n                pageIndex: pageIndex,\n                scaleTo: 1,\n            };\n    }\n};\nvar pageOutlinesMap = new Map();\nvar pagesMap = new Map();\nvar generateRefKey = function (doc, outline) {\n    return \"\".concat(doc.loadingTask.docId, \"___\").concat(outline.num, \"R\").concat(outline.gen === 0 ? '' : outline.gen);\n};\nvar getPageIndex = function (doc, outline) {\n    var key = generateRefKey(doc, outline);\n    return pageOutlinesMap.has(key) ? pageOutlinesMap.get(key) : null;\n};\nvar cacheOutlineRef = function (doc, outline, pageIndex) {\n    pageOutlinesMap.set(generateRefKey(doc, outline), pageIndex);\n};\nvar clearPagesCache = function () {\n    pageOutlinesMap.clear();\n    pagesMap.clear();\n};\nvar getPage = function (doc, pageIndex) {\n    if (!doc) {\n        return Promise.reject('The document is not loaded yet');\n    }\n    var pageKey = \"\".concat(doc.loadingTask.docId, \"___\").concat(pageIndex);\n    var page = pagesMap.get(pageKey);\n    if (page) {\n        return Promise.resolve(page);\n    }\n    return new Promise(function (resolve, _) {\n        doc.getPage(pageIndex + 1).then(function (page) {\n            pagesMap.set(pageKey, page);\n            if (page.ref) {\n                cacheOutlineRef(doc, page.ref, pageIndex);\n            }\n            resolve(page);\n        });\n    });\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            if ('object' === typeof destArray[0] && destArray[0] !== null) {\n                var outlineRef_1 = destArray[0];\n                var pageIndex = getPageIndex(doc, outlineRef_1);\n                if (pageIndex === null) {\n                    doc.getPageIndex(outlineRef_1).then(function (pageIndex) {\n                        cacheOutlineRef(doc, outlineRef_1, pageIndex);\n                        getDestination(doc, dest).then(function (result) { return res(result); });\n                    });\n                }\n                else {\n                    res(normalizeDestination(pageIndex, destArray));\n                }\n            }\n            else {\n                var target = normalizeDestination(destArray[0], destArray);\n                res(target);\n            }\n        });\n    });\n};\n\nvar useRunOnce = function (cb, condition) {\n    var isCalledRef = React__namespace.useRef(false);\n    useIsomorphicLayoutEffect(function () {\n        if (condition && !isCalledRef.current) {\n            isCalledRef.current = true;\n            cb();\n        }\n    }, [cb, condition]);\n};\n\nvar useTrackResize = function (_a) {\n    var targetRef = _a.targetRef, onResize = _a.onResize;\n    useIsomorphicLayoutEffect(function () {\n        var io = new ResizeObserver(function (entries) {\n            entries.forEach(function (entry) {\n                onResize(entry.target);\n            });\n        });\n        var container = targetRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n};\n\nvar AnnotationBorderStyleType;\n(function (AnnotationBorderStyleType) {\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    \"'?\" +\n    '(\\\\d{2})?' +\n    \"'?\");\nvar parse = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse(matches[2], 1, 12, 1) - 1;\n    var day = parse(matches[3], 1, 31, 1);\n    var hour = parse(matches[4], 0, 23, 0);\n    var minute = parse(matches[5], 0, 59, 0);\n    var second = parse(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse(matches[8], 0, 23, 0);\n    var offsetMinute = parse(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar getContents = function (annotation) {\n    return annotation.contentsObj ? annotation.contentsObj.str : annotation.contents || '';\n};\n\nvar getTitle = function (annotation) {\n    return annotation.titleObj ? annotation.titleObj.str : annotation.title || '';\n};\n\nvar PopupWrapper = function (_a) {\n    var annotation = _a.annotation;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var containerRef = React__namespace.useRef();\n    var dateStr = '';\n    if (annotation.modificationDate) {\n        var date = convertDate(annotation.modificationDate);\n        dateStr = date ? \"\".concat(date.toLocaleDateString(), \", \").concat(date.toLocaleTimeString()) : '';\n    }\n    React__namespace.useLayoutEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var annotationEle = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n        if (!annotationEle) {\n            return;\n        }\n        var ele = annotationEle;\n        ele.style.zIndex += 1;\n        return function () {\n            ele.style.zIndex = \"\".concat(parseInt(ele.style.zIndex, 10) - 1);\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: classNames({\n            'rpv-core__annotation-popup-wrapper': true,\n            'rpv-core__annotation-popup-wrapper--rtl': isRtl,\n        }), style: {\n            top: annotation.annotationType === exports.AnnotationType.Popup ? '' : '100%',\n        } },\n        title && (React__namespace.createElement(React__namespace.Fragment, null,\n            React__namespace.createElement(\"div\", { className: classNames({\n                    'rpv-core__annotation-popup-title': true,\n                    'rpv-core__annotation-popup-title--ltr': !isRtl,\n                    'rpv-core__annotation-popup-title--rtl': isRtl,\n                }) }, title),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-date\" }, dateStr))),\n        contents && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-popup-content\" }, contents.split('\\n').map(function (item, index) { return (React__namespace.createElement(React__namespace.Fragment, { key: index },\n            item,\n            React__namespace.createElement(\"br\", null))); })))));\n};\n\nvar TogglePopupBy;\n(function (TogglePopupBy) {\n    TogglePopupBy[\"Click\"] = \"Click\";\n    TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\nvar useTogglePopup = function () {\n    var _a = useToggle(false), opened = _a.opened, toggle = _a.toggle;\n    var _b = React__namespace.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\n    var toggleOnClick = function () {\n        switch (togglePopupBy) {\n            case TogglePopupBy.Click:\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\n                toggle(exports.ToggleStatus.Toggle);\n                break;\n            case TogglePopupBy.Hover:\n                setTooglePopupBy(TogglePopupBy.Click);\n                toggle(exports.ToggleStatus.Open);\n                break;\n        }\n    };\n    var openOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Open);\n    };\n    var closeOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(exports.ToggleStatus.Close);\n    };\n    return {\n        opened: opened,\n        closeOnHover: closeOnHover,\n        openOnHover: openOnHover,\n        toggleOnClick: toggleOnClick,\n    };\n};\n\nvar Annotation = function (_a) {\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\n    var rect = annotation.rect;\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\n    var normalizeRect = function (r) { return [\n        Math.min(r[0], r[2]),\n        Math.min(r[1], r[3]),\n        Math.max(r[0], r[2]),\n        Math.max(r[1], r[3]),\n    ]; };\n    var bound = normalizeRect([\n        rect[0],\n        page.view[3] + page.view[1] - rect[1],\n        rect[2],\n        page.view[3] + page.view[1] - rect[3],\n    ]);\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var styles = {\n        borderColor: '',\n        borderRadius: '',\n        borderStyle: '',\n        borderWidth: '',\n    };\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\n        switch (annotation.borderStyle.style) {\n            case AnnotationBorderStyleType.Dashed:\n                styles.borderStyle = 'dashed';\n                break;\n            case AnnotationBorderStyleType.Solid:\n                styles.borderStyle = 'solid';\n                break;\n            case AnnotationBorderStyleType.Underline:\n                styles = Object.assign({\n                    borderBottomStyle: 'solid',\n                }, styles);\n                break;\n            case AnnotationBorderStyleType.Beveled:\n            case AnnotationBorderStyleType.Inset:\n        }\n        var borderWidth = annotation.borderStyle.width;\n        styles.borderWidth = \"\".concat(borderWidth, \"px\");\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType.Underline) {\n            width = width - 2 * borderWidth;\n            height = height - 2 * borderWidth;\n        }\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n            styles.borderRadius = \"\".concat(horizontalCornerRadius, \"px / \").concat(verticalCornerRadius, \"px\");\n        }\n        annotation.color\n            ? (styles.borderColor = \"rgb(\".concat(annotation.color[0] | 0, \", \").concat(annotation.color[1] | 0, \", \").concat(annotation.color[2] | 0, \")\"))\n            :\n                (styles.borderWidth = '0');\n    }\n    return (React__namespace.createElement(React__namespace.Fragment, null, isRenderable &&\n        children({\n            popup: {\n                opened: opened,\n                closeOnHover: closeOnHover,\n                openOnHover: openOnHover,\n                toggleOnClick: toggleOnClick,\n            },\n            slot: {\n                attrs: {\n                    style: Object.assign({\n                        height: \"\".concat(height, \"px\"),\n                        left: \"\".concat(bound[0], \"px\"),\n                        top: \"\".concat(bound[1], \"px\"),\n                        transform: \"matrix(\".concat(viewport.transform.join(','), \")\"),\n                        transformOrigin: \"-\".concat(bound[0], \"px -\").concat(bound[1], \"px\"),\n                        width: \"\".concat(width, \"px\"),\n                    }, styles),\n                },\n                children: React__namespace.createElement(React__namespace.Fragment, null, hasPopup && opened && React__namespace.createElement(PopupWrapper, { annotation: annotation })),\n            },\n        })));\n};\n\nvar Caret = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Circle = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"circle\", { cy: height / 2, fill: \"none\", rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: \"transparent\", strokeWidth: borderWidth || 1 })),\n        props.slot.children)); }));\n};\n\nvar getFileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', getFileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar FileAttachment = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var hasPopup = annotation.hasPopup === false && (!!title || !!contents);\n    var doubleClick = function () {\n        var file = annotation.file;\n        file && downloadFile(file.filename, file.content);\n    };\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar FreeText = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Popup = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(title || contents);\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n    useIsomorphicLayoutEffect(function () {\n        if (!annotation.parentId) {\n            return;\n        }\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.parentId, \"\\\"]\"));\n        var container = document.querySelector(\"[data-annotation-id=\\\"\".concat(annotation.id, \"\\\"]\"));\n        if (!parent || !container) {\n            return;\n        }\n        var left = parseFloat(parent.style.left);\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n        container.style.left = \"\".concat(left, \"px\");\n        container.style.top = \"\".concat(top, \"px\");\n        container.style.transformOrigin = \"-\".concat(left, \"px -\").concat(top, \"px\");\n    }, []);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--popup\", \"data-annotation-id\": annotation.id }),\n        React__namespace.createElement(PopupWrapper, { annotation: annotation }))); }));\n};\n\nvar Highlight = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var hasQuadPoints = annotation.quadPoints && annotation.quadPoints.length > 0;\n    if (hasQuadPoints) {\n        var annotations = annotation.quadPoints.map(function (quadPoint) {\n            return Object.assign({}, annotation, {\n                rect: [quadPoint[2].x, quadPoint[2].y, quadPoint[1].x, quadPoint[1].y],\n                quadPoints: [],\n            });\n        });\n        return (React__namespace.createElement(React__namespace.Fragment, null, annotations.map(function (ann, index) { return (React__namespace.createElement(Highlight, { key: index, annotation: ann, childAnnotation: childAnnotation, page: page, viewport: viewport })); })));\n    }\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Ink = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.inkLists && annotation.inkLists.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") }, annotation.inkLists.map(function (inkList, index) { return (React__namespace.createElement(\"polyline\", { key: index, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); }).join(' ') })); }))),\n        props.slot.children)); }));\n};\n\nvar Line = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"line\", { stroke: \"transparent\", strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\n        props.slot.children)); }));\n};\n\nvar INVALID_PROTOCOL = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar HTML_ENTITIES = /&#(\\w+)(^\\w|;)?/g;\nvar CTRL_CHARS = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar URL_SCHEME = /^([^:]+):/gm;\nvar decodeHtmlEntities = function (str) { return str.replace(HTML_ENTITIES, function (_, dec) { return String.fromCharCode(dec); }); };\nvar sanitizeUrl = function (url, defaultUrl) {\n    if (defaultUrl === void 0) { defaultUrl = 'about:blank'; }\n    var result = decodeHtmlEntities(url || '')\n        .replace(CTRL_CHARS, '')\n        .trim();\n    if (!result) {\n        return defaultUrl;\n    }\n    var firstChar = result[0];\n    if (firstChar === '.' || firstChar === '/') {\n        return result;\n    }\n    var parsedUrlScheme = result.match(URL_SCHEME);\n    if (!parsedUrlScheme) {\n        return result;\n    }\n    var scheme = parsedUrlScheme[0];\n    return INVALID_PROTOCOL.test(scheme) ? defaultUrl : result;\n};\n\nvar Link = function (_a) {\n    var _b;\n    var annotation = _a.annotation, annotationContainerRef = _a.annotationContainerRef, doc = _a.doc, outlines = _a.outlines, page = _a.page, pageIndex = _a.pageIndex, scale = _a.scale, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation, onJumpToDest = _a.onJumpToDest;\n    var elementRef = React__namespace.useRef();\n    var title = outlines && outlines.length && annotation.dest && typeof annotation.dest === 'string'\n        ? (_b = outlines.find(function (item) { return item.dest === annotation.dest; })) === null || _b === void 0 ? void 0 : _b.title\n        : '';\n    var link = function (e) {\n        e.preventDefault();\n        annotation.action\n            ? onExecuteNamedAction(annotation.action)\n            : getDestination(doc, annotation.dest).then(function (target) {\n                var element = elementRef.current;\n                var annotationContainer = annotationContainerRef.current;\n                if (element && annotationContainer) {\n                    var linkRect = element.getBoundingClientRect();\n                    annotationContainer.style.setProperty('height', '100%');\n                    annotationContainer.style.setProperty('width', '100%');\n                    var annotationLayerRect = annotationContainer.getBoundingClientRect();\n                    annotationContainer.style.removeProperty('height');\n                    annotationContainer.style.removeProperty('width');\n                    var leftOffset = (linkRect.left - annotationLayerRect.left) / scale;\n                    var bottomOffset = (annotationLayerRect.bottom - linkRect.bottom + linkRect.height) / scale;\n                    onJumpFromLinkAnnotation({\n                        bottomOffset: bottomOffset,\n                        label: title,\n                        leftOffset: leftOffset,\n                        pageIndex: pageIndex,\n                    });\n                }\n                onJumpToDest(target);\n            });\n    };\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action || annotation.unsafeUrl);\n    var attrs = {};\n    if (annotation.url || annotation.unsafeUrl) {\n        var targetUrl = sanitizeUrl(annotation.url || annotation.unsafeUrl, '');\n        if (targetUrl) {\n            attrs = {\n                'data-target': 'external',\n                href: targetUrl,\n                rel: 'noopener noreferrer nofollow',\n                target: annotation.newWindow ? '_blank' : '',\n                title: targetUrl,\n            };\n        }\n        else {\n            isRenderable = false;\n        }\n    }\n    else {\n        attrs = {\n            href: '',\n            'data-annotation-link': annotation.id,\n            onClick: link,\n        };\n    }\n    if (title) {\n        attrs = Object.assign({}, attrs, {\n            title: title,\n            'aria-label': title,\n        });\n    }\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--link\", \"data-annotation-id\": annotation.id, \"data-testid\": \"core__annotation--link-\".concat(annotation.id) }),\n        React__namespace.createElement(\"a\", __assign({ ref: elementRef }, attrs)))); }));\n};\n\nvar Polygon = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"polygon\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Polyline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"polyline\", { fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, points: annotation.vertices\n                    .map(function (item) { return \"\".concat(item.x - rect[0], \",\").concat(rect[3] - item.y); })\n                    .join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Square = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__namespace.createElement(\"svg\", { height: \"\".concat(height, \"px\"), preserveAspectRatio: \"none\", version: \"1.1\", viewBox: \"0 0 \".concat(width, \" \").concat(height), width: \"\".concat(width, \"px\") },\n            React__namespace.createElement(\"rect\", { height: height - borderWidth, fill: \"none\", stroke: \"transparent\", strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\n        props.slot.children)); }));\n};\n\nvar Squiggly = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Stamp = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar StrikeOut = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar CommentIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25\" }),\n    React__namespace.createElement(\"path\", { d: \"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75\" }),\n    React__namespace.createElement(\"path\", { d: \"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25\" }))); };\n\nvar HelpIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M21.423 5.406L17.415 9.414\" }),\n    React__namespace.createElement(\"path\", { d: \"M14.587 6.585L18.607 2.565\" }),\n    React__namespace.createElement(\"path\", { d: \"M5.405 21.424L9.413 17.416\" }),\n    React__namespace.createElement(\"path\", { d: \"M6.585 14.588L2.577 18.596\" }),\n    React__namespace.createElement(\"path\", { d: \"M18.602 21.419L14.595 17.412\" }),\n    React__namespace.createElement(\"path\", { d: \"M17.419 14.58L21.428 18.589\" }),\n    React__namespace.createElement(\"path\", { d: \"M2.582 5.399L6.588 9.406\" }),\n    React__namespace.createElement(\"path\", { d: \"M9.421 6.581L5.412 2.572\" }))); };\n\nvar KeyIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z\" }))); };\n\nvar NoteIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z\" }),\n    React__namespace.createElement(\"path\", { d: \"M6 4.5L6 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M18 4.5L18 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M10 4.5L10 0.5\" }),\n    React__namespace.createElement(\"path\", { d: \"M14 4.5L14 0.5\" }))); };\n\nvar ParagraphIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M17.5 0.498L17.5 23.498\" }),\n    React__namespace.createElement(\"path\", { d: \"M10.5 0.498L10.5 23.498\" }),\n    React__namespace.createElement(\"path\", { d: \"M23.5.5H6.5a6,6,0,0,0,0,12h4\" }))); };\n\nvar TriangleIcon = function () { return (React__namespace.createElement(Icon, { size: 16 },\n    React__namespace.createElement(\"path\", { d: \"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z\" }))); };\n\nvar Text = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n            name && (React__namespace.createElement(\"div\", { className: \"rpv-core__annotation-text-icon\" },\n                name === 'check' && React__namespace.createElement(CheckIcon, null),\n                name === 'comment' && React__namespace.createElement(CommentIcon, null),\n                name === 'help' && React__namespace.createElement(HelpIcon, null),\n                name === 'insert' && React__namespace.createElement(TriangleIcon, null),\n                name === 'key' && React__namespace.createElement(KeyIcon, null),\n                name === 'note' && React__namespace.createElement(NoteIcon, null),\n                (name === 'newparagraph' || name === 'paragraph') && React__namespace.createElement(ParagraphIcon, null))),\n            props.slot.children),\n        childAnnotation &&\n            childAnnotation.annotationType === exports.AnnotationType.Popup &&\n            props.popup.opened && React__namespace.createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport }))); }));\n};\n\nvar Underline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var hasPopup = annotation.hasPopup === false;\n    var title = getTitle(annotation);\n    var contents = getContents(annotation);\n    var isRenderable = !!(annotation.hasPopup || title || contents);\n    return (React__namespace.createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__namespace.createElement(\"div\", __assign({}, props.slot.attrs, { className: \"rpv-core__annotation rpv-core__annotation--underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar AnnotationLayerBody = function (_a) {\n    var annotations = _a.annotations, doc = _a.doc, outlines = _a.outlines, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation, onJumpToDest = _a.onJumpToDest;\n    var containerRef = React__namespace.useRef();\n    var viewport = page.getViewport({ rotation: rotation, scale: scale });\n    var clonedViewPort = viewport.clone({ dontFlip: true });\n    var filterAnnotations = annotations.filter(function (annotation) { return !annotation.parentId; });\n    useIsomorphicLayoutEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        plugins.forEach(function (plugin) {\n            if (plugin.onAnnotationLayerRender) {\n                plugin.onAnnotationLayerRender({\n                    annotations: filterAnnotations,\n                    container: container,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                });\n            }\n        });\n    }, []);\n    return (React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__annotation-layer\", \"data-testid\": \"core__annotation-layer-\".concat(pageIndex) }, filterAnnotations.map(function (annotation) {\n        var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\n        switch (annotation.annotationType) {\n            case exports.AnnotationType.Caret:\n                return (React__namespace.createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Circle:\n                return (React__namespace.createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.FileAttachment:\n                return (React__namespace.createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.FreeText:\n                return (React__namespace.createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Highlight:\n                return (React__namespace.createElement(Highlight, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Ink:\n                return (React__namespace.createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Line:\n                return (React__namespace.createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Link:\n                return (React__namespace.createElement(Link, { key: annotation.id, annotation: annotation, annotationContainerRef: containerRef, doc: doc, outlines: outlines, page: page, pageIndex: pageIndex, scale: scale, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpFromLinkAnnotation: onJumpFromLinkAnnotation, onJumpToDest: onJumpToDest }));\n            case exports.AnnotationType.Polygon:\n                return (React__namespace.createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Polyline:\n                return (React__namespace.createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Popup:\n                return (React__namespace.createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Square:\n                return (React__namespace.createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Squiggly:\n                return (React__namespace.createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Stamp:\n                return (React__namespace.createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.StrikeOut:\n                return (React__namespace.createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Text:\n                return (React__namespace.createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case exports.AnnotationType.Underline:\n                return (React__namespace.createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            default:\n                return React__namespace.createElement(React__namespace.Fragment, { key: annotation.id });\n        }\n    })));\n};\n\nvar AnnotationLoader = function (_a) {\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\n    var isMounted = useIsMounted();\n    var _b = React__namespace.useState({\n        loading: true,\n        annotations: [],\n    }), status = _b[0], setStatus = _b[1];\n    React__namespace.useEffect(function () {\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\n            if (isMounted.current) {\n                setStatus({\n                    loading: false,\n                    annotations: result,\n                });\n            }\n        });\n    }, []);\n    return status.loading ? React__namespace.createElement(React__namespace.Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, outlines = _a.outlines, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation, onJumpToDest = _a.onJumpToDest;\n    var renderAnnotations = function (annotations) { return (React__namespace.createElement(AnnotationLayerBody, { annotations: annotations, doc: doc, outlines: outlines, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotation, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpFromLinkAnnotation: onJumpFromLinkAnnotation, onJumpToDest: onJumpToDest })); };\n    return React__namespace.createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations });\n};\n\nvar floatToRatio = function (x, limit) {\n    var _a, _b;\n    if (Math.floor(x) === x) {\n        return [x, 1];\n    }\n    var y = 1 / x;\n    if (y > limit) {\n        return [1, limit];\n    }\n    if (Math.floor(y) === y) {\n        return [1, y];\n    }\n    var value = x > 1 ? y : x;\n    var a = 0;\n    var b = 1;\n    var c = 1;\n    var d = 1;\n    while (true) {\n        var numerator = a + c;\n        var denominator = b + d;\n        if (denominator > limit) {\n            break;\n        }\n        value <= numerator / denominator ? (_a = [numerator, denominator], c = _a[0], d = _a[1], _a) : (_b = [numerator, denominator], a = _b[0], b = _b[1], _b);\n    }\n    var middle = (a / b + c / d) / 2;\n    return value < middle ? (value === x ? [a, b] : [b, a]) : value === x ? [c, d] : [d, c];\n};\n\nvar roundToDivide = function (a, b) {\n    var remainder = a % b;\n    return remainder === 0 ? a : Math.floor(a - remainder);\n};\n\nvar MAX_CANVAS_SIZE = 4096 * 4096;\nvar CanvasLayer = function (_a) {\n    var canvasLayerRef = _a.canvasLayerRef, height = _a.height, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, width = _a.width, onRenderCanvasCompleted = _a.onRenderCanvasCompleted;\n    var renderTask = React__namespace.useRef();\n    useIsomorphicLayoutEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasLayerRef.current;\n        canvasEle.removeAttribute('data-testid');\n        plugins.forEach(function (plugin) {\n            if (plugin.onCanvasLayerRender) {\n                plugin.onCanvasLayerRender({\n                    ele: canvasEle,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                    status: exports.LayerRenderStatus.PreRender,\n                });\n            }\n        });\n        var viewport = page.getViewport({\n            rotation: rotation,\n            scale: scale,\n        });\n        var outputScale = window.devicePixelRatio || 1;\n        var maxScale = Math.sqrt(MAX_CANVAS_SIZE / (viewport.width * viewport.height));\n        var shouldScaleByCSS = outputScale > maxScale;\n        shouldScaleByCSS ? (canvasEle.style.transform = \"scale(1, 1)\") : canvasEle.style.removeProperty('transform');\n        var possibleScale = Math.min(maxScale, outputScale);\n        var _a = floatToRatio(possibleScale, 8), x = _a[0], y = _a[1];\n        canvasEle.width = roundToDivide(viewport.width * possibleScale, x);\n        canvasEle.height = roundToDivide(viewport.height * possibleScale, x);\n        canvasEle.style.width = \"\".concat(roundToDivide(viewport.width, y), \"px\");\n        canvasEle.style.height = \"\".concat(roundToDivide(viewport.height, y), \"px\");\n        canvasEle.hidden = true;\n        var canvasContext = canvasEle.getContext('2d', { alpha: false });\n        var transform = shouldScaleByCSS || outputScale !== 1 ? [possibleScale, 0, 0, possibleScale, 0, 0] : null;\n        renderTask.current = page.render({ canvasContext: canvasContext, transform: transform, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            canvasEle.hidden = false;\n            canvasEle.setAttribute('data-testid', \"core__canvas-layer-\".concat(pageIndex));\n            plugins.forEach(function (plugin) {\n                if (plugin.onCanvasLayerRender) {\n                    plugin.onCanvasLayerRender({\n                        ele: canvasEle,\n                        pageIndex: pageIndex,\n                        rotation: rotation,\n                        scale: scale,\n                        status: exports.LayerRenderStatus.DidRender,\n                    });\n                }\n            });\n            onRenderCanvasCompleted();\n        }, function () {\n            onRenderCanvasCompleted();\n        });\n        return function () {\n            if (canvasEle) {\n                canvasEle.width = 0;\n                canvasEle.height = 0;\n            }\n        };\n    }, []);\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__canvas-layer\", style: {\n            height: \"\".concat(height, \"px\"),\n            width: \"\".concat(width, \"px\"),\n        } },\n        React__namespace.createElement(\"canvas\", { ref: canvasLayerRef })));\n};\n\nvar SvgLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var containerRef = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.innerHTML = '';\n    };\n    useIsomorphicLayoutEffect(function () {\n        var containerEle = containerRef.current;\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getOperatorList().then(function (operatorList) {\n            empty();\n            var graphic = new PdfJsApi__namespace.SVGGraphics(page.commonObjs, page.objs);\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\n                svg.style.height = \"\".concat(height, \"px\");\n                svg.style.width = \"\".concat(width, \"px\");\n                containerEle.appendChild(svg);\n            });\n        });\n    }, []);\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__svg-layer\", ref: containerRef });\n};\n\nvar TextLayer = function (_a) {\n    var containerRef = _a.containerRef, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onRenderTextCompleted = _a.onRenderTextCompleted;\n    var renderTask = React__namespace.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = [].slice.call(containerEle.querySelectorAll('.rpv-core__text-layer-text'));\n        spans.forEach(function (span) { return containerEle.removeChild(span); });\n        var breaks = [].slice.call(containerEle.querySelectorAll('br[role=\"presentation\"]'));\n        breaks.forEach(function (br) { return containerEle.removeChild(br); });\n    };\n    useIsomorphicLayoutEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.removeAttribute('data-testid');\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        plugins.forEach(function (plugin) {\n            if (plugin.onTextLayerRender) {\n                plugin.onTextLayerRender({\n                    ele: containerEle,\n                    pageIndex: pageIndex,\n                    scale: scale,\n                    status: exports.LayerRenderStatus.PreRender,\n                });\n            }\n        });\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJsApi__namespace.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                textContentSource: textContent,\n                viewport: viewport,\n            });\n            renderTask.current.promise.then(function () {\n                containerEle.setAttribute('data-testid', \"core__text-layer-\".concat(pageIndex));\n                var spans = [].slice.call(containerEle.children);\n                spans.forEach(function (span) {\n                    if (!span.classList.contains('rpv-core__text-layer-text--not')) {\n                        span.classList.add('rpv-core__text-layer-text');\n                    }\n                });\n                plugins.forEach(function (plugin) {\n                    if (plugin.onTextLayerRender) {\n                        plugin.onTextLayerRender({\n                            ele: containerEle,\n                            pageIndex: pageIndex,\n                            scale: scale,\n                            status: exports.LayerRenderStatus.DidRender,\n                        });\n                    }\n                });\n                onRenderTextCompleted();\n            }, function () {\n                containerEle.removeAttribute('data-testid');\n                onRenderTextCompleted();\n            });\n        });\n        return function () {\n            var _a;\n            empty();\n            (_a = renderTask.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        };\n    }, []);\n    return React__namespace.createElement(\"div\", { className: \"rpv-core__text-layer\", ref: containerRef });\n};\n\nvar PageLayer = function (_a) {\n    var doc = _a.doc, measureRef = _a.measureRef, outlines = _a.outlines, pageIndex = _a.pageIndex, pageRotation = _a.pageRotation, pageSize = _a.pageSize, plugins = _a.plugins, renderPage = _a.renderPage, renderQueueKey = _a.renderQueueKey, rotation = _a.rotation, scale = _a.scale, shouldRender = _a.shouldRender, viewMode = _a.viewMode, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpFromLinkAnnotation = _a.onJumpFromLinkAnnotation, onJumpToDest = _a.onJumpToDest, onRenderCompleted = _a.onRenderCompleted, onRotatePage = _a.onRotatePage;\n    var isMounted = useIsMounted();\n    var _b = React__namespace.useState(null), page = _b[0], setPage = _b[1];\n    var _c = React__namespace.useState(false), canvasLayerRendered = _c[0], setCanvasLayerRendered = _c[1];\n    var _d = React__namespace.useState(false), textLayerRendered = _d[0], setTextLayerRendered = _d[1];\n    var canvasLayerRef = React__namespace.useRef();\n    var textLayerRef = React__namespace.useRef();\n    var isVertical = Math.abs(rotation + pageRotation) % 180 === 0;\n    var scaledWidth = pageSize.pageWidth * scale;\n    var scaledHeight = pageSize.pageHeight * scale;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var rotationValue = (pageSize.rotation + rotation + pageRotation) % 360;\n    var renderQueueKeyRef = React__namespace.useRef(0);\n    var determinePageInstance = function () {\n        getPage(doc, pageIndex).then(function (pdfPage) {\n            if (isMounted.current) {\n                renderQueueKeyRef.current = renderQueueKey;\n                setPage(pdfPage);\n            }\n        });\n    };\n    var defaultPageRenderer = function (props) { return (React__namespace.createElement(React__namespace.Fragment, null,\n        props.canvasLayer.children,\n        props.textLayer.children,\n        props.annotationLayer.children)); };\n    var renderPageLayer = renderPage || defaultPageRenderer;\n    var handleRenderCanvasCompleted = function () {\n        if (isMounted.current) {\n            setCanvasLayerRendered(true);\n        }\n    };\n    var handleRenderTextCompleted = function () {\n        if (isMounted.current) {\n            setTextLayerRendered(true);\n        }\n    };\n    React__namespace.useEffect(function () {\n        setPage(null);\n        setCanvasLayerRendered(false);\n        setTextLayerRendered(false);\n    }, [pageRotation, rotation, scale]);\n    React__namespace.useEffect(function () {\n        if (shouldRender && isMounted.current && !page) {\n            determinePageInstance();\n        }\n    }, [shouldRender, page]);\n    React__namespace.useEffect(function () {\n        if (canvasLayerRendered && textLayerRendered) {\n            if (renderQueueKey !== renderQueueKeyRef.current) {\n                setPage(null);\n                setCanvasLayerRendered(false);\n                setTextLayerRendered(false);\n            }\n            else {\n                onRenderCompleted(pageIndex);\n            }\n        }\n    }, [canvasLayerRendered, textLayerRendered]);\n    return (React__namespace.createElement(\"div\", { className: classNames({\n            'rpv-core__page-layer': true,\n            'rpv-core__page-layer--dual': viewMode === exports.ViewMode.DualPage,\n            'rpv-core__page-layer--dual-cover': viewMode === exports.ViewMode.DualPageWithCover,\n            'rpv-core__page-layer--single': viewMode === exports.ViewMode.SinglePage,\n        }), \"data-testid\": \"core__page-layer-\".concat(pageIndex), ref: measureRef, style: {\n            height: \"\".concat(h, \"px\"),\n            width: \"\".concat(w, \"px\"),\n        } }, !page ? (React__namespace.createElement(Spinner, { testId: \"core__page-layer-loading-\".concat(pageIndex) })) : (React__namespace.createElement(React__namespace.Fragment, null,\n        renderPageLayer({\n            annotationLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(AnnotationLayer, { doc: doc, outlines: outlines, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpFromLinkAnnotation: onJumpFromLinkAnnotation, onJumpToDest: onJumpToDest })),\n            },\n            canvasLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(CanvasLayer, { canvasLayerRef: canvasLayerRef, height: h, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, width: w, onRenderCanvasCompleted: handleRenderCanvasCompleted })),\n            },\n            canvasLayerRendered: canvasLayerRendered,\n            doc: doc,\n            height: h,\n            pageIndex: pageIndex,\n            rotation: rotationValue,\n            scale: scale,\n            svgLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(SvgLayer, { height: h, page: page, rotation: rotationValue, scale: scale, width: w })),\n            },\n            textLayer: {\n                attrs: {},\n                children: (React__namespace.createElement(TextLayer, { containerRef: textLayerRef, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationValue, scale: scale, onRenderTextCompleted: handleRenderTextCompleted })),\n            },\n            textLayerRendered: textLayerRendered,\n            width: w,\n            markRendered: onRenderCompleted,\n            onRotatePage: function (direction) { return onRotatePage(pageIndex, direction); },\n        }),\n        plugins.map(function (plugin, idx) {\n            return plugin.renderPageLayer ? (React__namespace.createElement(React__namespace.Fragment, { key: idx }, plugin.renderPageLayer({\n                canvasLayerRef: canvasLayerRef,\n                canvasLayerRendered: canvasLayerRendered,\n                doc: doc,\n                height: h,\n                pageIndex: pageIndex,\n                rotation: rotationValue,\n                scale: scale,\n                textLayerRef: textLayerRef,\n                textLayerRendered: textLayerRendered,\n                width: w,\n            }))) : (React__namespace.createElement(React__namespace.Fragment, { key: idx }));\n        })))));\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar rectReducer = function (state, action) {\n    var rect = action.rect;\n    return state.height !== rect.height || state.width !== rect.width ? rect : state;\n};\nvar useMeasureRect = function (_a) {\n    var elementRef = _a.elementRef;\n    var _b = React__namespace.useState(elementRef.current), element = _b[0], setElement = _b[1];\n    var initializedRectRef = React__namespace.useRef(false);\n    var _c = React__namespace.useReducer(rectReducer, { height: 0, width: 0 }), rect = _c[0], dispatch = _c[1];\n    useIsomorphicLayoutEffect(function () {\n        if (elementRef.current !== element) {\n            setElement(elementRef.current);\n        }\n    });\n    useIsomorphicLayoutEffect(function () {\n        if (element && !initializedRectRef.current) {\n            initializedRectRef.current = true;\n            var _a = element.getBoundingClientRect(), height = _a.height, width = _a.width;\n            dispatch({\n                rect: { height: height, width: width },\n            });\n        }\n    }, [element]);\n    React__namespace.useEffect(function () {\n        if (!element) {\n            return;\n        }\n        var tracker = new ResizeObserver(function (entries, __) {\n            entries.forEach(function (entry) {\n                if (entry.target === element) {\n                    var _a = entry.contentRect, height = _a.height, width = _a.width;\n                    dispatch({\n                        rect: { height: height, width: width },\n                    });\n                }\n            });\n        });\n        tracker.observe(element);\n        return function () {\n            tracker.unobserve(element);\n        };\n    }, [element]);\n    return rect;\n};\n\nvar ScrollDirection;\n(function (ScrollDirection) {\n    ScrollDirection[\"Horizontal\"] = \"Horizontal\";\n    ScrollDirection[\"Vertical\"] = \"Vertical\";\n    ScrollDirection[\"Both\"] = \"Both\";\n})(ScrollDirection || (ScrollDirection = {}));\n\nvar easeOutQuart = function (t) { return 1 - Math.pow(1 - t, 4); };\n\nvar EPS = 0.0001;\nvar smoothScroll = function (ele, scrollDirection, targetPosition, duration, easing, onReachTarget) {\n    if (easing === void 0) { easing = function (t) { return t; }; }\n    if (onReachTarget === void 0) { onReachTarget = function () { }; }\n    var top = 0;\n    var left = 0;\n    var reachTarget = false;\n    switch (scrollDirection) {\n        case ScrollDirection.Horizontal:\n            left = ele.scrollLeft;\n            top = 0;\n        case ScrollDirection.Both:\n            left = ele.scrollLeft;\n            top = ele.scrollTop;\n            break;\n        case ScrollDirection.Vertical:\n        default:\n            left = 0;\n            top = ele.scrollTop;\n            break;\n    }\n    var markTargetReached = function () {\n        if (!reachTarget) {\n            reachTarget = true;\n            ele.scrollLeft = targetPosition.left;\n            ele.scrollTop = targetPosition.top;\n            onReachTarget();\n        }\n    };\n    if (Math.abs(top - targetPosition.top) <= EPS && scrollDirection === ScrollDirection.Vertical) {\n        markTargetReached();\n        return;\n    }\n    if (Math.abs(left - targetPosition.left) <= EPS && scrollDirection === ScrollDirection.Horizontal) {\n        markTargetReached();\n        return;\n    }\n    var startTime = -1;\n    var requestId;\n    var offset = {\n        left: left - targetPosition.left,\n        top: top - targetPosition.top,\n    };\n    var loop = function (currentTime) {\n        if (startTime === -1) {\n            startTime = currentTime;\n        }\n        var time = currentTime - startTime;\n        var percent = Math.min(time / duration, 1);\n        var easedPercent = easing(percent);\n        var updatePosition = {\n            left: left - offset.left * easedPercent,\n            top: top - offset.top * easedPercent,\n        };\n        switch (scrollDirection) {\n            case ScrollDirection.Horizontal:\n                ele.scrollLeft = updatePosition.left;\n                break;\n            case ScrollDirection.Both:\n                ele.scrollLeft = updatePosition.left;\n                ele.scrollTop = updatePosition.top;\n                break;\n            case ScrollDirection.Vertical:\n            default:\n                ele.scrollTop = updatePosition.top;\n                break;\n        }\n        if (Math.abs(updatePosition.top - targetPosition.top) <= EPS &&\n            Math.abs(updatePosition.left - targetPosition.left) <= EPS &&\n            !reachTarget) {\n            window.cancelAnimationFrame(requestId);\n            markTargetReached();\n        }\n        if (time < duration) {\n            requestId = window.requestAnimationFrame(loop);\n        }\n        else {\n            window.cancelAnimationFrame(requestId);\n        }\n    };\n    requestId = window.requestAnimationFrame(loop);\n};\n\nvar ZERO_OFFSET$6 = {\n    left: 0,\n    top: 0,\n};\nvar SCROLL_EVENT_OPTIONS = {\n    capture: false,\n    passive: true,\n};\nvar SCROLL_DURATION = 400;\nvar useScroll = function (_a) {\n    var elementRef = _a.elementRef, enableSmoothScroll = _a.enableSmoothScroll, isRtl = _a.isRtl, scrollDirection = _a.scrollDirection, onSmoothScroll = _a.onSmoothScroll;\n    var _b = React__namespace.useState(ZERO_OFFSET$6), scrollOffset = _b[0], setScrollOffset = _b[1];\n    var _c = React__namespace.useState(elementRef.current), element = _c[0], setElement = _c[1];\n    var factor = isRtl ? -1 : 1;\n    var latestRef = React__namespace.useRef(scrollDirection);\n    latestRef.current = scrollDirection;\n    var latestOffsetRef = React__namespace.useRef(ZERO_OFFSET$6);\n    var isSmoothScrollingDoneRef = React__namespace.useRef(true);\n    var handleSmoothScrollingComplete = React__namespace.useCallback(function () {\n        isSmoothScrollingDoneRef.current = true;\n        if (enableSmoothScroll) {\n            setScrollOffset(latestOffsetRef.current);\n        }\n        onSmoothScroll(false);\n    }, []);\n    var handleScroll = React__namespace.useCallback(function () {\n        if (!element) {\n            return;\n        }\n        switch (latestRef.current) {\n            case ScrollDirection.Horizontal:\n                latestOffsetRef.current = {\n                    left: factor * element.scrollLeft,\n                    top: 0,\n                };\n                break;\n            case ScrollDirection.Both:\n                latestOffsetRef.current = {\n                    left: factor * element.scrollLeft,\n                    top: element.scrollTop,\n                };\n                break;\n            case ScrollDirection.Vertical:\n            default:\n                latestOffsetRef.current = {\n                    left: 0,\n                    top: element.scrollTop,\n                };\n                break;\n        }\n        if (!enableSmoothScroll || isSmoothScrollingDoneRef.current) {\n            setScrollOffset(latestOffsetRef.current);\n        }\n    }, [element]);\n    useIsomorphicLayoutEffect(function () {\n        setElement(elementRef.current);\n    });\n    useIsomorphicLayoutEffect(function () {\n        if (!element) {\n            return;\n        }\n        element.addEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n        return function () {\n            element.removeEventListener('scroll', handleScroll, SCROLL_EVENT_OPTIONS);\n        };\n    }, [element]);\n    var scrollTo = React__namespace.useCallback(function (targetPosition, withSmoothScroll) {\n        var ele = elementRef.current;\n        if (!ele) {\n            return Promise.resolve();\n        }\n        var updatePosition = {\n            left: 0,\n            top: 0,\n        };\n        switch (latestRef.current) {\n            case ScrollDirection.Horizontal:\n                updatePosition.left = factor * targetPosition.left;\n                break;\n            case ScrollDirection.Both:\n                updatePosition.left = factor * targetPosition.left;\n                updatePosition.top = targetPosition.top;\n                break;\n            case ScrollDirection.Vertical:\n            default:\n                updatePosition.top = targetPosition.top;\n                break;\n        }\n        if (withSmoothScroll) {\n            isSmoothScrollingDoneRef.current = false;\n            onSmoothScroll(true);\n            return new Promise(function (resolve, _) {\n                smoothScroll(ele, latestRef.current, updatePosition, SCROLL_DURATION, easeOutQuart, function () {\n                    handleSmoothScrollingComplete();\n                    resolve();\n                });\n            });\n        }\n        return new Promise(function (resolve, _) {\n            switch (latestRef.current) {\n                case ScrollDirection.Horizontal:\n                    ele.scrollLeft = updatePosition.left;\n                    break;\n                case ScrollDirection.Both:\n                    ele.scrollLeft = updatePosition.left;\n                    ele.scrollTop = updatePosition.top;\n                    break;\n                case ScrollDirection.Vertical:\n                default:\n                    ele.scrollTop = updatePosition.top;\n                    break;\n            }\n            resolve();\n        });\n    }, [elementRef]);\n    return {\n        scrollOffset: scrollOffset,\n        scrollTo: scrollTo,\n    };\n};\n\nvar clamp = function (min, max, value) { return Math.max(min, Math.min(value, max)); };\n\nvar indexOfMax = function (arr) { return arr.reduce(function (prev, curr, i, a) { return (curr > a[prev] ? i : prev); }, 0); };\n\nvar buildContainerStyles = function (totalSize, scrollMode) {\n    switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n            return {\n                position: 'relative',\n                height: '100%',\n                width: \"\".concat(totalSize.width, \"px\"),\n            };\n        case exports.ScrollMode.Vertical:\n        default:\n            return {\n                position: 'relative',\n                height: \"\".concat(totalSize.height, \"px\"),\n                width: '100%',\n            };\n    }\n};\n\nvar buildItemContainerStyles = function (item, parentRect, scrollMode) {\n    return scrollMode !== exports.ScrollMode.Page\n        ? {}\n        : {\n            height: \"\".concat(parentRect.height, \"px\"),\n            width: '100%',\n            position: 'absolute',\n            top: 0,\n            transform: \"translateY(\".concat(item.start.top, \"px)\"),\n        };\n};\n\nvar hasDifferentSizes = function (sizes) {\n    var numberOfItems = sizes.length;\n    if (numberOfItems === 1) {\n        return false;\n    }\n    for (var i = 1; i < numberOfItems; i++) {\n        if (sizes[i].height !== sizes[0].height || sizes[i].width !== sizes[0].width) {\n            return true;\n        }\n    }\n    return false;\n};\nvar getMinWidthOfCover = function (sizes, viewMode) {\n    if (viewMode !== exports.ViewMode.DualPageWithCover) {\n        return 0;\n    }\n    if (!hasDifferentSizes(sizes)) {\n        return 2 * sizes[0].width;\n    }\n    var chunkWidths = chunk(sizes.slice(1), 2).map(function (eachChunk) {\n        return eachChunk.length === 2 ? eachChunk[0].width + eachChunk[1].width : eachChunk[0].width;\n    });\n    var widths = [sizes[0].width].concat(chunkWidths);\n    return Math.max.apply(Math, widths);\n};\nvar buildItemStyles = function (item, isRtl, sizes, viewMode, scrollMode) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    var sideProperty = isRtl ? 'right' : 'left';\n    var factor = isRtl ? -1 : 1;\n    var numberOfItems = sizes.length;\n    var left = item.start.left * factor;\n    var _h = item.size, height = _h.height, width = _h.width;\n    if (viewMode === exports.ViewMode.DualPageWithCover) {\n        var transformTop = scrollMode === exports.ScrollMode.Page ? 0 : item.start.top;\n        if (item.index === 0 || (numberOfItems % 2 === 0 && item.index === numberOfItems - 1)) {\n            return _a = {\n                    height: \"\".concat(height, \"px\"),\n                    minWidth: \"\".concat(getMinWidthOfCover(sizes, viewMode), \"px\"),\n                    width: '100%'\n                },\n                _a[sideProperty] = 0,\n                _a.position = 'absolute',\n                _a.top = 0,\n                _a.transform = \"translate(\".concat(left, \"px, \").concat(transformTop, \"px)\"),\n                _a;\n        }\n        return _b = {\n                height: \"\".concat(height, \"px\"),\n                width: \"\".concat(width, \"px\")\n            },\n            _b[sideProperty] = 0,\n            _b.position = 'absolute',\n            _b.top = 0,\n            _b.transform = \"translate(\".concat(left, \"px, \").concat(transformTop, \"px)\"),\n            _b;\n    }\n    if (viewMode === exports.ViewMode.DualPage) {\n        return _c = {\n                height: \"\".concat(height, \"px\"),\n                width: \"\".concat(width, \"px\")\n            },\n            _c[sideProperty] = 0,\n            _c.position = 'absolute',\n            _c.top = 0,\n            _c.transform = \"translate(\".concat(left, \"px, \").concat(scrollMode === exports.ScrollMode.Page ? 0 : item.start.top, \"px)\"),\n            _c;\n    }\n    switch (scrollMode) {\n        case exports.ScrollMode.Horizontal:\n            return _d = {\n                    height: '100%',\n                    width: \"\".concat(width, \"px\")\n                },\n                _d[sideProperty] = 0,\n                _d.position = 'absolute',\n                _d.top = 0,\n                _d.transform = \"translateX(\".concat(left, \"px)\"),\n                _d;\n        case exports.ScrollMode.Page:\n            return _e = {\n                    height: \"\".concat(height, \"px\"),\n                    width: \"\".concat(width, \"px\")\n                },\n                _e[sideProperty] = 0,\n                _e.position = 'absolute',\n                _e.top = 0,\n                _e;\n        case exports.ScrollMode.Wrapped:\n            return _f = {\n                    height: \"\".concat(height, \"px\"),\n                    width: \"\".concat(width, \"px\")\n                },\n                _f[sideProperty] = 0,\n                _f.position = 'absolute',\n                _f.top = 0,\n                _f.transform = \"translate(\".concat(left, \"px, \").concat(item.start.top, \"px)\"),\n                _f;\n        case exports.ScrollMode.Vertical:\n        default:\n            return _g = {\n                    height: \"\".concat(height, \"px\"),\n                    width: '100%'\n                },\n                _g[sideProperty] = 0,\n                _g.position = 'absolute',\n                _g.top = 0,\n                _g.transform = \"translateY(\".concat(item.start.top, \"px)\"),\n                _g;\n    }\n};\n\nvar findNearest = function (low, high, value, getItemValue) {\n    while (low <= high) {\n        var middle = ((low + high) / 2) | 0;\n        var currentValue = getItemValue(middle);\n        if (currentValue < value) {\n            low = middle + 1;\n        }\n        else if (currentValue > value) {\n            high = middle - 1;\n        }\n        else {\n            return middle;\n        }\n    }\n    return low > 0 ? low - 1 : 0;\n};\n\nvar calculateRange = function (scrollDirection, measurements, outerSize, scrollOffset) {\n    var currentOffset = 0;\n    switch (scrollDirection) {\n        case ScrollDirection.Horizontal:\n            currentOffset = scrollOffset.left;\n            break;\n        case ScrollDirection.Vertical:\n        default:\n            currentOffset = scrollOffset.top;\n            break;\n    }\n    var size = measurements.length - 1;\n    var getOffset = function (index) {\n        switch (scrollDirection) {\n            case ScrollDirection.Horizontal:\n                return measurements[index].start.left;\n            case ScrollDirection.Both:\n            case ScrollDirection.Vertical:\n            default:\n                return measurements[index].start.top;\n        }\n    };\n    var start = findNearest(0, size, currentOffset, getOffset);\n    if (scrollDirection === ScrollDirection.Both) {\n        var startTop = measurements[start].start.top;\n        while (start - 1 >= 0 &&\n            measurements[start - 1].start.top === startTop &&\n            measurements[start - 1].start.left >= scrollOffset.left) {\n            start--;\n        }\n    }\n    var end = start;\n    while (end <= size) {\n        var topLeftCorner = {\n            top: measurements[end].start.top - scrollOffset.top,\n            left: measurements[end].start.left - scrollOffset.left,\n        };\n        var visibleSize = {\n            height: outerSize.height - topLeftCorner.top,\n            width: outerSize.width - topLeftCorner.left,\n        };\n        if (scrollDirection === ScrollDirection.Horizontal && visibleSize.width < 0) {\n            break;\n        }\n        if (scrollDirection === ScrollDirection.Vertical && visibleSize.height < 0) {\n            break;\n        }\n        if (scrollDirection === ScrollDirection.Both && (visibleSize.width < 0 || visibleSize.height < 0)) {\n            break;\n        }\n        end++;\n    }\n    return {\n        start: start,\n        end: end,\n    };\n};\n\nvar ZERO_OFFSET$5 = {\n    left: 0,\n    top: 0,\n};\nvar measure = function (numberOfItems, parentRect, sizes, scrollMode) {\n    var measurements = [];\n    var totalWidth = 0;\n    var firstOfRow = {\n        left: 0,\n        top: 0,\n    };\n    var maxHeight = 0;\n    var start = ZERO_OFFSET$5;\n    for (var i = 0; i < numberOfItems; i++) {\n        var size = sizes[i];\n        if (i === 0) {\n            totalWidth = size.width;\n            firstOfRow = {\n                left: 0,\n                top: 0,\n            };\n            maxHeight = size.height;\n        }\n        else {\n            switch (scrollMode) {\n                case exports.ScrollMode.Wrapped:\n                    totalWidth += size.width;\n                    if (totalWidth < parentRect.width) {\n                        start = {\n                            left: measurements[i - 1].end.left,\n                            top: firstOfRow.top,\n                        };\n                        maxHeight = Math.max(maxHeight, size.height);\n                    }\n                    else {\n                        totalWidth = size.width;\n                        start = {\n                            left: firstOfRow.left,\n                            top: firstOfRow.top + maxHeight,\n                        };\n                        firstOfRow = {\n                            left: start.left,\n                            top: start.top,\n                        };\n                        maxHeight = size.height;\n                    }\n                    break;\n                case exports.ScrollMode.Horizontal:\n                case exports.ScrollMode.Vertical:\n                default:\n                    start = measurements[i - 1].end;\n                    break;\n            }\n        }\n        var end = {\n            left: start.left + size.width,\n            top: start.top + size.height,\n        };\n        measurements[i] = {\n            index: i,\n            start: start,\n            size: size,\n            end: end,\n            visibility: -1,\n        };\n    }\n    return measurements;\n};\n\nvar ZERO_OFFSET$4 = {\n    left: 0,\n    top: 0,\n};\nvar measureDualPage = function (numberOfItems, parentRect, sizes, scrollMode) {\n    var measurements = [];\n    var top = 0;\n    var maxHeight = 0;\n    var start = ZERO_OFFSET$4;\n    for (var i = 0; i < numberOfItems; i++) {\n        var size = {\n            height: scrollMode === exports.ScrollMode.Page ? Math.max(parentRect.height, sizes[i].height) : sizes[i].height,\n            width: Math.max(parentRect.width / 2, sizes[i].width),\n        };\n        if (scrollMode === exports.ScrollMode.Page) {\n            start = {\n                left: i % 2 === 0 ? 0 : size.width,\n                top: Math.floor(i / 2) * size.height,\n            };\n        }\n        else {\n            if (i % 2 === 0) {\n                top = top + maxHeight;\n                start = {\n                    left: 0,\n                    top: top,\n                };\n                maxHeight = i === numberOfItems - 1 ? sizes[i].height : Math.max(sizes[i].height, sizes[i + 1].height);\n            }\n            else {\n                start = {\n                    left: measurements[i - 1].end.left,\n                    top: top,\n                };\n            }\n        }\n        var end = {\n            left: start.left + size.width,\n            top: start.top + size.height,\n        };\n        measurements[i] = {\n            index: i,\n            start: start,\n            size: size,\n            end: end,\n            visibility: -1,\n        };\n    }\n    return measurements;\n};\n\nvar ZERO_OFFSET$3 = {\n    left: 0,\n    top: 0,\n};\nvar measureDualPageWithCover = function (numberOfItems, parentRect, sizes, scrollMode) {\n    var measurements = [];\n    var top = 0;\n    var maxHeight = 0;\n    var start = ZERO_OFFSET$3;\n    for (var i = 0; i < numberOfItems; i++) {\n        var size = i === 0\n            ? {\n                height: scrollMode === exports.ScrollMode.Page\n                    ? Math.max(parentRect.height, sizes[i].height)\n                    : sizes[i].height,\n                width: scrollMode === exports.ScrollMode.Page ? Math.max(parentRect.width, sizes[i].width) : sizes[i].width,\n            }\n            : {\n                height: scrollMode === exports.ScrollMode.Page\n                    ? Math.max(parentRect.height, sizes[i].height)\n                    : sizes[i].height,\n                width: Math.max(parentRect.width / 2, sizes[i].width),\n            };\n        if (scrollMode === exports.ScrollMode.Page) {\n            start =\n                i === 0\n                    ? ZERO_OFFSET$3\n                    : {\n                        left: i % 2 === 0 ? size.width : 0,\n                        top: Math.floor((i - 1) / 2) * size.height + measurements[0].end.top,\n                    };\n        }\n        else {\n            if (i === 0) {\n                start = ZERO_OFFSET$3;\n                top = sizes[0].height;\n                maxHeight = 0;\n            }\n            else if (i % 2 === 1) {\n                top = top + maxHeight;\n                start = {\n                    left: 0,\n                    top: top,\n                };\n                maxHeight = i === numberOfItems - 1 ? sizes[i].height : Math.max(sizes[i].height, sizes[i + 1].height);\n            }\n            else {\n                start = {\n                    left: measurements[i - 1].end.left,\n                    top: top,\n                };\n            }\n        }\n        var end = {\n            left: start.left + size.width,\n            top: start.top + size.height,\n        };\n        measurements[i] = {\n            index: i,\n            start: start,\n            size: size,\n            end: end,\n            visibility: -1,\n        };\n    }\n    return measurements;\n};\n\nvar ZERO_OFFSET$2 = {\n    left: 0,\n    top: 0,\n};\nvar measureSinglePage = function (numberOfItems, parentRect, sizes) {\n    var measurements = [];\n    for (var i = 0; i < numberOfItems; i++) {\n        var size = {\n            height: Math.max(parentRect.height, sizes[i].height),\n            width: Math.max(parentRect.width, sizes[i].width),\n        };\n        var start = i === 0 ? ZERO_OFFSET$2 : measurements[i - 1].end;\n        var end = {\n            left: start.left + size.width,\n            top: start.top + size.height,\n        };\n        measurements[i] = {\n            index: i,\n            start: start,\n            size: size,\n            end: end,\n            visibility: -1,\n        };\n    }\n    return measurements;\n};\n\nvar ZERO_RECT$2 = {\n    height: 0,\n    width: 0,\n};\nvar ZERO_OFFSET$1 = {\n    left: 0,\n    top: 0,\n};\nvar COMPARE_EPSILON = 0.000000000001;\nvar VIRTUAL_INDEX_ATTR = 'data-virtual-index';\nvar IO_THRESHOLD = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];\nvar useVirtual = function (_a) {\n    var enableSmoothScroll = _a.enableSmoothScroll, isRtl = _a.isRtl, numberOfItems = _a.numberOfItems, parentRef = _a.parentRef, setRenderRange = _a.setRenderRange, sizes = _a.sizes, scrollMode = _a.scrollMode, viewMode = _a.viewMode;\n    var _b = React__namespace.useState(false), isSmoothScrolling = _b[0], setSmoothScrolling = _b[1];\n    var onSmoothScroll = React__namespace.useCallback(function (isSmoothScrolling) { return setSmoothScrolling(isSmoothScrolling); }, []);\n    var scrollModeRef = React__namespace.useRef(scrollMode);\n    scrollModeRef.current = scrollMode;\n    var viewModeRef = React__namespace.useRef(viewMode);\n    viewModeRef.current = viewMode;\n    var scrollDirection = scrollMode === exports.ScrollMode.Wrapped || viewMode === exports.ViewMode.DualPageWithCover || viewMode === exports.ViewMode.DualPage\n        ? ScrollDirection.Both\n        : scrollMode === exports.ScrollMode.Horizontal\n            ? ScrollDirection.Horizontal\n            : ScrollDirection.Vertical;\n    var _c = useScroll({\n        elementRef: parentRef,\n        enableSmoothScroll: enableSmoothScroll,\n        isRtl: isRtl,\n        scrollDirection: scrollDirection,\n        onSmoothScroll: onSmoothScroll,\n    }), scrollOffset = _c.scrollOffset, scrollTo = _c.scrollTo;\n    var parentRect = useMeasureRect({\n        elementRef: parentRef,\n    });\n    var latestRef = React__namespace.useRef({\n        scrollOffset: ZERO_OFFSET$1,\n        measurements: [],\n    });\n    latestRef.current.scrollOffset = scrollOffset;\n    var defaultVisibilities = React__namespace.useMemo(function () { return Array(numberOfItems).fill(-1); }, []);\n    var _d = React__namespace.useState(defaultVisibilities), visibilities = _d[0], setVisibilities = _d[1];\n    var intersectionTracker = React__namespace.useMemo(function () {\n        var io = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var ratio = entry.isIntersecting ? entry.intersectionRatio : -1;\n                var target = entry.target;\n                var indexAttribute = target.getAttribute(VIRTUAL_INDEX_ATTR);\n                if (!indexAttribute) {\n                    return;\n                }\n                var index = parseInt(indexAttribute, 10);\n                if (0 <= index && index < numberOfItems) {\n                    setVisibilities(function (old) {\n                        old[index] = ratio;\n                        return __spreadArray([], old, true);\n                    });\n                }\n            });\n        }, {\n            threshold: IO_THRESHOLD,\n        });\n        return io;\n    }, []);\n    var measurements = React__namespace.useMemo(function () {\n        if (scrollMode === exports.ScrollMode.Page && viewMode === exports.ViewMode.SinglePage) {\n            return measureSinglePage(numberOfItems, parentRect, sizes);\n        }\n        if (viewMode === exports.ViewMode.DualPageWithCover) {\n            return measureDualPageWithCover(numberOfItems, parentRect, sizes, scrollMode);\n        }\n        if (viewMode === exports.ViewMode.DualPage) {\n            return measureDualPage(numberOfItems, parentRect, sizes, scrollMode);\n        }\n        return measure(numberOfItems, parentRect, sizes, scrollMode);\n    }, [scrollMode, sizes, viewMode, parentRect]);\n    var totalSize = measurements[numberOfItems - 1]\n        ? {\n            height: measurements[numberOfItems - 1].end.top,\n            width: measurements[numberOfItems - 1].end.left,\n        }\n        : ZERO_RECT$2;\n    latestRef.current.measurements = measurements;\n    var _e = React__namespace.useMemo(function () {\n        var _a = calculateRange(scrollDirection, measurements, parentRect, scrollOffset), start = _a.start, end = _a.end;\n        var visiblePageVisibilities = visibilities.slice(clamp(0, numberOfItems, start), clamp(0, numberOfItems, end));\n        var maxVisbilityItem = start + indexOfMax(visiblePageVisibilities);\n        maxVisbilityItem = clamp(0, numberOfItems - 1, maxVisbilityItem);\n        var maxVisbilityIndex = maxVisbilityItem;\n        var _b = setRenderRange({\n            endPage: end,\n            numPages: numberOfItems,\n            startPage: start,\n        }), startPage = _b.startPage, endPage = _b.endPage;\n        startPage = Math.max(startPage, 0);\n        endPage = Math.min(endPage, numberOfItems - 1);\n        switch (viewMode) {\n            case exports.ViewMode.DualPageWithCover:\n                if (maxVisbilityItem > 0) {\n                    maxVisbilityIndex = maxVisbilityItem % 2 === 1 ? maxVisbilityItem : maxVisbilityItem - 1;\n                }\n                startPage = startPage === 0 ? 0 : startPage % 2 === 1 ? startPage : startPage - 1;\n                endPage = endPage % 2 === 1 ? endPage - 1 : endPage;\n                if (numberOfItems - endPage <= 2) {\n                    endPage = numberOfItems - 1;\n                }\n                break;\n            case exports.ViewMode.DualPage:\n                maxVisbilityIndex = maxVisbilityItem % 2 === 0 ? maxVisbilityItem : maxVisbilityItem - 1;\n                startPage = startPage % 2 === 0 ? startPage : startPage - 1;\n                endPage = endPage % 2 === 1 ? endPage : endPage - 1;\n                break;\n            case exports.ViewMode.SinglePage:\n            default:\n                maxVisbilityIndex = maxVisbilityItem;\n                break;\n        }\n        return {\n            startPage: startPage,\n            endPage: endPage,\n            maxVisbilityIndex: maxVisbilityIndex,\n        };\n    }, [measurements, parentRect, scrollOffset, viewMode, visibilities]), startPage = _e.startPage, endPage = _e.endPage, maxVisbilityIndex = _e.maxVisbilityIndex;\n    var virtualItems = React__namespace.useMemo(function () {\n        var virtualItems = [];\n        var _loop_1 = function (i) {\n            var item = measurements[i];\n            var virtualItem = __assign(__assign({}, item), { visibility: visibilities[i] !== undefined ? visibilities[i] : -1, measureRef: function (ele) {\n                    if (!ele) {\n                        return;\n                    }\n                    ele.setAttribute(VIRTUAL_INDEX_ATTR, \"\".concat(i));\n                    intersectionTracker.observe(ele);\n                } });\n            virtualItems.push(virtualItem);\n        };\n        for (var i = startPage; i <= endPage; i++) {\n            _loop_1(i);\n        }\n        return virtualItems;\n    }, [startPage, endPage, visibilities, measurements]);\n    var scrollToItem = React__namespace.useCallback(function (index, offset) {\n        var measurements = latestRef.current.measurements;\n        var normalizedIndex = clamp(0, numberOfItems - 1, index);\n        var measurement = measurements[normalizedIndex];\n        var withOffset = scrollModeRef.current === exports.ScrollMode.Page ? ZERO_OFFSET$1 : offset;\n        return measurement\n            ? scrollTo({\n                left: withOffset.left + measurement.start.left,\n                top: withOffset.top + measurement.start.top,\n            }, enableSmoothScroll)\n            : Promise.resolve();\n    }, [scrollTo, enableSmoothScroll]);\n    var scrollToSmallestItemAbove = React__namespace.useCallback(function (index, offset) {\n        var measurements = latestRef.current.measurements;\n        var start = measurements[index].start;\n        var nextItem = measurements.find(function (item) { return item.start.top - start.top > COMPARE_EPSILON; });\n        if (!nextItem) {\n            return Promise.resolve();\n        }\n        var nextIndex = nextItem.index;\n        switch (viewModeRef.current) {\n            case exports.ViewMode.DualPage:\n                nextIndex = nextIndex % 2 === 0 ? nextIndex : nextIndex + 1;\n                break;\n            case exports.ViewMode.DualPageWithCover:\n                nextIndex = nextIndex % 2 === 1 ? nextIndex : nextIndex + 1;\n                break;\n        }\n        return scrollToItem(nextIndex, offset);\n    }, []);\n    var scrollToBiggestItemBelow = React__namespace.useCallback(function (index, offset) {\n        var measurements = latestRef.current.measurements;\n        var start = measurements[index].start;\n        var prevIndex = index;\n        var found = false;\n        for (var i = numberOfItems - 1; i >= 0; i--) {\n            if (start.top - measurements[i].start.top > COMPARE_EPSILON) {\n                found = true;\n                prevIndex = measurements[i].index;\n                break;\n            }\n        }\n        if (!found) {\n            return Promise.resolve();\n        }\n        switch (viewModeRef.current) {\n            case exports.ViewMode.DualPage:\n                prevIndex = prevIndex % 2 === 0 ? prevIndex : prevIndex - 1;\n                break;\n            case exports.ViewMode.DualPageWithCover:\n                prevIndex = prevIndex % 2 === 0 ? prevIndex - 1 : prevIndex;\n                break;\n        }\n        if (prevIndex === index) {\n            prevIndex = index - 1;\n        }\n        return scrollToItem(prevIndex, offset);\n    }, []);\n    var scrollToNextItem = React__namespace.useCallback(function (index, offset) {\n        if (viewModeRef.current === exports.ViewMode.DualPageWithCover || viewModeRef.current === exports.ViewMode.DualPage) {\n            return scrollToSmallestItemAbove(index, offset);\n        }\n        switch (scrollModeRef.current) {\n            case exports.ScrollMode.Wrapped:\n                return scrollToSmallestItemAbove(index, offset);\n            case exports.ScrollMode.Horizontal:\n            case exports.ScrollMode.Vertical:\n            default:\n                return scrollToItem(index + 1, offset);\n        }\n    }, []);\n    var scrollToPreviousItem = React__namespace.useCallback(function (index, offset) {\n        if (viewModeRef.current === exports.ViewMode.DualPageWithCover || viewModeRef.current === exports.ViewMode.DualPage) {\n            return scrollToBiggestItemBelow(index, offset);\n        }\n        switch (scrollModeRef.current) {\n            case exports.ScrollMode.Wrapped:\n                return scrollToBiggestItemBelow(index, offset);\n            case exports.ScrollMode.Horizontal:\n            case exports.ScrollMode.Vertical:\n            default:\n                return scrollToItem(index - 1, offset);\n        }\n    }, []);\n    var getContainerStyles = React__namespace.useCallback(function () { return buildContainerStyles(totalSize, scrollModeRef.current); }, [totalSize]);\n    var getItemContainerStyles = React__namespace.useCallback(function (item) { return buildItemContainerStyles(item, parentRect, scrollModeRef.current); }, [parentRect]);\n    var getItemStyles = React__namespace.useCallback(function (item) { return buildItemStyles(item, isRtl, sizes, viewModeRef.current, scrollModeRef.current); }, [isRtl, sizes]);\n    var zoom = React__namespace.useCallback(function (scale, index) {\n        var _a = latestRef.current, measurements = _a.measurements, scrollOffset = _a.scrollOffset;\n        var normalizedIndex = clamp(0, numberOfItems - 1, index);\n        var measurement = measurements[normalizedIndex];\n        if (measurement) {\n            var updateOffset = scrollModeRef.current === exports.ScrollMode.Page\n                ? {\n                    left: measurement.start.left,\n                    top: measurement.start.top,\n                }\n                : {\n                    left: scrollOffset.left * scale,\n                    top: scrollOffset.top * scale,\n                };\n            return scrollTo(updateOffset, false);\n        }\n        return Promise.resolve();\n    }, []);\n    React__namespace.useEffect(function () {\n        return function () {\n            intersectionTracker.disconnect();\n        };\n    }, []);\n    return {\n        boundingClientRect: parentRect,\n        isSmoothScrolling: isSmoothScrolling,\n        startPage: startPage,\n        endPage: endPage,\n        maxVisbilityIndex: maxVisbilityIndex,\n        virtualItems: virtualItems,\n        getContainerStyles: getContainerStyles,\n        getItemContainerStyles: getItemContainerStyles,\n        getItemStyles: getItemStyles,\n        scrollToItem: scrollToItem,\n        scrollToNextItem: scrollToNextItem,\n        scrollToPreviousItem: scrollToPreviousItem,\n        zoom: zoom,\n    };\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar calculateScale = function (container, pageHeight, pageWidth, scale, viewMode, numPages) {\n    var w = pageWidth;\n    switch (true) {\n        case viewMode === exports.ViewMode.DualPageWithCover && numPages >= 3:\n        case viewMode === exports.ViewMode.DualPage && numPages >= 3:\n            w = 2 * pageWidth;\n            break;\n        default:\n            w = pageWidth;\n            break;\n    }\n    switch (scale) {\n        case exports.SpecialZoomLevel.ActualSize:\n            return 1;\n        case exports.SpecialZoomLevel.PageFit:\n            return Math.min((container.clientWidth - SCROLL_BAR_WIDTH) / w, (container.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n        case exports.SpecialZoomLevel.PageWidth:\n            return (container.clientWidth - SCROLL_BAR_WIDTH) / w;\n    }\n};\n\nvar useStack = function (maxLength) {\n    var stackRef = React__namespace.useRef([]);\n    var map = function (transformer) {\n        return stackRef.current.map(function (item) { return transformer(item); });\n    };\n    var pop = function () {\n        var stack = stackRef.current;\n        var size = stack.length;\n        if (size === 0) {\n            return null;\n        }\n        var lastItem = stack.pop();\n        stackRef.current = stack;\n        return lastItem;\n    };\n    var push = function (item) {\n        var stack = stackRef.current;\n        if (stack.length + 1 > maxLength) {\n            stack.shift();\n        }\n        stack.push(item);\n        stackRef.current = stack;\n    };\n    React__namespace.useEffect(function () {\n        return function () {\n            stackRef.current = [];\n        };\n    }, []);\n    return {\n        push: push,\n        map: map,\n        pop: pop,\n    };\n};\n\nvar useQueue = function (maxLength) {\n    var queueRef = React__namespace.useRef([]);\n    var dequeue = function () {\n        var queue = queueRef.current;\n        var size = queue.length;\n        if (size === 0) {\n            return null;\n        }\n        var firstItem = queue.shift();\n        queueRef.current = queue;\n        return firstItem || null;\n    };\n    var enqueue = function (item) {\n        var queue = queueRef.current;\n        if (queue.length + 1 > maxLength) {\n            queue.pop();\n        }\n        queueRef.current = [item].concat(queue);\n    };\n    var map = function (transformer) {\n        return queueRef.current.map(function (item) { return transformer(item); });\n    };\n    React__namespace.useEffect(function () {\n        return function () {\n            queueRef.current = [];\n        };\n    }, []);\n    return {\n        dequeue: dequeue,\n        enqueue: enqueue,\n        map: map,\n    };\n};\n\nvar MAX_QUEUE_LENGTH = 50;\nvar useDestination = function (_a) {\n    var getCurrentPage = _a.getCurrentPage;\n    var previousDestinations = useStack(MAX_QUEUE_LENGTH);\n    var nextDestinations = useQueue(MAX_QUEUE_LENGTH);\n    var getNextDestination = function () {\n        var nextDest = nextDestinations.dequeue();\n        if (nextDest) {\n            previousDestinations.push(nextDest);\n        }\n        if (nextDest && nextDest.pageIndex === getCurrentPage()) {\n            return getNextDestination();\n        }\n        return nextDest;\n    };\n    var getPreviousDestination = function () {\n        var prevDest = previousDestinations.pop();\n        if (prevDest) {\n            nextDestinations.enqueue(prevDest);\n        }\n        if (prevDest && prevDest.pageIndex === getCurrentPage()) {\n            return getPreviousDestination();\n        }\n        return prevDest;\n    };\n    var markVisitedDestination = React__namespace.useCallback(function (destination) {\n        previousDestinations.push(destination);\n    }, []);\n    return {\n        getNextDestination: getNextDestination,\n        getPreviousDestination: getPreviousDestination,\n        markVisitedDestination: markVisitedDestination,\n    };\n};\n\nvar flaternSingleOutline = function (outline) {\n    var result = [];\n    if (outline.items && outline.items.length > 0) {\n        result = result.concat(flaternOutlines(outline.items));\n    }\n    return result;\n};\nvar flaternOutlines = function (outlines) {\n    var result = [];\n    outlines.map(function (outline) {\n        result = result.concat(outline).concat(flaternSingleOutline(outline));\n    });\n    return result;\n};\nvar useOutlines = function (doc) {\n    var isMounted = useIsMounted();\n    var _a = React__namespace.useState([]), outlines = _a[0], setOutlines = _a[1];\n    React__namespace.useEffect(function () {\n        doc.getOutline().then(function (result) {\n            if (isMounted.current && result !== null) {\n                var items = flaternOutlines(result);\n                setOutlines(items);\n            }\n        });\n    }, []);\n    return outlines;\n};\n\nvar RESIZE_EVENT_OPTIONS = {\n    capture: false,\n    passive: true,\n};\nvar ZERO_RECT$1 = {\n    height: 0,\n    width: 0,\n};\nvar useWindowResize = function () {\n    var _a = React__namespace.useState(ZERO_RECT$1), windowRect = _a[0], setWindowRect = _a[1];\n    var handleResize = useDebounceCallback(function () {\n        setWindowRect({\n            height: window.innerHeight,\n            width: window.innerWidth,\n        });\n    }, 100);\n    useIsomorphicLayoutEffect(function () {\n        window.addEventListener('resize', handleResize, RESIZE_EVENT_OPTIONS);\n        return function () {\n            window.removeEventListener('resize', handleResize, RESIZE_EVENT_OPTIONS);\n        };\n    }, []);\n    return windowRect;\n};\n\nvar ZERO_RECT = {\n    height: 0,\n    width: 0,\n};\nvar useFullScreen = function (_a) {\n    var getCurrentPage = _a.getCurrentPage, getCurrentScrollMode = _a.getCurrentScrollMode, jumpToPage = _a.jumpToPage, targetRef = _a.targetRef;\n    var _b = React__namespace.useState(exports.FullScreenMode.Normal), fullScreenMode = _b[0], setFullScreenMode = _b[1];\n    var windowRect = useWindowResize();\n    var _c = React__namespace.useState(ZERO_RECT), targetRect = _c[0], setTargetRect = _c[1];\n    var windowSizeBeforeFullScreenRef = React__namespace.useRef(ZERO_RECT);\n    var targetPageRef = React__namespace.useRef(getCurrentPage());\n    var fullScreenSizeRef = React__namespace.useRef(ZERO_RECT);\n    var _d = React__namespace.useState(targetRef.current), element = _d[0], setElement = _d[1];\n    var fullScreenElementRef = React__namespace.useRef();\n    useIsomorphicLayoutEffect(function () {\n        if (targetRef.current !== element) {\n            setElement(targetRef.current);\n        }\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        if (!element) {\n            return;\n        }\n        var io = new ResizeObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var _a = entry.target.getBoundingClientRect(), height = _a.height, width = _a.width;\n                setTargetRect({ height: height, width: width });\n            });\n        });\n        io.observe(element);\n        return function () {\n            io.unobserve(element);\n            io.disconnect();\n        };\n    }, [element]);\n    var closeOtherFullScreen = React__namespace.useCallback(function (target) {\n        var currentFullScreenEle = getFullScreenElement();\n        if (currentFullScreenEle && currentFullScreenEle !== target) {\n            setFullScreenMode(exports.FullScreenMode.Normal);\n            return exitFullScreen(currentFullScreenEle);\n        }\n        return Promise.resolve();\n    }, []);\n    var enterFullScreenMode = React__namespace.useCallback(function (target) {\n        if (!target || !isFullScreenEnabled()) {\n            return;\n        }\n        setElement(target);\n        closeOtherFullScreen(target).then(function () {\n            fullScreenElementRef.current = target;\n            setFullScreenMode(exports.FullScreenMode.Entering);\n            requestFullScreen(target);\n        });\n    }, []);\n    var exitFullScreenMode = React__namespace.useCallback(function () {\n        var currentFullScreenEle = getFullScreenElement();\n        if (currentFullScreenEle) {\n            setFullScreenMode(exports.FullScreenMode.Exitting);\n            exitFullScreen(document);\n        }\n    }, []);\n    var handleFullScreenChange = React__namespace.useCallback(function () {\n        if (!element) {\n            return;\n        }\n        var currentFullScreenEle = getFullScreenElement();\n        if (currentFullScreenEle !== element) {\n            setFullScreenMode(exports.FullScreenMode.Exitting);\n        }\n    }, [element]);\n    React__namespace.useEffect(function () {\n        switch (fullScreenMode) {\n            case exports.FullScreenMode.Entering:\n                if (fullScreenElementRef.current) {\n                    fullScreenElementRef.current.style.backgroundColor =\n                        'var(--rpv-core__full-screen-target-background-color)';\n                }\n                targetPageRef.current = getCurrentPage();\n                windowSizeBeforeFullScreenRef.current = {\n                    height: window.innerHeight,\n                    width: window.innerWidth,\n                };\n                break;\n            case exports.FullScreenMode.Entered:\n                if (getCurrentScrollMode() === exports.ScrollMode.Page) {\n                    jumpToPage(targetPageRef.current).then(function () {\n                        setFullScreenMode(exports.FullScreenMode.EnteredCompletely);\n                    });\n                }\n                else {\n                    setFullScreenMode(exports.FullScreenMode.EnteredCompletely);\n                }\n                break;\n            case exports.FullScreenMode.Exitting:\n                if (fullScreenElementRef.current) {\n                    fullScreenElementRef.current.style.backgroundColor = '';\n                    fullScreenElementRef.current = null;\n                }\n                targetPageRef.current = getCurrentPage();\n                break;\n            case exports.FullScreenMode.Exited:\n                setFullScreenMode(exports.FullScreenMode.Normal);\n                if (getCurrentScrollMode() === exports.ScrollMode.Page) {\n                    jumpToPage(targetPageRef.current);\n                }\n                break;\n        }\n    }, [fullScreenMode]);\n    React__namespace.useEffect(function () {\n        if (fullScreenMode === exports.FullScreenMode.Normal) {\n            return;\n        }\n        if (fullScreenMode === exports.FullScreenMode.Entering &&\n            windowRect.height === targetRect.height &&\n            windowRect.width === targetRect.width &&\n            windowRect.height > 0 &&\n            windowRect.width > 0 &&\n            (fullScreenSizeRef.current.height === 0 || windowRect.height == fullScreenSizeRef.current.height)) {\n            fullScreenSizeRef.current = {\n                height: window.innerHeight,\n                width: window.innerWidth,\n            };\n            setFullScreenMode(exports.FullScreenMode.Entered);\n            return;\n        }\n        if (fullScreenMode === exports.FullScreenMode.Exitting &&\n            windowSizeBeforeFullScreenRef.current.height === windowRect.height &&\n            windowSizeBeforeFullScreenRef.current.width === windowRect.width &&\n            windowRect.height > 0 &&\n            windowRect.width > 0) {\n            setFullScreenMode(exports.FullScreenMode.Exited);\n        }\n    }, [fullScreenMode, windowRect, targetRect]);\n    React__namespace.useEffect(function () {\n        addFullScreenChangeListener(handleFullScreenChange);\n        return function () {\n            removeFullScreenChangeListener(handleFullScreenChange);\n        };\n    }, [element]);\n    return {\n        enterFullScreenMode: enterFullScreenMode,\n        exitFullScreenMode: exitFullScreenMode,\n        fullScreenMode: fullScreenMode,\n    };\n};\n\nvar DEFAULT_PAGE_LAYOUT = {\n    buildPageStyles: function () { return ({}); },\n    transformSize: function (_a) {\n        var size = _a.size;\n        return size;\n    },\n};\nvar ZERO_OFFSET = {\n    left: 0,\n    top: 0,\n};\nvar Inner = function (_a) {\n    var currentFile = _a.currentFile, defaultScale = _a.defaultScale, doc = _a.doc, enableSmoothScroll = _a.enableSmoothScroll, initialPage = _a.initialPage, initialRotation = _a.initialRotation, initialScale = _a.initialScale, pageLayout = _a.pageLayout, pageSizes = _a.pageSizes, plugins = _a.plugins, renderPage = _a.renderPage, scrollMode = _a.scrollMode, setRenderRange = _a.setRenderRange, viewMode = _a.viewMode, viewerState = _a.viewerState, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onRotate = _a.onRotate, onRotatePage = _a.onRotatePage, onZoom = _a.onZoom;\n    var numPages = doc.numPages;\n    var docId = doc.loadingTask.docId;\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\n    var themeContext = React__namespace.useContext(ThemeContext);\n    var isRtl = themeContext.direction === exports.TextDirection.RightToLeft;\n    var containerRef = React__namespace.useRef();\n    var pagesRef = React__namespace.useRef();\n    var _b = React__namespace.useState(initialPage), currentPage = _b[0], setCurrentPage = _b[1];\n    var mostRecentVisitedRef = React__namespace.useRef(null);\n    var destinationManager = useDestination({\n        getCurrentPage: function () { return stateRef.current.pageIndex; },\n    });\n    var _c = React__namespace.useState(initialRotation), rotation = _c[0], setRotation = _c[1];\n    var previousRotation = usePrevious(rotation);\n    var _d = React__namespace.useState(false), pagesRotationChanged = _d[0], setPagesRotationChanged = _d[1];\n    var _e = React__namespace.useState(new Map()), pagesRotation = _e[0], setPagesRotation = _e[1];\n    var _f = React__namespace.useState(scrollMode), currentScrollMode = _f[0], setCurrentScrollMode = _f[1];\n    var previousScrollMode = usePrevious(currentScrollMode);\n    var _g = React__namespace.useState(viewMode), currentViewMode = _g[0], setCurrentViewMode = _g[1];\n    var previousViewMode = usePrevious(currentViewMode);\n    var outlines = useOutlines(doc);\n    var _h = React__namespace.useState(initialScale), scale = _h[0], setScale = _h[1];\n    var previousScale = usePrevious(scale);\n    var stateRef = React__namespace.useRef(viewerState);\n    var keepSpecialZoomLevelRef = React__namespace.useRef(typeof defaultScale === 'string' ? defaultScale : null);\n    var forceTargetFullScreenRef = React__namespace.useRef(-1);\n    var forceTargetZoomRef = React__namespace.useRef(-1);\n    var forceTargetInitialPageRef = React__namespace.useRef(initialPage);\n    var fullScreen = useFullScreen({\n        getCurrentPage: function () { return stateRef.current.pageIndex; },\n        getCurrentScrollMode: function () { return stateRef.current.scrollMode; },\n        jumpToPage: function (pageIndex) { return jumpToPage(pageIndex); },\n        targetRef: pagesRef,\n    });\n    var _j = React__namespace.useState(-1), renderPageIndex = _j[0], setRenderPageIndex = _j[1];\n    var _k = React__namespace.useState(0), renderQueueKey = _k[0], setRenderQueueKey = _k[1];\n    var renderQueue = useRenderQueue({ doc: doc });\n    React__namespace.useEffect(function () {\n        return function () {\n            clearPagesCache();\n        };\n    }, [docId]);\n    var layoutBuilder = React__namespace.useMemo(function () { return Object.assign({}, DEFAULT_PAGE_LAYOUT, pageLayout); }, []);\n    var sizes = React__namespace.useMemo(function () {\n        return Array(numPages)\n            .fill(0)\n            .map(function (_, pageIndex) {\n            var pageSize = [pageSizes[pageIndex].pageHeight, pageSizes[pageIndex].pageWidth];\n            var rect = Math.abs(rotation) % 180 === 0\n                ? {\n                    height: pageSize[0],\n                    width: pageSize[1],\n                }\n                : {\n                    height: pageSize[1],\n                    width: pageSize[0],\n                };\n            var pageRect = {\n                height: rect.height * scale,\n                width: rect.width * scale,\n            };\n            return layoutBuilder.transformSize({ numPages: numPages, pageIndex: pageIndex, size: pageRect });\n        });\n    }, [rotation, scale]);\n    var virtualizer = useVirtual({\n        enableSmoothScroll: enableSmoothScroll,\n        isRtl: isRtl,\n        numberOfItems: numPages,\n        parentRef: pagesRef,\n        scrollMode: currentScrollMode,\n        setRenderRange: setRenderRange,\n        sizes: sizes,\n        viewMode: currentViewMode,\n    });\n    var handlePagesResize = useDebounceCallback(function () {\n        if (!keepSpecialZoomLevelRef.current ||\n            stateRef.current.fullScreenMode !== exports.FullScreenMode.Normal ||\n            (initialPage > 0 && forceTargetInitialPageRef.current === initialPage)) {\n            return;\n        }\n        zoom(keepSpecialZoomLevelRef.current);\n    }, 200);\n    useTrackResize({\n        targetRef: pagesRef,\n        onResize: handlePagesResize,\n    });\n    var setViewerState = function (viewerState) {\n        var newState = viewerState;\n        plugins.forEach(function (plugin) {\n            if (plugin.onViewerStateChange) {\n                newState = plugin.onViewerStateChange(newState);\n            }\n        });\n        stateRef.current = newState;\n    };\n    var getPagesContainer = function () { return pagesRef.current; };\n    var getViewerState = function () { return stateRef.current; };\n    var handleJumpFromLinkAnnotation = React__namespace.useCallback(function (destination) {\n        destinationManager.markVisitedDestination(destination);\n    }, []);\n    var handleJumpToDestination = React__namespace.useCallback(function (destination) {\n        var pageIndex = destination.pageIndex, bottomOffset = destination.bottomOffset, leftOffset = destination.leftOffset, scaleTo = destination.scaleTo;\n        var pagesContainer = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesContainer || !currentState) {\n            return Promise.resolve();\n        }\n        return new Promise(function (resolve, _) {\n            getPage(doc, pageIndex).then(function (page) {\n                var viewport = page.getViewport({ scale: 1 });\n                var top = 0;\n                var bottom = (typeof bottomOffset === 'function'\n                    ? bottomOffset(viewport.width, viewport.height)\n                    : bottomOffset) || 0;\n                var left = (typeof leftOffset === 'function' ? leftOffset(viewport.width, viewport.height) : leftOffset) || 0;\n                var updateScale = currentState.scale;\n                switch (scaleTo) {\n                    case exports.SpecialZoomLevel.PageFit:\n                        top = 0;\n                        left = 0;\n                        zoom(exports.SpecialZoomLevel.PageFit);\n                        break;\n                    case exports.SpecialZoomLevel.PageWidth:\n                        updateScale = calculateScale(pagesContainer, pageSizes[pageIndex].pageHeight, pageSizes[pageIndex].pageWidth, exports.SpecialZoomLevel.PageWidth, viewMode, numPages);\n                        top = (viewport.height - bottom) * updateScale;\n                        left = left * updateScale;\n                        zoom(updateScale);\n                        break;\n                    default:\n                        top = (viewport.height - bottom) * updateScale;\n                        left = left * updateScale;\n                        break;\n                }\n                switch (currentState.scrollMode) {\n                    case exports.ScrollMode.Horizontal:\n                        virtualizer.scrollToItem(pageIndex, { left: left, top: 0 }).then(function () {\n                            resolve();\n                        });\n                        break;\n                    case exports.ScrollMode.Vertical:\n                    default:\n                        virtualizer.scrollToItem(pageIndex, { left: 0, top: top }).then(function () {\n                            resolve();\n                        });\n                        break;\n                }\n            });\n        });\n    }, []);\n    var jumpToDestination = React__namespace.useCallback(function (destination) {\n        destinationManager.markVisitedDestination(destination);\n        return handleJumpToDestination(destination);\n    }, []);\n    var jumpToNextDestination = React__namespace.useCallback(function () {\n        var nextDestination = destinationManager.getNextDestination();\n        return nextDestination ? handleJumpToDestination(nextDestination) : Promise.resolve();\n    }, []);\n    var jumpToPreviousDestination = React__namespace.useCallback(function () {\n        var lastDestination = destinationManager.getPreviousDestination();\n        return lastDestination ? handleJumpToDestination(lastDestination) : Promise.resolve();\n    }, []);\n    var jumpToNextPage = React__namespace.useCallback(function () { return virtualizer.scrollToNextItem(stateRef.current.pageIndex, ZERO_OFFSET); }, []);\n    var jumpToPage = React__namespace.useCallback(function (pageIndex) {\n        return 0 <= pageIndex && pageIndex < numPages\n            ? virtualizer.scrollToItem(pageIndex, ZERO_OFFSET)\n            : Promise.resolve();\n    }, []);\n    var jumpToPreviousPage = React__namespace.useCallback(function () { return virtualizer.scrollToPreviousItem(stateRef.current.pageIndex, ZERO_OFFSET); }, []);\n    var openFile = React__namespace.useCallback(function (file) {\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(file.name, data);\n        });\n    }, [onOpenFile]);\n    var rotate = React__namespace.useCallback(function (direction) {\n        var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n        var currentRotation = stateRef.current.rotation;\n        var updateRotation = currentRotation === 360 || currentRotation === -360 ? degrees : currentRotation + degrees;\n        renderQueue.markNotRendered();\n        setRotation(updateRotation);\n        setViewerState(__assign(__assign({}, stateRef.current), { rotation: updateRotation }));\n        onRotate({ direction: direction, doc: doc, rotation: updateRotation });\n    }, []);\n    var rotatePage = React__namespace.useCallback(function (pageIndex, direction) {\n        var degrees = direction === exports.RotateDirection.Backward ? -90 : 90;\n        var rotations = stateRef.current.pagesRotation;\n        var currentPageRotation = rotations.has(pageIndex) ? rotations.get(pageIndex) : initialRotation;\n        var finalRotation = currentPageRotation + degrees;\n        var updateRotations = rotations.set(pageIndex, finalRotation);\n        setPagesRotation(updateRotations);\n        setPagesRotationChanged(function (value) { return !value; });\n        setViewerState(__assign(__assign({}, stateRef.current), { pagesRotation: updateRotations, rotatedPage: pageIndex }));\n        onRotatePage({ direction: direction, doc: doc, pageIndex: pageIndex, rotation: finalRotation });\n        renderQueue.markRendering(pageIndex);\n        setRenderPageIndex(pageIndex);\n    }, []);\n    var switchScrollMode = React__namespace.useCallback(function (scrollMode) {\n        setViewerState(__assign(__assign({}, stateRef.current), { scrollMode: scrollMode }));\n        setCurrentScrollMode(scrollMode);\n    }, []);\n    var switchViewMode = React__namespace.useCallback(function (viewMode) {\n        setViewerState(__assign(__assign({}, stateRef.current), { viewMode: viewMode }));\n        setCurrentViewMode(viewMode);\n    }, []);\n    var zoom = React__namespace.useCallback(function (newScale) {\n        var pagesEle = pagesRef.current;\n        var currentPage = stateRef.current.pageIndex;\n        if (currentPage < 0 || currentPage >= numPages) {\n            return;\n        }\n        var currentPageHeight = pageSizes[currentPage].pageHeight;\n        var currentPageWidth = pageSizes[currentPage].pageWidth;\n        var updateScale = pagesEle\n            ? typeof newScale === 'string'\n                ? calculateScale(pagesEle, currentPageHeight, currentPageWidth, newScale, stateRef.current.viewMode, numPages)\n                : newScale\n            : 1;\n        keepSpecialZoomLevelRef.current = typeof newScale === 'string' ? newScale : null;\n        if (updateScale === stateRef.current.scale) {\n            return;\n        }\n        setRenderQueueKey(function (key) { return key + 1; });\n        renderQueue.markNotRendered();\n        setScale(updateScale);\n        onZoom({ doc: doc, scale: updateScale });\n        setViewerState(__assign(__assign({}, stateRef.current), { scale: updateScale }));\n    }, []);\n    var enterFullScreenMode = React__namespace.useCallback(function (target) {\n        fullScreen.enterFullScreenMode(target);\n    }, []);\n    var exitFullScreenMode = React__namespace.useCallback(function () {\n        fullScreen.exitFullScreenMode();\n    }, []);\n    React__namespace.useEffect(function () {\n        setViewerState(__assign(__assign({}, stateRef.current), { fullScreenMode: fullScreen.fullScreenMode }));\n    }, [fullScreen.fullScreenMode]);\n    React__namespace.useEffect(function () {\n        var pluginMethods = {\n            enterFullScreenMode: enterFullScreenMode,\n            exitFullScreenMode: exitFullScreenMode,\n            getPagesContainer: getPagesContainer,\n            getViewerState: getViewerState,\n            jumpToDestination: jumpToDestination,\n            jumpToNextDestination: jumpToNextDestination,\n            jumpToPreviousDestination: jumpToPreviousDestination,\n            jumpToNextPage: jumpToNextPage,\n            jumpToPreviousPage: jumpToPreviousPage,\n            jumpToPage: jumpToPage,\n            openFile: openFile,\n            rotate: rotate,\n            rotatePage: rotatePage,\n            setViewerState: setViewerState,\n            switchScrollMode: switchScrollMode,\n            switchViewMode: switchViewMode,\n            zoom: zoom,\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.install) {\n                plugin.install(pluginMethods);\n            }\n        });\n        return function () {\n            plugins.forEach(function (plugin) {\n                if (plugin.uninstall) {\n                    plugin.uninstall(pluginMethods);\n                }\n            });\n        };\n    }, [docId]);\n    React__namespace.useEffect(function () {\n        onDocumentLoad({ doc: doc, file: currentFile });\n        plugins.forEach(function (plugin) {\n            plugin.onDocumentLoad && plugin.onDocumentLoad({ doc: doc, file: currentFile });\n        });\n    }, [docId]);\n    var boundingClientRect = virtualizer.boundingClientRect;\n    useRunOnce(function () {\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, boundingClientRect.height > 0 && boundingClientRect.width > 0);\n    useIsomorphicLayoutEffect(function () {\n        var latestPage = stateRef.current.pageIndex;\n        if (latestPage > -1 && previousScrollMode !== currentScrollMode) {\n            virtualizer.scrollToItem(latestPage, ZERO_OFFSET).then(function () {\n                if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely) {\n                    if (!enableSmoothScroll) {\n                        renderQueue.markNotRendered();\n                    }\n                    forceTargetFullScreenRef.current = -1;\n                }\n            });\n        }\n    }, [currentScrollMode]);\n    useIsomorphicLayoutEffect(function () {\n        var latestPage = stateRef.current.pageIndex;\n        if (latestPage > -1 && previousRotation !== rotation) {\n            virtualizer.scrollToItem(latestPage, ZERO_OFFSET);\n        }\n    }, [rotation]);\n    useIsomorphicLayoutEffect(function () {\n        if (previousScale != 0 && previousScale != stateRef.current.scale) {\n            virtualizer.zoom(stateRef.current.scale / previousScale, stateRef.current.pageIndex).then(function () {\n                if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely) {\n                    forceTargetZoomRef.current = -1;\n                }\n            });\n        }\n    }, [scale]);\n    useIsomorphicLayoutEffect(function () {\n        if (previousViewMode === stateRef.current.viewMode) {\n            return;\n        }\n        var startPage = virtualizer.startPage, endPage = virtualizer.endPage, virtualItems = virtualizer.virtualItems;\n        renderQueue.markNotRendered();\n        renderQueue.setRange(startPage, endPage);\n        var _loop_1 = function (i) {\n            var item = virtualItems.find(function (item) { return item.index === i; });\n            if (item) {\n                renderQueue.setVisibility(i, item.visibility);\n            }\n        };\n        for (var i = startPage; i <= endPage; i++) {\n            _loop_1(i);\n        }\n        renderNextPage();\n    }, [currentViewMode]);\n    useIsomorphicLayoutEffect(function () {\n        var latestPage = stateRef.current.pageIndex;\n        if (latestPage > -1 && previousViewMode !== currentViewMode) {\n            virtualizer.scrollToItem(latestPage, ZERO_OFFSET);\n        }\n    }, [currentViewMode]);\n    useIsomorphicLayoutEffect(function () {\n        var latestPage = stateRef.current.pageIndex;\n        if (latestPage > 0 &&\n            latestPage === initialPage &&\n            forceTargetInitialPageRef.current === initialPage &&\n            keepSpecialZoomLevelRef.current) {\n            forceTargetInitialPageRef.current = -1;\n            zoom(keepSpecialZoomLevelRef.current);\n        }\n    }, [currentPage]);\n    React__namespace.useEffect(function () {\n        var isSmoothScrolling = virtualizer.isSmoothScrolling;\n        if (isSmoothScrolling) {\n            return;\n        }\n        if (mostRecentVisitedRef.current === null || mostRecentVisitedRef.current !== currentPage) {\n            mostRecentVisitedRef.current = currentPage;\n            onPageChange({ currentPage: currentPage, doc: doc });\n        }\n    }, [currentPage, virtualizer.isSmoothScrolling]);\n    React__namespace.useEffect(function () {\n        if (fullScreen.fullScreenMode === exports.FullScreenMode.Entering && stateRef.current.scrollMode === exports.ScrollMode.Page) {\n            forceTargetFullScreenRef.current = stateRef.current.pageIndex;\n        }\n        if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely &&\n            stateRef.current.scrollMode === exports.ScrollMode.Page &&\n            enableSmoothScroll) {\n            forceTargetFullScreenRef.current = -1;\n        }\n        if (fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely && keepSpecialZoomLevelRef.current) {\n            forceTargetZoomRef.current = stateRef.current.pageIndex;\n            zoom(keepSpecialZoomLevelRef.current);\n        }\n    }, [fullScreen.fullScreenMode]);\n    React__namespace.useEffect(function () {\n        if (fullScreen.fullScreenMode === exports.FullScreenMode.Entering ||\n            fullScreen.fullScreenMode === exports.FullScreenMode.Exitting ||\n            virtualizer.isSmoothScrolling) {\n            return;\n        }\n        var startPage = virtualizer.startPage, endPage = virtualizer.endPage, maxVisbilityIndex = virtualizer.maxVisbilityIndex, virtualItems = virtualizer.virtualItems;\n        var currentPage = maxVisbilityIndex;\n        var isFullScreen = fullScreen.fullScreenMode === exports.FullScreenMode.Entered ||\n            fullScreen.fullScreenMode === exports.FullScreenMode.EnteredCompletely;\n        if (isFullScreen && currentPage !== forceTargetFullScreenRef.current && forceTargetFullScreenRef.current > -1) {\n            return;\n        }\n        if (isFullScreen && currentPage !== forceTargetZoomRef.current && forceTargetZoomRef.current > -1) {\n            return;\n        }\n        setCurrentPage(currentPage);\n        setViewerState(__assign(__assign({}, stateRef.current), { pageIndex: currentPage }));\n        renderQueue.setRange(startPage, endPage);\n        var _loop_2 = function (i) {\n            var item = virtualItems.find(function (item) { return item.index === i; });\n            if (item) {\n                renderQueue.setVisibility(i, item.visibility);\n            }\n        };\n        for (var i = startPage; i <= endPage; i++) {\n            _loop_2(i);\n        }\n        renderNextPage();\n    }, [\n        virtualizer.startPage,\n        virtualizer.endPage,\n        virtualizer.isSmoothScrolling,\n        virtualizer.maxVisbilityIndex,\n        fullScreen.fullScreenMode,\n        pagesRotationChanged,\n        rotation,\n        scale,\n    ]);\n    var handlePageRenderCompleted = React__namespace.useCallback(function (pageIndex) {\n        renderQueue.markRendered(pageIndex);\n        renderNextPage();\n    }, [renderQueueKey]);\n    var renderNextPage = function () {\n        var nextPage = renderQueue.getHighestPriorityPage();\n        if (nextPage > -1 && renderQueue.isInRange(nextPage)) {\n            renderQueue.markRendering(nextPage);\n            setRenderPageIndex(nextPage);\n        }\n    };\n    var executeNamedAction = function (action) {\n        var previousPage = currentPage - 1;\n        var nextPage = currentPage + 1;\n        switch (action) {\n            case 'FirstPage':\n                jumpToPage(0);\n                break;\n            case 'LastPage':\n                jumpToPage(numPages - 1);\n                break;\n            case 'NextPage':\n                nextPage < numPages && jumpToPage(nextPage);\n                break;\n            case 'PrevPage':\n                previousPage >= 0 && jumpToPage(previousPage);\n                break;\n        }\n    };\n    var renderViewer = React__namespace.useCallback(function () {\n        var virtualItems = virtualizer.virtualItems;\n        var chunks = [];\n        switch (currentViewMode) {\n            case exports.ViewMode.DualPage:\n                chunks = chunk(virtualItems, 2);\n                break;\n            case exports.ViewMode.DualPageWithCover:\n                if (virtualItems.length) {\n                    chunks =\n                        virtualItems[0].index === 0\n                            ? [[virtualItems[0]]].concat(chunk(virtualItems.slice(1), 2))\n                            : chunk(virtualItems, 2);\n                }\n                break;\n            case exports.ViewMode.SinglePage:\n            default:\n                chunks = chunk(virtualItems, 1);\n                break;\n        }\n        var pageLabel = l10n && l10n.core ? l10n.core.pageLabel : 'Page {{pageIndex}}';\n        var slot = {\n            attrs: {\n                className: 'rpv-core__inner-container',\n                'data-testid': 'core__inner-container',\n                ref: containerRef,\n                style: {\n                    height: '100%',\n                },\n            },\n            children: React__namespace.createElement(React__namespace.Fragment, null),\n            subSlot: {\n                attrs: {\n                    'data-testid': 'core__inner-pages',\n                    className: classNames({\n                        'rpv-core__inner-pages': true,\n                        'rpv-core__inner-pages--horizontal': currentScrollMode === exports.ScrollMode.Horizontal,\n                        'rpv-core__inner-pages--rtl': isRtl,\n                        'rpv-core__inner-pages--single': currentScrollMode === exports.ScrollMode.Page,\n                        'rpv-core__inner-pages--vertical': currentScrollMode === exports.ScrollMode.Vertical,\n                        'rpv-core__inner-pages--wrapped': currentScrollMode === exports.ScrollMode.Wrapped,\n                    }),\n                    ref: pagesRef,\n                    style: {\n                        height: '100%',\n                        position: 'relative',\n                    },\n                },\n                children: (React__namespace.createElement(\"div\", { \"data-testid\": \"core__inner-current-page-\".concat(currentPage), style: Object.assign({\n                        '--scale-factor': scale,\n                    }, virtualizer.getContainerStyles()) }, chunks.map(function (items) { return (React__namespace.createElement(\"div\", { className: classNames({\n                        'rpv-core__inner-page-container': true,\n                        'rpv-core__inner-page-container--single': currentScrollMode === exports.ScrollMode.Page,\n                    }), style: virtualizer.getItemContainerStyles(items[0]), key: \"\".concat(items[0].index, \"-\").concat(currentViewMode) }, items.map(function (item) {\n                    var isCover = currentViewMode === exports.ViewMode.DualPageWithCover &&\n                        (item.index === 0 || (numPages % 2 === 0 && item.index === numPages - 1));\n                    return (React__namespace.createElement(\"div\", { \"aria-label\": pageLabel.replace('{{pageIndex}}', \"\".concat(item.index + 1)), className: classNames({\n                            'rpv-core__inner-page': true,\n                            'rpv-core__inner-page--dual-even': currentViewMode === exports.ViewMode.DualPage && item.index % 2 === 0,\n                            'rpv-core__inner-page--dual-odd': currentViewMode === exports.ViewMode.DualPage && item.index % 2 === 1,\n                            'rpv-core__inner-page--dual-cover': isCover,\n                            'rpv-core__inner-page--dual-cover-even': currentViewMode === exports.ViewMode.DualPageWithCover &&\n                                !isCover &&\n                                item.index % 2 === 0,\n                            'rpv-core__inner-page--dual-cover-odd': currentViewMode === exports.ViewMode.DualPageWithCover &&\n                                !isCover &&\n                                item.index % 2 === 1,\n                            'rpv-core__inner-page--single': currentViewMode === exports.ViewMode.SinglePage &&\n                                currentScrollMode === exports.ScrollMode.Page,\n                        }), role: \"region\", key: \"\".concat(item.index, \"-\").concat(currentViewMode), style: Object.assign({}, virtualizer.getItemStyles(item), layoutBuilder.buildPageStyles({\n                            numPages: numPages,\n                            pageIndex: item.index,\n                            scrollMode: currentScrollMode,\n                            viewMode: currentViewMode,\n                        })) },\n                        React__namespace.createElement(PageLayer, { doc: doc, measureRef: item.measureRef, outlines: outlines, pageIndex: item.index, pageRotation: pagesRotation.has(item.index) ? pagesRotation.get(item.index) : 0, pageSize: pageSizes[item.index], plugins: plugins, renderPage: renderPage, renderQueueKey: renderQueueKey, rotation: rotation, scale: scale, shouldRender: renderPageIndex === item.index, viewMode: currentViewMode, onExecuteNamedAction: executeNamedAction, onJumpFromLinkAnnotation: handleJumpFromLinkAnnotation, onJumpToDest: jumpToDestination, onRenderCompleted: handlePageRenderCompleted, onRotatePage: rotatePage })));\n                }))); }))),\n            },\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.renderViewer) {\n                slot = plugin.renderViewer({\n                    containerRef: containerRef,\n                    doc: doc,\n                    pagesContainerRef: pagesRef,\n                    pagesRotation: pagesRotation,\n                    pageSizes: pageSizes,\n                    rotation: rotation,\n                    slot: slot,\n                    themeContext: themeContext,\n                    jumpToPage: jumpToPage,\n                    openFile: openFile,\n                    rotate: rotate,\n                    rotatePage: rotatePage,\n                    switchScrollMode: switchScrollMode,\n                    switchViewMode: switchViewMode,\n                    zoom: zoom,\n                });\n            }\n        });\n        return slot;\n    }, [plugins, virtualizer]);\n    var renderSlot = React__namespace.useCallback(function (slot) { return (React__namespace.createElement(\"div\", __assign({}, slot.attrs, { style: slot.attrs && slot.attrs.style ? slot.attrs.style : {} }),\n        slot.children,\n        slot.subSlot && renderSlot(slot.subSlot))); }, []);\n    return renderSlot(renderViewer());\n};\n\nvar LEVELS = [\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6,\n    5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10,\n];\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar RESERVE_HEIGHT = 45;\nvar RESERVE_WIDTH = 45;\nvar PageSizeCalculator = function (_a) {\n    var defaultScale = _a.defaultScale, doc = _a.doc, render = _a.render, scrollMode = _a.scrollMode, viewMode = _a.viewMode;\n    var pagesRef = React__namespace.useRef();\n    var _b = React__namespace.useState({\n        pageSizes: [],\n        scale: 0,\n    }), state = _b[0], setState = _b[1];\n    React__namespace.useLayoutEffect(function () {\n        var queryPageSizes = Array(doc.numPages)\n            .fill(0)\n            .map(function (_, i) {\n            return new Promise(function (resolve, _) {\n                getPage(doc, i).then(function (pdfPage) {\n                    var viewport = pdfPage.getViewport({ scale: 1 });\n                    resolve({\n                        pageHeight: viewport.height,\n                        pageWidth: viewport.width,\n                        rotation: viewport.rotation,\n                    });\n                });\n            });\n        });\n        Promise.all(queryPageSizes).then(function (pageSizes) {\n            var pagesEle = pagesRef.current;\n            if (!pagesEle || pageSizes.length === 0) {\n                return;\n            }\n            var w = pageSizes[0].pageWidth;\n            var h = pageSizes[0].pageHeight;\n            var parentEle = pagesEle.parentElement;\n            var scaleWidth = (parentEle.clientWidth - RESERVE_WIDTH) / w;\n            var scaleHeight = (parentEle.clientHeight - RESERVE_HEIGHT) / h;\n            var scaled = scaleWidth;\n            switch (scrollMode) {\n                case exports.ScrollMode.Horizontal:\n                    scaled = Math.min(scaleWidth, scaleHeight);\n                    break;\n                case exports.ScrollMode.Vertical:\n                default:\n                    scaled = scaleWidth;\n                    break;\n            }\n            var scale = defaultScale\n                ? typeof defaultScale === 'string'\n                    ? calculateScale(parentEle, h, w, defaultScale, viewMode, doc.numPages)\n                    : defaultScale\n                : decrease(scaled);\n            setState({ pageSizes: pageSizes, scale: scale });\n        });\n    }, [doc.loadingTask.docId]);\n    return state.pageSizes.length === 0 || state.scale === 0 ? (React__namespace.createElement(\"div\", { className: \"rpv-core__page-size-calculator\", \"data-testid\": \"core__page-size-calculating\", ref: pagesRef },\n        React__namespace.createElement(Spinner, null))) : (render(state.pageSizes, state.scale));\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPassword, passwordStatus) {\n        var _this = _super.call(this) || this;\n        _this.verifyPassword = verifyPassword;\n        _this.passwordStatus = passwordStatus;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var passwordStatus = _a.passwordStatus, renderProtectedView = _a.renderProtectedView, verifyPassword = _a.verifyPassword, onDocumentAskPassword = _a.onDocumentAskPassword;\n    var l10n = React__namespace.useContext(LocalizationContext).l10n;\n    var _b = React__namespace.useState(''), password = _b[0], setPassword = _b[1];\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var submit = function () { return verifyPassword(password); };\n    var handleKeyDown = function (e) {\n        if (e.key === 'Enter') {\n            submit();\n        }\n    };\n    React__namespace.useEffect(function () {\n        if (onDocumentAskPassword) {\n            onDocumentAskPassword({\n                verifyPassword: verifyPassword,\n            });\n        }\n    }, []);\n    if (renderProtectedView) {\n        return renderProtectedView({\n            passwordStatus: passwordStatus,\n            verifyPassword: verifyPassword,\n        });\n    }\n    return (React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-wrapper\" },\n        React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__asking-password': true,\n                'rpv-core__asking-password--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-message\" },\n                passwordStatus === exports.PasswordStatus.RequiredPassword &&\n                    l10n.core.askingPassword\n                        .requirePasswordToOpen,\n                passwordStatus === exports.PasswordStatus.WrongPassword &&\n                    l10n.core.wrongPassword.tryAgain),\n            React__namespace.createElement(\"div\", { className: \"rpv-core__asking-password-body\" },\n                React__namespace.createElement(\"div\", { className: classNames({\n                        'rpv-core__asking-password-input': true,\n                        'rpv-core__asking-password-input--ltr': !isRtl,\n                        'rpv-core__asking-password-input--rtl': isRtl,\n                    }) },\n                    React__namespace.createElement(TextBox, { testId: \"core__asking-password-input\", type: \"password\", value: password, onChange: setPassword, onKeyDown: handleKeyDown })),\n                React__namespace.createElement(PrimaryButton, { onClick: submit }, l10n.core.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var characterMap = _a.characterMap, file = _a.file, httpHeaders = _a.httpHeaders, render = _a.render, renderError = _a.renderError, renderLoader = _a.renderLoader, renderProtectedView = _a.renderProtectedView, transformGetDocumentParams = _a.transformGetDocumentParams, withCredentials = _a.withCredentials, onDocumentAskPassword = _a.onDocumentAskPassword;\n    var direction = React__namespace.useContext(ThemeContext).direction;\n    var isRtl = direction === exports.TextDirection.RightToLeft;\n    var _b = React__namespace.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    var docRef = React__namespace.useRef('');\n    var isMounted = useIsMounted();\n    React__namespace.useEffect(function () {\n        docRef.current = '';\n        setStatus(new LoadingState(0));\n        var worker = new PdfJsApi__namespace.PDFWorker({ name: \"PDFWorker_\".concat(Date.now()) });\n        var params = Object.assign({\n            httpHeaders: httpHeaders,\n            withCredentials: withCredentials,\n            worker: worker,\n        }, 'string' === typeof file ? { url: file } : { data: file }, characterMap\n            ? {\n                cMapUrl: characterMap.url,\n                cMapPacked: characterMap.isCompressed,\n            }\n            : {});\n        var transformParams = transformGetDocumentParams ? transformGetDocumentParams(params) : params;\n        var loadingTask = PdfJsApi__namespace.getDocument(transformParams);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJsApi__namespace.PasswordResponses.NEED_PASSWORD:\n                    isMounted.current &&\n                        setStatus(new AskForPasswordState(verifyPassword, exports.PasswordStatus.RequiredPassword));\n                    break;\n                case PdfJsApi__namespace.PasswordResponses.INCORRECT_PASSWORD:\n                    isMounted.current &&\n                        setStatus(new AskForPasswordState(verifyPassword, exports.PasswordStatus.WrongPassword));\n                    break;\n            }\n        };\n        loadingTask.onProgress = function (progress) {\n            var loaded = progress.total > 0\n                ?\n                    Math.min(100, (100 * progress.loaded) / progress.total)\n                : 100;\n            if (isMounted.current && docRef.current === '') {\n                setStatus(new LoadingState(loaded));\n            }\n        };\n        loadingTask.promise.then(function (doc) {\n            docRef.current = doc.loadingTask.docId;\n            isMounted.current && setStatus(new CompletedState(doc));\n        }, function (err) {\n            return isMounted.current &&\n                !worker.destroyed &&\n                setStatus(new FailureState({\n                    message: err.message || 'Cannot load document',\n                    name: err.name,\n                }));\n        });\n        return function () {\n            loadingTask.destroy();\n            worker.destroy();\n        };\n    }, [file]);\n    if (status instanceof AskForPasswordState) {\n        return (React__namespace.createElement(AskingPassword, { passwordStatus: status.passwordStatus, renderProtectedView: renderProtectedView, verifyPassword: status.verifyPassword, onDocumentAskPassword: onDocumentAskPassword }));\n    }\n    if (status instanceof CompletedState) {\n        return render(status.doc);\n    }\n    if (status instanceof FailureState) {\n        return renderError ? (renderError(status.error)) : (React__namespace.createElement(\"div\", { className: classNames({\n                'rpv-core__doc-error': true,\n                'rpv-core__doc-error--rtl': isRtl,\n            }) },\n            React__namespace.createElement(\"div\", { className: \"rpv-core__doc-error-text\" }, status.error.message)));\n    }\n    return (React__namespace.createElement(\"div\", { \"data-testid\": \"core__doc-loading\", className: classNames({\n            'rpv-core__doc-loading': true,\n            'rpv-core__doc-loading--rtl': isRtl,\n        }) }, renderLoader ? renderLoader(status.percentages) : React__namespace.createElement(Spinner, null)));\n};\n\nvar isDarkMode = function () {\n    return typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n};\n\nvar withTheme = function (theme, onSwitchTheme) {\n    var initialTheme = React__namespace.useMemo(function () { return (theme === 'auto' ? (isDarkMode() ? 'dark' : 'light') : theme); }, []);\n    var _a = React__namespace.useState(initialTheme), currentTheme = _a[0], setCurrentTheme = _a[1];\n    var prevTheme = usePrevious(currentTheme);\n    React__namespace.useEffect(function () {\n        if (theme !== 'auto') {\n            return;\n        }\n        var media = window.matchMedia('(prefers-color-scheme: dark)');\n        var handler = function (e) {\n            setCurrentTheme(e.matches ? 'dark' : 'light');\n        };\n        media.addEventListener('change', handler);\n        return function () { return media.removeEventListener('change', handler); };\n    }, []);\n    React__namespace.useEffect(function () {\n        if (currentTheme !== prevTheme && onSwitchTheme) {\n            onSwitchTheme(currentTheme);\n        }\n    }, [currentTheme]);\n    React__namespace.useEffect(function () {\n        if (theme !== currentTheme) {\n            setCurrentTheme(theme);\n        }\n    }, [theme]);\n    return {\n        currentTheme: currentTheme,\n        setCurrentTheme: setCurrentTheme,\n    };\n};\n\nvar isSameUrl = function (a, b) {\n    var typeA = typeof a;\n    var typeB = typeof b;\n    if (typeA === 'string' && typeB === 'string' && a === b) {\n        return true;\n    }\n    if (typeA === 'object' && typeB === 'object') {\n        return a.length === b.length && a.every(function (v, i) { return v === b[i]; });\n    }\n    return false;\n};\n\nvar NUM_OVERSCAN_PAGES = 3;\nvar DEFAULT_RENDER_RANGE = function (visiblePagesRange) {\n    return {\n        startPage: visiblePagesRange.startPage - NUM_OVERSCAN_PAGES,\n        endPage: visiblePagesRange.endPage + NUM_OVERSCAN_PAGES,\n    };\n};\nvar Viewer = function (_a) {\n    var characterMap = _a.characterMap, defaultScale = _a.defaultScale, _b = _a.enableSmoothScroll, enableSmoothScroll = _b === void 0 ? true : _b, fileUrl = _a.fileUrl, _c = _a.httpHeaders, httpHeaders = _c === void 0 ? {} : _c, _d = _a.initialPage, initialPage = _d === void 0 ? 0 : _d, pageLayout = _a.pageLayout, _e = _a.initialRotation, initialRotation = _e === void 0 ? 0 : _e, localization = _a.localization, _f = _a.plugins, plugins = _f === void 0 ? [] : _f, renderError = _a.renderError, renderLoader = _a.renderLoader, renderPage = _a.renderPage, renderProtectedView = _a.renderProtectedView, _g = _a.scrollMode, scrollMode = _g === void 0 ? exports.ScrollMode.Vertical : _g, _h = _a.setRenderRange, setRenderRange = _h === void 0 ? DEFAULT_RENDER_RANGE : _h, transformGetDocumentParams = _a.transformGetDocumentParams, _j = _a.theme, theme = _j === void 0 ? {\n        direction: exports.TextDirection.LeftToRight,\n        theme: 'light',\n    } : _j, _k = _a.viewMode, viewMode = _k === void 0 ? exports.ViewMode.SinglePage : _k, _l = _a.withCredentials, withCredentials = _l === void 0 ? false : _l, onDocumentAskPassword = _a.onDocumentAskPassword, _m = _a.onDocumentLoad, onDocumentLoad = _m === void 0 ? function () {\n    } : _m, _o = _a.onPageChange, onPageChange = _o === void 0 ? function () {\n    } : _o, _p = _a.onRotate, onRotate = _p === void 0 ? function () {\n    } : _p, _q = _a.onRotatePage, onRotatePage = _q === void 0 ? function () {\n    } : _q, _r = _a.onSwitchTheme, onSwitchTheme = _r === void 0 ? function () {\n    } : _r, _s = _a.onZoom, onZoom = _s === void 0 ? function () {\n    } : _s;\n    var _t = React__namespace.useState({\n        data: fileUrl,\n        name: typeof fileUrl === 'string' ? fileUrl : '',\n        shouldLoad: false,\n    }), file = _t[0], setFile = _t[1];\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n            shouldLoad: true,\n        });\n    };\n    var _u = React__namespace.useState(false), visible = _u[0], setVisible = _u[1];\n    var prevFile = usePrevious(file);\n    React__namespace.useEffect(function () {\n        if (!isSameUrl(prevFile.data, fileUrl)) {\n            setFile({\n                data: fileUrl,\n                name: typeof fileUrl === 'string' ? fileUrl : '',\n                shouldLoad: visible,\n            });\n        }\n    }, [fileUrl, visible]);\n    var visibilityChanged = function (params) {\n        setVisible(params.isVisible);\n        if (params.isVisible) {\n            setFile(function (currentFile) { return Object.assign({}, currentFile, { shouldLoad: true }); });\n        }\n    };\n    var containerRef = useIntersectionObserver({\n        onVisibilityChanged: visibilityChanged,\n    });\n    var themeProps = typeof theme === 'string' ? { direction: exports.TextDirection.LeftToRight, theme: theme } : theme;\n    var _v = React__namespace.useState(localization || DefaultLocalization), l10n = _v[0], setL10n = _v[1];\n    var localizationContext = { l10n: l10n, setL10n: setL10n };\n    var themeContext = Object.assign({}, { direction: themeProps.direction }, withTheme(themeProps.theme || 'light', onSwitchTheme));\n    React__namespace.useEffect(function () {\n        if (localization) {\n            setL10n(localization);\n        }\n    }, [localization]);\n    return (React__namespace.createElement(LocalizationContext.Provider, { value: localizationContext },\n        React__namespace.createElement(ThemeContext.Provider, { value: themeContext },\n            React__namespace.createElement(\"div\", { ref: containerRef, className: \"rpv-core__viewer rpv-core__viewer--\".concat(themeContext.currentTheme), \"data-testid\": \"core__viewer\", style: {\n                    height: '100%',\n                    width: '100%',\n                } }, file.shouldLoad && (React__namespace.createElement(DocumentLoader, { characterMap: characterMap, file: file.data, httpHeaders: httpHeaders, render: function (doc) { return (React__namespace.createElement(PageSizeCalculator, { defaultScale: defaultScale, doc: doc, render: function (pageSizes, initialScale) { return (React__namespace.createElement(Inner, { currentFile: {\n                            data: file.data,\n                            name: file.name,\n                        }, defaultScale: defaultScale, doc: doc, enableSmoothScroll: enableSmoothScroll, initialPage: initialPage, initialRotation: initialRotation, initialScale: initialScale, pageLayout: pageLayout, pageSizes: pageSizes, plugins: plugins, renderPage: renderPage, scrollMode: scrollMode, setRenderRange: setRenderRange, viewMode: viewMode, viewerState: {\n                            file: file,\n                            fullScreenMode: exports.FullScreenMode.Normal,\n                            pageIndex: -1,\n                            pageHeight: pageSizes[0].pageHeight,\n                            pageWidth: pageSizes[0].pageWidth,\n                            pagesRotation: new Map(),\n                            rotation: initialRotation,\n                            scale: initialScale,\n                            scrollMode: scrollMode,\n                            viewMode: viewMode,\n                        }, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onRotate: onRotate, onRotatePage: onRotatePage, onZoom: onZoom })); }, scrollMode: scrollMode, viewMode: viewMode })); }, renderError: renderError, renderLoader: renderLoader, renderProtectedView: renderProtectedView, transformGetDocumentParams: transformGetDocumentParams, withCredentials: withCredentials, onDocumentAskPassword: onDocumentAskPassword }))))));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJsApi__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React__namespace.createElement(React__namespace.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LazyRender = LazyRender;\nexports.LocalizationContext = LocalizationContext;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.MinimalButton = MinimalButton;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.Spinner = Spinner;\nexports.Splitter = Splitter;\nexports.TextBox = TextBox;\nexports.ThemeContext = ThemeContext;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.chunk = chunk;\nexports.classNames = classNames;\nexports.createStore = createStore;\nexports.getDestination = getDestination;\nexports.getPage = getPage;\nexports.isFullScreenEnabled = isFullScreenEnabled;\nexports.isMac = isMac;\nexports.useDebounceCallback = useDebounceCallback;\nexports.useIntersectionObserver = useIntersectionObserver;\nexports.useIsMounted = useIsMounted;\nexports.useIsomorphicLayoutEffect = useIsomorphicLayoutEffect;\nexports.usePrevious = usePrevious;\nexports.useRenderQueue = useRenderQueue;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}